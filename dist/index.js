(()=>{var e={5265:function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){void 0===s&&(s=r),Object.defineProperty(e,s,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.hasOwnProperty.call(e,r)&&s(t,e,r);return n(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.issue=t.issueCommand=void 0;const i=o(r(2037)),a=r(4570);function c(e,t,r){const s=new u(e,t,r);process.stdout.write(s.toString()+i.EOL)}t.issueCommand=c,t.issue=function(e,t=""){c(e,{},t)};class u{constructor(e,t,r){e||(e="missing.command"),this.command=e,this.properties=t,this.message=r}toString(){let e="::"+this.command;if(this.properties&&Object.keys(this.properties).length>0){e+=" ";let r=!0;for(const s in this.properties)if(this.properties.hasOwnProperty(s)){const n=this.properties[s];n&&(r?r=!1:e+=",",e+=`${s}=${t=n,a.toCommandValue(t).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A").replace(/:/g,"%3A").replace(/,/g,"%2C")}`)}}var t;return e+=`::${function(e){return a.toCommandValue(e).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A")}(this.message)}`,e}}},2225:function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){void 0===s&&(s=r),Object.defineProperty(e,s,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.hasOwnProperty.call(e,r)&&s(t,e,r);return n(t,e),t},i=this&&this.__awaiter||function(e,t,r,s){return new(r||(r=Promise))((function(n,o){function i(e){try{c(s.next(e))}catch(e){o(e)}}function a(e){try{c(s.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}c((s=s.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.getIDToken=t.getState=t.saveState=t.group=t.endGroup=t.startGroup=t.info=t.notice=t.warning=t.error=t.debug=t.isDebug=t.setFailed=t.setCommandEcho=t.setOutput=t.getBooleanInput=t.getMultilineInput=t.getInput=t.addPath=t.setSecret=t.exportVariable=t.ExitCode=void 0;const a=r(5265),c=r(3108),u=r(4570),h=o(r(2037)),l=o(r(1017)),d=r(3021),p=r(1526);var f;function m(e,t){const r=process.env[`INPUT_${e.replace(/ /g,"_").toUpperCase()}`]||"";if(t&&t.required&&!r)throw new Error(`Input required and not supplied: ${e}`);return t&&!1===t.trimWhitespace?r:r.trim()}function y(e,t={}){a.issueCommand("error",u.toCommandProperties(t),e instanceof Error?e.toString():e)}function g(e){a.issue("group",e)}function _(){a.issue("endgroup")}!function(e){e[e.Success=0]="Success",e[e.Failure=1]="Failure"}(f=t.ExitCode||(t.ExitCode={})),t.exportVariable=function(e,t){const r=u.toCommandValue(t);if(process.env[e]=r,process.env.GITHUB_ENV){const t=`ghadelimiter_${d.v4()}`;if(e.includes(t))throw new Error(`Unexpected input: name should not contain the delimiter "${t}"`);if(r.includes(t))throw new Error(`Unexpected input: value should not contain the delimiter "${t}"`);const s=`${e}<<${t}${h.EOL}${r}${h.EOL}${t}`;c.issueCommand("ENV",s)}else a.issueCommand("set-env",{name:e},r)},t.setSecret=function(e){a.issueCommand("add-mask",{},e)},t.addPath=function(e){process.env.GITHUB_PATH?c.issueCommand("PATH",e):a.issueCommand("add-path",{},e),process.env.PATH=`${e}${l.delimiter}${process.env.PATH}`},t.getInput=m,t.getMultilineInput=function(e,t){return m(e,t).split("\n").filter((e=>""!==e))},t.getBooleanInput=function(e,t){const r=m(e,t);if(["true","True","TRUE"].includes(r))return!0;if(["false","False","FALSE"].includes(r))return!1;throw new TypeError(`Input does not meet YAML 1.2 "Core Schema" specification: ${e}\nSupport boolean input list: \`true | True | TRUE | false | False | FALSE\``)},t.setOutput=function(e,t){process.stdout.write(h.EOL),a.issueCommand("set-output",{name:e},t)},t.setCommandEcho=function(e){a.issue("echo",e?"on":"off")},t.setFailed=function(e){process.exitCode=f.Failure,y(e)},t.isDebug=function(){return"1"===process.env.RUNNER_DEBUG},t.debug=function(e){a.issueCommand("debug",{},e)},t.error=y,t.warning=function(e,t={}){a.issueCommand("warning",u.toCommandProperties(t),e instanceof Error?e.toString():e)},t.notice=function(e,t={}){a.issueCommand("notice",u.toCommandProperties(t),e instanceof Error?e.toString():e)},t.info=function(e){process.stdout.write(e+h.EOL)},t.startGroup=g,t.endGroup=_,t.group=function(e,t){return i(this,void 0,void 0,(function*(){let r;g(e);try{r=yield t()}finally{_()}return r}))},t.saveState=function(e,t){a.issueCommand("save-state",{name:e},t)},t.getState=function(e){return process.env[`STATE_${e}`]||""},t.getIDToken=function(e){return i(this,void 0,void 0,(function*(){return yield p.OidcClient.getIDToken(e)}))};var b=r(7410);Object.defineProperty(t,"summary",{enumerable:!0,get:function(){return b.summary}});var v=r(7410);Object.defineProperty(t,"markdownSummary",{enumerable:!0,get:function(){return v.markdownSummary}});var w=r(6340);Object.defineProperty(t,"toPosixPath",{enumerable:!0,get:function(){return w.toPosixPath}}),Object.defineProperty(t,"toWin32Path",{enumerable:!0,get:function(){return w.toWin32Path}}),Object.defineProperty(t,"toPlatformPath",{enumerable:!0,get:function(){return w.toPlatformPath}})},3108:function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){void 0===s&&(s=r),Object.defineProperty(e,s,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.hasOwnProperty.call(e,r)&&s(t,e,r);return n(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.issueCommand=void 0;const i=o(r(7147)),a=o(r(2037)),c=r(4570);t.issueCommand=function(e,t){const r=process.env[`GITHUB_${e}`];if(!r)throw new Error(`Unable to find environment variable for file command ${e}`);if(!i.existsSync(r))throw new Error(`Missing file at path: ${r}`);i.appendFileSync(r,`${c.toCommandValue(t)}${a.EOL}`,{encoding:"utf8"})}},1526:function(e,t,r){"use strict";var s=this&&this.__awaiter||function(e,t,r,s){return new(r||(r=Promise))((function(n,o){function i(e){try{c(s.next(e))}catch(e){o(e)}}function a(e){try{c(s.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}c((s=s.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.OidcClient=void 0;const n=r(4635),o=r(2429),i=r(2225);class a{static createHttpClient(e=!0,t=10){const r={allowRetries:e,maxRetries:t};return new n.HttpClient("actions/oidc-client",[new o.BearerCredentialHandler(a.getRequestToken())],r)}static getRequestToken(){const e=process.env.ACTIONS_ID_TOKEN_REQUEST_TOKEN;if(!e)throw new Error("Unable to get ACTIONS_ID_TOKEN_REQUEST_TOKEN env variable");return e}static getIDTokenUrl(){const e=process.env.ACTIONS_ID_TOKEN_REQUEST_URL;if(!e)throw new Error("Unable to get ACTIONS_ID_TOKEN_REQUEST_URL env variable");return e}static getCall(e){var t;return s(this,void 0,void 0,(function*(){const r=a.createHttpClient(),s=yield r.getJson(e).catch((e=>{throw new Error(`Failed to get ID Token. \n \n        Error Code : ${e.statusCode}\n \n        Error Message: ${e.result.message}`)})),n=null===(t=s.result)||void 0===t?void 0:t.value;if(!n)throw new Error("Response json body do not have ID Token field");return n}))}static getIDToken(e){return s(this,void 0,void 0,(function*(){try{let t=a.getIDTokenUrl();e&&(t=`${t}&audience=${encodeURIComponent(e)}`),i.debug(`ID token url is ${t}`);const r=yield a.getCall(t);return i.setSecret(r),r}catch(e){throw new Error(`Error message: ${e.message}`)}}))}}t.OidcClient=a},6340:function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){void 0===s&&(s=r),Object.defineProperty(e,s,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.hasOwnProperty.call(e,r)&&s(t,e,r);return n(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.toPlatformPath=t.toWin32Path=t.toPosixPath=void 0;const i=o(r(1017));t.toPosixPath=function(e){return e.replace(/[\\]/g,"/")},t.toWin32Path=function(e){return e.replace(/[/]/g,"\\")},t.toPlatformPath=function(e){return e.replace(/[/\\]/g,i.sep)}},7410:function(e,t,r){"use strict";var s=this&&this.__awaiter||function(e,t,r,s){return new(r||(r=Promise))((function(n,o){function i(e){try{c(s.next(e))}catch(e){o(e)}}function a(e){try{c(s.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}c((s=s.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.summary=t.markdownSummary=t.SUMMARY_DOCS_URL=t.SUMMARY_ENV_VAR=void 0;const n=r(2037),o=r(7147),{access:i,appendFile:a,writeFile:c}=o.promises;t.SUMMARY_ENV_VAR="GITHUB_STEP_SUMMARY",t.SUMMARY_DOCS_URL="https://docs.github.com/actions/using-workflows/workflow-commands-for-github-actions#adding-a-job-summary";const u=new class{constructor(){this._buffer=""}filePath(){return s(this,void 0,void 0,(function*(){if(this._filePath)return this._filePath;const e=process.env[t.SUMMARY_ENV_VAR];if(!e)throw new Error(`Unable to find environment variable for $${t.SUMMARY_ENV_VAR}. Check if your runtime environment supports job summaries.`);try{yield i(e,o.constants.R_OK|o.constants.W_OK)}catch(t){throw new Error(`Unable to access summary file: '${e}'. Check if the file has correct read/write permissions.`)}return this._filePath=e,this._filePath}))}wrap(e,t,r={}){const s=Object.entries(r).map((([e,t])=>` ${e}="${t}"`)).join("");return t?`<${e}${s}>${t}</${e}>`:`<${e}${s}>`}write(e){return s(this,void 0,void 0,(function*(){const t=!!(null==e?void 0:e.overwrite),r=yield this.filePath(),s=t?c:a;return yield s(r,this._buffer,{encoding:"utf8"}),this.emptyBuffer()}))}clear(){return s(this,void 0,void 0,(function*(){return this.emptyBuffer().write({overwrite:!0})}))}stringify(){return this._buffer}isEmptyBuffer(){return 0===this._buffer.length}emptyBuffer(){return this._buffer="",this}addRaw(e,t=!1){return this._buffer+=e,t?this.addEOL():this}addEOL(){return this.addRaw(n.EOL)}addCodeBlock(e,t){const r=Object.assign({},t&&{lang:t}),s=this.wrap("pre",this.wrap("code",e),r);return this.addRaw(s).addEOL()}addList(e,t=!1){const r=t?"ol":"ul",s=e.map((e=>this.wrap("li",e))).join(""),n=this.wrap(r,s);return this.addRaw(n).addEOL()}addTable(e){const t=e.map((e=>{const t=e.map((e=>{if("string"==typeof e)return this.wrap("td",e);const{header:t,data:r,colspan:s,rowspan:n}=e,o=t?"th":"td",i=Object.assign(Object.assign({},s&&{colspan:s}),n&&{rowspan:n});return this.wrap(o,r,i)})).join("");return this.wrap("tr",t)})).join(""),r=this.wrap("table",t);return this.addRaw(r).addEOL()}addDetails(e,t){const r=this.wrap("details",this.wrap("summary",e)+t);return this.addRaw(r).addEOL()}addImage(e,t,r){const{width:s,height:n}=r||{},o=Object.assign(Object.assign({},s&&{width:s}),n&&{height:n}),i=this.wrap("img",null,Object.assign({src:e,alt:t},o));return this.addRaw(i).addEOL()}addHeading(e,t){const r=`h${t}`,s=["h1","h2","h3","h4","h5","h6"].includes(r)?r:"h1",n=this.wrap(s,e);return this.addRaw(n).addEOL()}addSeparator(){const e=this.wrap("hr",null);return this.addRaw(e).addEOL()}addBreak(){const e=this.wrap("br",null);return this.addRaw(e).addEOL()}addQuote(e,t){const r=Object.assign({},t&&{cite:t}),s=this.wrap("blockquote",e,r);return this.addRaw(s).addEOL()}addLink(e,t){const r=this.wrap("a",e,{href:t});return this.addRaw(r).addEOL()}};t.markdownSummary=u,t.summary=u},4570:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toCommandProperties=t.toCommandValue=void 0,t.toCommandValue=function(e){return null==e?"":"string"==typeof e||e instanceof String?e:JSON.stringify(e)},t.toCommandProperties=function(e){return Object.keys(e).length?{title:e.title,file:e.file,line:e.startLine,endLine:e.endLine,col:e.startColumn,endColumn:e.endColumn}:{}}},2429:function(e,t){"use strict";var r=this&&this.__awaiter||function(e,t,r,s){return new(r||(r=Promise))((function(n,o){function i(e){try{c(s.next(e))}catch(e){o(e)}}function a(e){try{c(s.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}c((s=s.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.PersonalAccessTokenCredentialHandler=t.BearerCredentialHandler=t.BasicCredentialHandler=void 0,t.BasicCredentialHandler=class{constructor(e,t){this.username=e,this.password=t}prepareRequest(e){if(!e.headers)throw Error("The request has no headers");e.headers.Authorization=`Basic ${Buffer.from(`${this.username}:${this.password}`).toString("base64")}`}canHandleAuthentication(){return!1}handleAuthentication(){return r(this,void 0,void 0,(function*(){throw new Error("not implemented")}))}},t.BearerCredentialHandler=class{constructor(e){this.token=e}prepareRequest(e){if(!e.headers)throw Error("The request has no headers");e.headers.Authorization=`Bearer ${this.token}`}canHandleAuthentication(){return!1}handleAuthentication(){return r(this,void 0,void 0,(function*(){throw new Error("not implemented")}))}},t.PersonalAccessTokenCredentialHandler=class{constructor(e){this.token=e}prepareRequest(e){if(!e.headers)throw Error("The request has no headers");e.headers.Authorization=`Basic ${Buffer.from(`PAT:${this.token}`).toString("base64")}`}canHandleAuthentication(){return!1}handleAuthentication(){return r(this,void 0,void 0,(function*(){throw new Error("not implemented")}))}}},4635:function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){void 0===s&&(s=r),Object.defineProperty(e,s,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.hasOwnProperty.call(e,r)&&s(t,e,r);return n(t,e),t},i=this&&this.__awaiter||function(e,t,r,s){return new(r||(r=Promise))((function(n,o){function i(e){try{c(s.next(e))}catch(e){o(e)}}function a(e){try{c(s.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}c((s=s.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.HttpClient=t.isHttps=t.HttpClientResponse=t.HttpClientError=t.getProxyUrl=t.MediaTypes=t.Headers=t.HttpCodes=void 0;const a=o(r(3685)),c=o(r(5687)),u=o(r(7960)),h=o(r(6149));var l,d,p;!function(e){e[e.OK=200]="OK",e[e.MultipleChoices=300]="MultipleChoices",e[e.MovedPermanently=301]="MovedPermanently",e[e.ResourceMoved=302]="ResourceMoved",e[e.SeeOther=303]="SeeOther",e[e.NotModified=304]="NotModified",e[e.UseProxy=305]="UseProxy",e[e.SwitchProxy=306]="SwitchProxy",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.PermanentRedirect=308]="PermanentRedirect",e[e.BadRequest=400]="BadRequest",e[e.Unauthorized=401]="Unauthorized",e[e.PaymentRequired=402]="PaymentRequired",e[e.Forbidden=403]="Forbidden",e[e.NotFound=404]="NotFound",e[e.MethodNotAllowed=405]="MethodNotAllowed",e[e.NotAcceptable=406]="NotAcceptable",e[e.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",e[e.RequestTimeout=408]="RequestTimeout",e[e.Conflict=409]="Conflict",e[e.Gone=410]="Gone",e[e.TooManyRequests=429]="TooManyRequests",e[e.InternalServerError=500]="InternalServerError",e[e.NotImplemented=501]="NotImplemented",e[e.BadGateway=502]="BadGateway",e[e.ServiceUnavailable=503]="ServiceUnavailable",e[e.GatewayTimeout=504]="GatewayTimeout"}(l=t.HttpCodes||(t.HttpCodes={})),function(e){e.Accept="accept",e.ContentType="content-type"}(d=t.Headers||(t.Headers={})),function(e){e.ApplicationJson="application/json"}(p=t.MediaTypes||(t.MediaTypes={})),t.getProxyUrl=function(e){const t=u.getProxyUrl(new URL(e));return t?t.href:""};const f=[l.MovedPermanently,l.ResourceMoved,l.SeeOther,l.TemporaryRedirect,l.PermanentRedirect],m=[l.BadGateway,l.ServiceUnavailable,l.GatewayTimeout],y=["OPTIONS","GET","DELETE","HEAD"];class g extends Error{constructor(e,t){super(e),this.name="HttpClientError",this.statusCode=t,Object.setPrototypeOf(this,g.prototype)}}t.HttpClientError=g;class _{constructor(e){this.message=e}readBody(){return i(this,void 0,void 0,(function*(){return new Promise((e=>i(this,void 0,void 0,(function*(){let t=Buffer.alloc(0);this.message.on("data",(e=>{t=Buffer.concat([t,e])})),this.message.on("end",(()=>{e(t.toString())}))}))))}))}}t.HttpClientResponse=_,t.isHttps=function(e){return"https:"===new URL(e).protocol},t.HttpClient=class{constructor(e,t,r){this._ignoreSslError=!1,this._allowRedirects=!0,this._allowRedirectDowngrade=!1,this._maxRedirects=50,this._allowRetries=!1,this._maxRetries=1,this._keepAlive=!1,this._disposed=!1,this.userAgent=e,this.handlers=t||[],this.requestOptions=r,r&&(null!=r.ignoreSslError&&(this._ignoreSslError=r.ignoreSslError),this._socketTimeout=r.socketTimeout,null!=r.allowRedirects&&(this._allowRedirects=r.allowRedirects),null!=r.allowRedirectDowngrade&&(this._allowRedirectDowngrade=r.allowRedirectDowngrade),null!=r.maxRedirects&&(this._maxRedirects=Math.max(r.maxRedirects,0)),null!=r.keepAlive&&(this._keepAlive=r.keepAlive),null!=r.allowRetries&&(this._allowRetries=r.allowRetries),null!=r.maxRetries&&(this._maxRetries=r.maxRetries))}options(e,t){return i(this,void 0,void 0,(function*(){return this.request("OPTIONS",e,null,t||{})}))}get(e,t){return i(this,void 0,void 0,(function*(){return this.request("GET",e,null,t||{})}))}del(e,t){return i(this,void 0,void 0,(function*(){return this.request("DELETE",e,null,t||{})}))}post(e,t,r){return i(this,void 0,void 0,(function*(){return this.request("POST",e,t,r||{})}))}patch(e,t,r){return i(this,void 0,void 0,(function*(){return this.request("PATCH",e,t,r||{})}))}put(e,t,r){return i(this,void 0,void 0,(function*(){return this.request("PUT",e,t,r||{})}))}head(e,t){return i(this,void 0,void 0,(function*(){return this.request("HEAD",e,null,t||{})}))}sendStream(e,t,r,s){return i(this,void 0,void 0,(function*(){return this.request(e,t,r,s)}))}getJson(e,t={}){return i(this,void 0,void 0,(function*(){t[d.Accept]=this._getExistingOrDefaultHeader(t,d.Accept,p.ApplicationJson);const r=yield this.get(e,t);return this._processResponse(r,this.requestOptions)}))}postJson(e,t,r={}){return i(this,void 0,void 0,(function*(){const s=JSON.stringify(t,null,2);r[d.Accept]=this._getExistingOrDefaultHeader(r,d.Accept,p.ApplicationJson),r[d.ContentType]=this._getExistingOrDefaultHeader(r,d.ContentType,p.ApplicationJson);const n=yield this.post(e,s,r);return this._processResponse(n,this.requestOptions)}))}putJson(e,t,r={}){return i(this,void 0,void 0,(function*(){const s=JSON.stringify(t,null,2);r[d.Accept]=this._getExistingOrDefaultHeader(r,d.Accept,p.ApplicationJson),r[d.ContentType]=this._getExistingOrDefaultHeader(r,d.ContentType,p.ApplicationJson);const n=yield this.put(e,s,r);return this._processResponse(n,this.requestOptions)}))}patchJson(e,t,r={}){return i(this,void 0,void 0,(function*(){const s=JSON.stringify(t,null,2);r[d.Accept]=this._getExistingOrDefaultHeader(r,d.Accept,p.ApplicationJson),r[d.ContentType]=this._getExistingOrDefaultHeader(r,d.ContentType,p.ApplicationJson);const n=yield this.patch(e,s,r);return this._processResponse(n,this.requestOptions)}))}request(e,t,r,s){return i(this,void 0,void 0,(function*(){if(this._disposed)throw new Error("Client has already been disposed.");const n=new URL(t);let o=this._prepareRequest(e,n,s);const i=this._allowRetries&&y.includes(e)?this._maxRetries+1:1;let a,c=0;do{if(a=yield this.requestRaw(o,r),a&&a.message&&a.message.statusCode===l.Unauthorized){let e;for(const t of this.handlers)if(t.canHandleAuthentication(a)){e=t;break}return e?e.handleAuthentication(this,o,r):a}let t=this._maxRedirects;for(;a.message.statusCode&&f.includes(a.message.statusCode)&&this._allowRedirects&&t>0;){const i=a.message.headers.location;if(!i)break;const c=new URL(i);if("https:"===n.protocol&&n.protocol!==c.protocol&&!this._allowRedirectDowngrade)throw new Error("Redirect from HTTPS to HTTP protocol. This downgrade is not allowed for security reasons. If you want to allow this behavior, set the allowRedirectDowngrade option to true.");if(yield a.readBody(),c.hostname!==n.hostname)for(const e in s)"authorization"===e.toLowerCase()&&delete s[e];o=this._prepareRequest(e,c,s),a=yield this.requestRaw(o,r),t--}if(!a.message.statusCode||!m.includes(a.message.statusCode))return a;c+=1,c<i&&(yield a.readBody(),yield this._performExponentialBackoff(c))}while(c<i);return a}))}dispose(){this._agent&&this._agent.destroy(),this._disposed=!0}requestRaw(e,t){return i(this,void 0,void 0,(function*(){return new Promise(((r,s)=>{this.requestRawWithCallback(e,t,(function(e,t){e?s(e):t?r(t):s(new Error("Unknown error"))}))}))}))}requestRawWithCallback(e,t,r){"string"==typeof t&&(e.options.headers||(e.options.headers={}),e.options.headers["Content-Length"]=Buffer.byteLength(t,"utf8"));let s=!1;function n(e,t){s||(s=!0,r(e,t))}const o=e.httpModule.request(e.options,(e=>{n(void 0,new _(e))}));let i;o.on("socket",(e=>{i=e})),o.setTimeout(this._socketTimeout||18e4,(()=>{i&&i.end(),n(new Error(`Request timeout: ${e.options.path}`))})),o.on("error",(function(e){n(e)})),t&&"string"==typeof t&&o.write(t,"utf8"),t&&"string"!=typeof t?(t.on("close",(function(){o.end()})),t.pipe(o)):o.end()}getAgent(e){const t=new URL(e);return this._getAgent(t)}_prepareRequest(e,t,r){const s={};s.parsedUrl=t;const n="https:"===s.parsedUrl.protocol;s.httpModule=n?c:a;const o=n?443:80;if(s.options={},s.options.host=s.parsedUrl.hostname,s.options.port=s.parsedUrl.port?parseInt(s.parsedUrl.port):o,s.options.path=(s.parsedUrl.pathname||"")+(s.parsedUrl.search||""),s.options.method=e,s.options.headers=this._mergeHeaders(r),null!=this.userAgent&&(s.options.headers["user-agent"]=this.userAgent),s.options.agent=this._getAgent(s.parsedUrl),this.handlers)for(const e of this.handlers)e.prepareRequest(s.options);return s}_mergeHeaders(e){return this.requestOptions&&this.requestOptions.headers?Object.assign({},b(this.requestOptions.headers),b(e||{})):b(e||{})}_getExistingOrDefaultHeader(e,t,r){let s;return this.requestOptions&&this.requestOptions.headers&&(s=b(this.requestOptions.headers)[t]),e[t]||s||r}_getAgent(e){let t;const r=u.getProxyUrl(e),s=r&&r.hostname;if(this._keepAlive&&s&&(t=this._proxyAgent),this._keepAlive&&!s&&(t=this._agent),t)return t;const n="https:"===e.protocol;let o=100;if(this.requestOptions&&(o=this.requestOptions.maxSockets||a.globalAgent.maxSockets),r&&r.hostname){const e={maxSockets:o,keepAlive:this._keepAlive,proxy:Object.assign(Object.assign({},(r.username||r.password)&&{proxyAuth:`${r.username}:${r.password}`}),{host:r.hostname,port:r.port})};let s;const i="https:"===r.protocol;s=n?i?h.httpsOverHttps:h.httpsOverHttp:i?h.httpOverHttps:h.httpOverHttp,t=s(e),this._proxyAgent=t}if(this._keepAlive&&!t){const e={keepAlive:this._keepAlive,maxSockets:o};t=n?new c.Agent(e):new a.Agent(e),this._agent=t}return t||(t=n?c.globalAgent:a.globalAgent),n&&this._ignoreSslError&&(t.options=Object.assign(t.options||{},{rejectUnauthorized:!1})),t}_performExponentialBackoff(e){return i(this,void 0,void 0,(function*(){e=Math.min(10,e);const t=5*Math.pow(2,e);return new Promise((e=>setTimeout((()=>e()),t)))}))}_processResponse(e,t){return i(this,void 0,void 0,(function*(){return new Promise(((r,s)=>i(this,void 0,void 0,(function*(){const n=e.message.statusCode||0,o={statusCode:n,result:null,headers:{}};let i,a;n===l.NotFound&&r(o);try{a=yield e.readBody(),a&&a.length>0&&(i=t&&t.deserializeDates?JSON.parse(a,(function(e,t){if("string"==typeof t){const e=new Date(t);if(!isNaN(e.valueOf()))return e}return t})):JSON.parse(a),o.result=i),o.headers=e.message.headers}catch(e){}if(n>299){let e;e=i&&i.message?i.message:a&&a.length>0?a:`Failed request: (${n})`;const t=new g(e,n);t.result=o.result,s(t)}else r(o)}))))}))}};const b=e=>Object.keys(e).reduce(((t,r)=>(t[r.toLowerCase()]=e[r],t)),{})},7960:(e,t)=>{"use strict";function r(e){if(!e.hostname)return!1;const t=process.env.no_proxy||process.env.NO_PROXY||"";if(!t)return!1;let r;e.port?r=Number(e.port):"http:"===e.protocol?r=80:"https:"===e.protocol&&(r=443);const s=[e.hostname.toUpperCase()];"number"==typeof r&&s.push(`${s[0]}:${r}`);for(const e of t.split(",").map((e=>e.trim().toUpperCase())).filter((e=>e)))if(s.some((t=>t===e)))return!0;return!1}Object.defineProperty(t,"__esModule",{value:!0}),t.checkBypass=t.getProxyUrl=void 0,t.getProxyUrl=function(e){const t="https:"===e.protocol;if(r(e))return;const s=t?process.env.https_proxy||process.env.HTTPS_PROXY:process.env.http_proxy||process.env.HTTP_PROXY;return s?new URL(s):void 0},t.checkBypass=r},346:(e,t,r)=>{"use strict";const{Transform:s,PassThrough:n}=r(2781),o=r(9796),i=r(1511);e.exports=e=>{const t=(e.headers["content-encoding"]||"").toLowerCase();if(!["gzip","deflate","br"].includes(t))return e;const r="br"===t;if(r&&"function"!=typeof o.createBrotliDecompress)return e.destroy(new Error("Brotli is not supported on Node.js < 12")),e;let a=!0;const c=new s({transform(e,t,r){a=!1,r(null,e)},flush(e){e()}}),u=new n({autoDestroy:!1,destroy(t,r){e.destroy(),r(t)}}),h=r?o.createBrotliDecompress():o.createUnzip();return h.once("error",(t=>{!a||e.readable?u.destroy(t):u.end()})),i(e,u),e.pipe(c).pipe(h).pipe(u),u}},1511:e=>{"use strict";const t=["aborted","complete","headers","httpVersion","httpVersionMinor","httpVersionMajor","method","rawHeaders","rawTrailers","setTimeout","socket","statusCode","statusMessage","trailers","url"];e.exports=(e,r)=>{if(r._readableState.autoDestroy)throw new Error("The second stream must have the `autoDestroy` option set to `false`");const s=new Set(Object.keys(e).concat(t)),n={};for(const t of s)t in r||(n[t]={get(){const r=e[t];return"function"==typeof r?r.bind(e):r},set(r){e[t]=r},enumerable:!0,configurable:!1});return Object.defineProperties(r,n),e.once("aborted",(()=>{r.destroy(),r.emit("aborted")})),e.once("close",(()=>{e.complete&&r.readable?r.once("end",(()=>{r.emit("close")})):r.emit("close")})),r}},1313:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=(e,t)=>{let r;r="function"==typeof t?{connect:t}:t;const s="function"==typeof r.connect,n="function"==typeof r.secureConnect,o="function"==typeof r.close,i=()=>{s&&r.connect(),function(e){return e.encrypted}(e)&&n&&(e.authorized?r.secureConnect():e.authorizationError||e.once("secureConnect",r.secureConnect)),o&&e.once("close",r.close)};e.writable&&!e.connecting?i():e.connecting?e.once("connect",i):e.destroyed&&o&&r.close(e._hadError)};t.default=r,e.exports=r,e.exports.default=r},6729:e=>{"use strict";var t=Object.prototype.hasOwnProperty,r="~";function s(){}function n(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function o(e,t,s,o,i){if("function"!=typeof s)throw new TypeError("The listener must be a function");var a=new n(s,o||e,i),c=r?r+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],a]:e._events[c].push(a):(e._events[c]=a,e._eventsCount++),e}function i(e,t){0==--e._eventsCount?e._events=new s:delete e._events[t]}function a(){this._events=new s,this._eventsCount=0}Object.create&&(s.prototype=Object.create(null),(new s).__proto__||(r=!1)),a.prototype.eventNames=function(){var e,s,n=[];if(0===this._eventsCount)return n;for(s in e=this._events)t.call(e,s)&&n.push(r?s.slice(1):s);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},a.prototype.listeners=function(e){var t=r?r+e:e,s=this._events[t];if(!s)return[];if(s.fn)return[s.fn];for(var n=0,o=s.length,i=new Array(o);n<o;n++)i[n]=s[n].fn;return i},a.prototype.listenerCount=function(e){var t=r?r+e:e,s=this._events[t];return s?s.fn?1:s.length:0},a.prototype.emit=function(e,t,s,n,o,i){var a=r?r+e:e;if(!this._events[a])return!1;var c,u,h=this._events[a],l=arguments.length;if(h.fn){switch(h.once&&this.removeListener(e,h.fn,void 0,!0),l){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,t),!0;case 3:return h.fn.call(h.context,t,s),!0;case 4:return h.fn.call(h.context,t,s,n),!0;case 5:return h.fn.call(h.context,t,s,n,o),!0;case 6:return h.fn.call(h.context,t,s,n,o,i),!0}for(u=1,c=new Array(l-1);u<l;u++)c[u-1]=arguments[u];h.fn.apply(h.context,c)}else{var d,p=h.length;for(u=0;u<p;u++)switch(h[u].once&&this.removeListener(e,h[u].fn,void 0,!0),l){case 1:h[u].fn.call(h[u].context);break;case 2:h[u].fn.call(h[u].context,t);break;case 3:h[u].fn.call(h[u].context,t,s);break;case 4:h[u].fn.call(h[u].context,t,s,n);break;default:if(!c)for(d=1,c=new Array(l-1);d<l;d++)c[d-1]=arguments[d];h[u].fn.apply(h[u].context,c)}}return!0},a.prototype.on=function(e,t,r){return o(this,e,t,r,!1)},a.prototype.once=function(e,t,r){return o(this,e,t,r,!0)},a.prototype.removeListener=function(e,t,s,n){var o=r?r+e:e;if(!this._events[o])return this;if(!t)return i(this,o),this;var a=this._events[o];if(a.fn)a.fn!==t||n&&!a.once||s&&a.context!==s||i(this,o);else{for(var c=0,u=[],h=a.length;c<h;c++)(a[c].fn!==t||n&&!a[c].once||s&&a[c].context!==s)&&u.push(a[c]);u.length?this._events[o]=1===u.length?u[0]:u:i(this,o)}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&i(this,t)):(this._events=new s,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,e.exports=a},5105:(e,t,r)=>{"use strict";const{PassThrough:s}=r(2781);e.exports=e=>{e={...e};const{array:t}=e;let{encoding:r}=e;const n="buffer"===r;let o=!1;t?o=!(r||n):r=r||"utf8",n&&(r=null);const i=new s({objectMode:o});r&&i.setEncoding(r);let a=0;const c=[];return i.on("data",(e=>{c.push(e),o?a=c.length:a+=e.length})),i.getBufferedValue=()=>t?c:n?Buffer.concat(c,a):c.join(""),i.getBufferedLength=()=>a,i}},31:(e,t,r)=>{"use strict";const{constants:s}=r(4300),n=r(2781),{promisify:o}=r(3837),i=r(5105),a=o(n.pipeline);class c extends Error{constructor(){super("maxBuffer exceeded"),this.name="MaxBufferError"}}async function u(e,t){if(!e)throw new Error("Expected a stream");t={maxBuffer:1/0,...t};const{maxBuffer:r}=t,n=i(t);return await new Promise(((t,o)=>{const i=e=>{e&&n.getBufferedLength()<=s.MAX_LENGTH&&(e.bufferedData=n.getBufferedValue()),o(e)};(async()=>{try{await a(e,n),t()}catch(e){i(e)}})(),n.on("data",(()=>{n.getBufferedLength()>r&&i(new c)}))})),n.getBufferedValue()}e.exports=u,e.exports.buffer=(e,t)=>u(e,{...t,encoding:"buffer"}),e.exports.array=(e,t)=>u(e,{...t,array:!0}),e.exports.MaxBufferError=c},6214:e=>{"use strict";const t=new Set([200,203,204,206,300,301,308,404,405,410,414,501]),r=new Set([200,203,204,300,301,302,303,307,308,404,405,410,414,501]),s=new Set([500,502,503,504]),n={date:!0,connection:!0,"keep-alive":!0,"proxy-authenticate":!0,"proxy-authorization":!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0},o={"content-length":!0,"content-encoding":!0,"transfer-encoding":!0,"content-range":!0};function i(e){const t=parseInt(e,10);return isFinite(t)?t:0}function a(e){const t={};if(!e)return t;const r=e.trim().split(/,/);for(const e of r){const[r,s]=e.split(/=/,2);t[r.trim()]=void 0===s||s.trim().replace(/^"|"$/g,"")}return t}function c(e){let t=[];for(const r in e){const s=e[r];t.push(!0===s?r:r+"="+s)}if(t.length)return t.join(", ")}e.exports=class{constructor(e,t,{shared:r,cacheHeuristic:s,immutableMinTimeToLive:n,ignoreCargoCult:o,_fromObject:i}={}){if(i)this._fromObject(i);else{if(!t||!t.headers)throw Error("Response headers missing");this._assertRequestHasHeaders(e),this._responseTime=this.now(),this._isShared=!1!==r,this._cacheHeuristic=void 0!==s?s:.1,this._immutableMinTtl=void 0!==n?n:864e5,this._status="status"in t?t.status:200,this._resHeaders=t.headers,this._rescc=a(t.headers["cache-control"]),this._method="method"in e?e.method:"GET",this._url=e.url,this._host=e.headers.host,this._noAuthorization=!e.headers.authorization,this._reqHeaders=t.headers.vary?e.headers:null,this._reqcc=a(e.headers["cache-control"]),o&&"pre-check"in this._rescc&&"post-check"in this._rescc&&(delete this._rescc["pre-check"],delete this._rescc["post-check"],delete this._rescc["no-cache"],delete this._rescc["no-store"],delete this._rescc["must-revalidate"],this._resHeaders=Object.assign({},this._resHeaders,{"cache-control":c(this._rescc)}),delete this._resHeaders.expires,delete this._resHeaders.pragma),null==t.headers["cache-control"]&&/no-cache/.test(t.headers.pragma)&&(this._rescc["no-cache"]=!0)}}now(){return Date.now()}storable(){return!(this._reqcc["no-store"]||!("GET"===this._method||"HEAD"===this._method||"POST"===this._method&&this._hasExplicitExpiration())||!r.has(this._status)||this._rescc["no-store"]||this._isShared&&this._rescc.private||this._isShared&&!this._noAuthorization&&!this._allowsStoringAuthenticated()||!(this._resHeaders.expires||this._rescc["max-age"]||this._isShared&&this._rescc["s-maxage"]||this._rescc.public||t.has(this._status)))}_hasExplicitExpiration(){return this._isShared&&this._rescc["s-maxage"]||this._rescc["max-age"]||this._resHeaders.expires}_assertRequestHasHeaders(e){if(!e||!e.headers)throw Error("Request headers missing")}satisfiesWithoutRevalidation(e){this._assertRequestHasHeaders(e);const t=a(e.headers["cache-control"]);return!t["no-cache"]&&!/no-cache/.test(e.headers.pragma)&&(!(t["max-age"]&&this.age()>t["max-age"])&&(!(t["min-fresh"]&&this.timeToLive()<1e3*t["min-fresh"])&&(!(this.stale()&&(!t["max-stale"]||this._rescc["must-revalidate"]||!(!0===t["max-stale"]||t["max-stale"]>this.age()-this.maxAge())))&&this._requestMatches(e,!1))))}_requestMatches(e,t){return(!this._url||this._url===e.url)&&this._host===e.headers.host&&(!e.method||this._method===e.method||t&&"HEAD"===e.method)&&this._varyMatches(e)}_allowsStoringAuthenticated(){return this._rescc["must-revalidate"]||this._rescc.public||this._rescc["s-maxage"]}_varyMatches(e){if(!this._resHeaders.vary)return!0;if("*"===this._resHeaders.vary)return!1;const t=this._resHeaders.vary.trim().toLowerCase().split(/\s*,\s*/);for(const r of t)if(e.headers[r]!==this._reqHeaders[r])return!1;return!0}_copyWithoutHopByHopHeaders(e){const t={};for(const r in e)n[r]||(t[r]=e[r]);if(e.connection){const r=e.connection.trim().split(/\s*,\s*/);for(const e of r)delete t[e]}if(t.warning){const e=t.warning.split(/,/).filter((e=>!/^\s*1[0-9][0-9]/.test(e)));e.length?t.warning=e.join(",").trim():delete t.warning}return t}responseHeaders(){const e=this._copyWithoutHopByHopHeaders(this._resHeaders),t=this.age();return t>86400&&!this._hasExplicitExpiration()&&this.maxAge()>86400&&(e.warning=(e.warning?`${e.warning}, `:"")+'113 - "rfc7234 5.5.4"'),e.age=`${Math.round(t)}`,e.date=new Date(this.now()).toUTCString(),e}date(){const e=Date.parse(this._resHeaders.date);return isFinite(e)?e:this._responseTime}age(){return this._ageValue()+(this.now()-this._responseTime)/1e3}_ageValue(){return i(this._resHeaders.age)}maxAge(){if(!this.storable()||this._rescc["no-cache"])return 0;if(this._isShared&&this._resHeaders["set-cookie"]&&!this._rescc.public&&!this._rescc.immutable)return 0;if("*"===this._resHeaders.vary)return 0;if(this._isShared){if(this._rescc["proxy-revalidate"])return 0;if(this._rescc["s-maxage"])return i(this._rescc["s-maxage"])}if(this._rescc["max-age"])return i(this._rescc["max-age"]);const e=this._rescc.immutable?this._immutableMinTtl:0,t=this.date();if(this._resHeaders.expires){const r=Date.parse(this._resHeaders.expires);return Number.isNaN(r)||r<t?0:Math.max(e,(r-t)/1e3)}if(this._resHeaders["last-modified"]){const r=Date.parse(this._resHeaders["last-modified"]);if(isFinite(r)&&t>r)return Math.max(e,(t-r)/1e3*this._cacheHeuristic)}return e}timeToLive(){const e=this.maxAge()-this.age(),t=e+i(this._rescc["stale-if-error"]),r=e+i(this._rescc["stale-while-revalidate"]);return 1e3*Math.max(0,e,t,r)}stale(){return this.maxAge()<=this.age()}_useStaleIfError(){return this.maxAge()+i(this._rescc["stale-if-error"])>this.age()}useStaleWhileRevalidate(){return this.maxAge()+i(this._rescc["stale-while-revalidate"])>this.age()}static fromObject(e){return new this(void 0,void 0,{_fromObject:e})}_fromObject(e){if(this._responseTime)throw Error("Reinitialized");if(!e||1!==e.v)throw Error("Invalid serialization");this._responseTime=e.t,this._isShared=e.sh,this._cacheHeuristic=e.ch,this._immutableMinTtl=void 0!==e.imm?e.imm:864e5,this._status=e.st,this._resHeaders=e.resh,this._rescc=e.rescc,this._method=e.m,this._url=e.u,this._host=e.h,this._noAuthorization=e.a,this._reqHeaders=e.reqh,this._reqcc=e.reqcc}toObject(){return{v:1,t:this._responseTime,sh:this._isShared,ch:this._cacheHeuristic,imm:this._immutableMinTtl,st:this._status,resh:this._resHeaders,rescc:this._rescc,m:this._method,u:this._url,h:this._host,a:this._noAuthorization,reqh:this._reqHeaders,reqcc:this._reqcc}}revalidationHeaders(e){this._assertRequestHasHeaders(e);const t=this._copyWithoutHopByHopHeaders(e.headers);if(delete t["if-range"],!this._requestMatches(e,!0)||!this.storable())return delete t["if-none-match"],delete t["if-modified-since"],t;if(this._resHeaders.etag&&(t["if-none-match"]=t["if-none-match"]?`${t["if-none-match"]}, ${this._resHeaders.etag}`:this._resHeaders.etag),t["accept-ranges"]||t["if-match"]||t["if-unmodified-since"]||this._method&&"GET"!=this._method){if(delete t["if-modified-since"],t["if-none-match"]){const e=t["if-none-match"].split(/,/).filter((e=>!/^\s*W\//.test(e)));e.length?t["if-none-match"]=e.join(",").trim():delete t["if-none-match"]}}else this._resHeaders["last-modified"]&&!t["if-modified-since"]&&(t["if-modified-since"]=this._resHeaders["last-modified"]);return t}revalidatedPolicy(e,t){if(this._assertRequestHasHeaders(e),this._useStaleIfError()&&function(e){return!e||s.has(e.status)}(t))return{modified:!1,matches:!1,policy:this};if(!t||!t.headers)throw Error("Response headers missing");let r=!1;if(void 0!==t.status&&304!=t.status?r=!1:t.headers.etag&&!/^\s*W\//.test(t.headers.etag)?r=this._resHeaders.etag&&this._resHeaders.etag.replace(/^\s*W\//,"")===t.headers.etag:this._resHeaders.etag&&t.headers.etag?r=this._resHeaders.etag.replace(/^\s*W\//,"")===t.headers.etag.replace(/^\s*W\//,""):this._resHeaders["last-modified"]?r=this._resHeaders["last-modified"]===t.headers["last-modified"]:this._resHeaders.etag||this._resHeaders["last-modified"]||t.headers.etag||t.headers["last-modified"]||(r=!0),!r)return{policy:new this.constructor(e,t),modified:304!=t.status,matches:!1};const n={};for(const e in this._resHeaders)n[e]=e in t.headers&&!o[e]?t.headers[e]:this._resHeaders[e];const i=Object.assign({},t,{status:this._status,method:this._method,headers:n});return{policy:new this.constructor(e,i,{shared:this._isShared,cacheHeuristic:this._cacheHeuristic,immutableMinTimeToLive:this._immutableMinTtl}),modified:!1,matches:!0}}}},4685:(e,t,r)=>{"use strict";const{URL:s}=r(7310),n=r(2361),o=r(4404),i=r(5158),a=r(1269),c=r(8120),u=Symbol("currentStreamCount"),h=Symbol("request"),l=Symbol("cachedOriginSet"),d=Symbol("gracefullyClosing"),p=Symbol("length"),f=["createConnection","maxDeflateDynamicTableSize","maxSettings","maxSessionMemory","maxHeaderListPairs","maxOutstandingPings","maxReservedRemoteStreams","maxSendHeaderBlockLength","paddingStrategy","peerMaxConcurrentStreams","settings","family","localAddress","rejectUnauthorized","pskCallback","minDHSize","path","socket","ca","cert","sigalgs","ciphers","clientCertEngine","crl","dhparam","ecdhCurve","honorCipherOrder","key","privateKeyEngine","privateKeyIdentifier","maxVersion","minVersion","pfx","secureOptions","secureProtocol","sessionIdContext","ticketKeys"],m=(e,t)=>e.remoteSettings.maxConcurrentStreams>t.remoteSettings.maxConcurrentStreams,y=(e,t)=>{for(let r=0;r<e.length;r++){const s=e[r];s[l].length>0&&s[l].length<t[l].length&&s[l].every((e=>t[l].includes(e)))&&s[u]+t[u]<=t.remoteSettings.maxConcurrentStreams&&_(s)}},g=(e,t)=>{for(let r=0;r<e.length;r++){const s=e[r];if(t[l].length>0&&t[l].length<s[l].length&&t[l].every((e=>s[l].includes(e)))&&t[u]+s[u]<=s.remoteSettings.maxConcurrentStreams)return _(t),!0}return!1},_=e=>{e[d]=!0,0===e[u]&&e.close()};class b extends n{constructor({timeout:e=0,maxSessions:t=Number.POSITIVE_INFINITY,maxEmptySessions:r=10,maxCachedTlsSessions:s=100}={}){super(),this.sessions={},this.queue={},this.timeout=e,this.maxSessions=t,this.maxEmptySessions=r,this._emptySessionCount=0,this._sessionCount=0,this.settings={enablePush:!1,initialWindowSize:33554432},this.tlsSessionCache=new a({maxSize:s})}get protocol(){return"https:"}normalizeOptions(e){let t="";for(let r=0;r<f.length;r++){const s=f[r];t+=":",e&&void 0!==e[s]&&(t+=e[s])}return t}_processQueue(){if(this._sessionCount>=this.maxSessions)this.closeEmptySessions(this.maxSessions-this._sessionCount+1);else for(const e in this.queue)for(const t in this.queue[e]){const r=this.queue[e][t];r.completed||(r.completed=!0,r())}}_isBetterSession(e,t){return e>t}_accept(e,t,r,s){let n=0;for(;n<t.length&&e[u]<e.remoteSettings.maxConcurrentStreams;)t[n].resolve(e),n++;t.splice(0,n),t.length>0&&(this.getSession(r,s,t),t.length=0)}getSession(e,t,r){return new Promise(((n,o)=>{Array.isArray(r)&&r.length>0?(r=[...r],n()):r=[{resolve:n,reject:o}];try{if("string"==typeof e)e=new s(e);else if(!(e instanceof s))throw new TypeError("The `origin` argument needs to be a string or an URL object");if(t){const{servername:r}=t,{hostname:s}=e;if(r&&s!==r)throw new Error(`Origin ${s} differs from servername ${r}`)}}catch(e){for(let t=0;t<r.length;t++)r[t].reject(e);return}const a=this.normalizeOptions(t),c=e.origin;if(a in this.sessions){const e=this.sessions[a];let s,n=-1,o=-1;for(let t=0;t<e.length;t++){const r=e[t],i=r.remoteSettings.maxConcurrentStreams;if(i<n)break;if(!r[l].includes(c))continue;const a=r[u];a>=i||r[d]||r.destroyed||(s||(n=i),this._isBetterSession(a,o)&&(s=r,o=a))}if(s)return void this._accept(s,r,c,t)}if(a in this.queue){if(c in this.queue[a])return void this.queue[a][c].listeners.push(...r)}else this.queue[a]={[p]:0};const f=()=>{a in this.queue&&this.queue[a][c]===_&&(delete this.queue[a][c],0==--this.queue[a][p]&&delete this.queue[a])},_=async()=>{this._sessionCount++;const s=`${c}:${a}`;let n,o=!1;try{const b={...t};void 0===b.settings&&(b.settings=this.settings),void 0===b.session&&(b.session=this.tlsSessionCache.get(s));const v=b.createConnection||this.createConnection;n=await v.call(this,e,b),b.createConnection=()=>n;const w=i.connect(e,b);w[u]=0,w[d]=!1;const E=()=>{const{socket:e}=w;let t;return!1===e.servername?(e.servername=e.remoteAddress,t=w.originSet,e.servername=!1):t=w.originSet,t},S=()=>w[u]<w.remoteSettings.maxConcurrentStreams;w.socket.once("session",(e=>{this.tlsSessionCache.set(s,e)})),w.once("error",(e=>{for(let t=0;t<r.length;t++)r[t].reject(e);this.tlsSessionCache.delete(s)})),w.setTimeout(this.timeout,(()=>{w.destroy()})),w.once("close",(()=>{if(this._sessionCount--,o){this._emptySessionCount--;const e=this.sessions[a];1===e.length?delete this.sessions[a]:e.splice(e.indexOf(w),1)}else{f();const e=new Error("Session closed without receiving a SETTINGS frame");e.code="HTTP2WRAPPER_NOSETTINGS";for(let t=0;t<r.length;t++)r[t].reject(e)}this._processQueue()}));const R=()=>{const e=this.queue[a];if(!e)return;const t=w[l];for(let r=0;r<t.length;r++){const s=t[r];if(s in e){const{listeners:t,completed:r}=e[s];let n=0;for(;n<t.length&&S();)t[n].resolve(w),n++;if(e[s].listeners.splice(0,n),0===e[s].listeners.length&&!r&&(delete e[s],0==--e[p])){delete this.queue[a];break}if(!S())break}}};w.on("origin",(()=>{w[l]=E()||[],w[d]=!1,g(this.sessions[a],w),!w[d]&&S()&&(R(),S()&&y(this.sessions[a],w))})),w.once("remoteSettings",(()=>{if(_.destroyed){const e=new Error("Agent has been destroyed");for(let t=0;t<r.length;t++)r[t].reject(e);w.destroy()}else{if(w.setLocalWindowSize&&w.setLocalWindowSize(4194304),w[l]=E()||[],w.socket.encrypted){const e=w[l][0];if(e!==c){const t=new Error(`Requested origin ${c} does not match server ${e}`);for(let e=0;e<r.length;e++)r[e].reject(t);return void w.destroy()}}f();{const e=this.sessions;if(a in e){const t=e[a];t.splice(((e,t,r)=>{let s=0,n=e.length;for(;s<n;){const o=s+n>>>1;r(e[o],t)?s=o+1:n=o}return s})(t,w,m),0,w)}else e[a]=[w]}o=!0,this._emptySessionCount++,this.emit("session",w),this._accept(w,r,c,t),0===w[u]&&this._emptySessionCount>this.maxEmptySessions&&this.closeEmptySessions(this._emptySessionCount-this.maxEmptySessions),w.on("remoteSettings",(()=>{S()&&(R(),S()&&y(this.sessions[a],w))}))}})),w[h]=w.request,w.request=(e,t)=>{if(w[d])throw new Error("The session is gracefully closing. No new streams are allowed.");const r=w[h](e,t);return w.ref(),0==w[u]++&&this._emptySessionCount--,r.once("close",(()=>{0==--w[u]&&(this._emptySessionCount++,w.unref(),this._emptySessionCount>this.maxEmptySessions||w[d])?w.close():w.destroyed||w.closed||S()&&!g(this.sessions[a],w)&&(y(this.sessions[a],w),R(),0===w[u]&&this._processQueue())})),r}}catch(e){f(),this._sessionCount--;for(let t=0;t<r.length;t++)r[t].reject(e)}};_.listeners=r,_.completed=!1,_.destroyed=!1,this.queue[a][c]=_,this.queue[a][p]++,this._processQueue()}))}request(e,t,r,s){return new Promise(((n,o)=>{this.getSession(e,t,[{reject:o,resolve:e=>{try{const t=e.request(r,s);c(t),n(t)}catch(e){o(e)}}}])}))}async createConnection(e,t){return b.connect(e,t)}static connect(e,t){t.ALPNProtocols=["h2"];const r=e.port||443,s=e.hostname;void 0===t.servername&&(t.servername=s);const n=o.connect(r,s,t);return t.socket&&(n._peername={family:void 0,address:void 0,port:r}),n}closeEmptySessions(e=Number.POSITIVE_INFINITY){let t=0;const{sessions:r}=this;for(const s in r){const n=r[s];for(let r=0;r<n.length;r++){const s=n[r];if(0===s[u]&&(t++,s.close(),t>=e))return t}}return t}destroy(e){const{sessions:t,queue:r}=this;for(const r in t){const s=t[r];for(let t=0;t<s.length;t++)s[t].destroy(e)}for(const e in r){const t=r[e];for(const e in t)t[e].destroyed=!0}this.queue={},this.tlsSessionCache.clear()}get emptySessionCount(){return this._emptySessionCount}get pendingSessionCount(){return this._sessionCount-this._emptySessionCount}get sessionCount(){return this._sessionCount}}b.kCurrentStreamCount=u,b.kGracefullyClosing=d,e.exports={Agent:b,globalAgent:new b}},6673:(e,t,r)=>{"use strict";const{URL:s,urlToHttpOptions:n}=r(7310),o=r(3685),i=r(5687),a=r(5322),c=r(1269),{Agent:u,globalAgent:h}=r(4685),l=r(2287),d=r(4017),p=r(8120),f=new c({maxSize:100}),m=(e,t=new Map,r)=>async s=>{const n=`${s.host}:${s.port}:${s.ALPNProtocols.sort()}`;if(!e.has(n)){if(t.has(n))return{alpnProtocol:(await t.get(n)).alpnProtocol};const{path:o}=s;s.path=s.socketPath;const i=a(s,r);t.set(n,i);try{const r=await i;return e.set(n,r.alpnProtocol),t.delete(n),s.path=o,r}catch(e){throw t.delete(n),s.path=o,e}}return{alpnProtocol:e.get(n)}},y=m(f,new Map);e.exports=async(e,t,r)=>{if(e="string"==typeof e?n(new s(e)):e instanceof s?n(e):{...e},"function"==typeof t||void 0===t?(r=t,t=e):t=Object.assign(e,t),t.ALPNProtocols=t.ALPNProtocols||["h2","http/1.1"],!Array.isArray(t.ALPNProtocols)||0===t.ALPNProtocols.length)throw new Error("The `ALPNProtocols` option must be an Array with at least one entry");t.protocol=t.protocol||"https:";const a="https:"===t.protocol;t.host=t.hostname||t.host||"localhost",t.session=t.tlsSession,t.servername=t.servername||d(t.headers&&t.headers.host||t.host),t.port=t.port||(a?443:80),t._defaultAgent=a?i.globalAgent:o.globalAgent;const c=t.resolveProtocol||y;let{agent:f}=t;if(void 0!==f&&!1!==f&&"Object"!==f.constructor.name)throw new Error("The `options.agent` can be only an object `http`, `https` or `http2` properties");if(a){t.resolveSocket=!0;let{socket:e,alpnProtocol:s,timeout:n}=await c(t);if(n){e&&e.destroy();const r=new Error(`Timed out resolving ALPN: ${t.timeout} ms`);throw r.code="ETIMEDOUT",r.ms=t.timeout,r}e&&t.createConnection&&(e.destroy(),e=void 0),delete t.resolveSocket;const o="h2"===s;if(f&&(f=o?f.http2:f.https,t.agent=f),void 0===f&&(f=o?h:i.globalAgent),e)if(!1===f)e.destroy();else{const r=(o?u:i.Agent).prototype.createConnection;f.createConnection===r?o?t._reuseSocket=e:((e,t,r)=>{t._httpMessage={shouldKeepAlive:!0};const s=()=>{e.emit("free",t,r)};t.on("free",s);const n=()=>{e.removeSocket(t,r)};t.on("close",n);const o=()=>{const{freeSockets:r}=e;for(const e of Object.values(r))if(e.includes(t))return void t.destroy()};t.on("timeout",o);const i=()=>{e.removeSocket(t,r),t.off("close",n),t.off("free",s),t.off("timeout",o),t.off("agentRemove",i)};t.on("agentRemove",i),e.emit("free",t,r)})(f,e,t):e.destroy()}if(o)return p(new l(t,r))}else f&&(t.agent=f.http);return p(o.request(t,r))},e.exports.protocolCache=f,e.exports.resolveProtocol=y,e.exports.createResolveProtocol=m},2287:(e,t,r)=>{"use strict";const{URL:s,urlToHttpOptions:n}=r(7310),o=r(5158),{Writable:i}=r(2781),{Agent:a,globalAgent:c}=r(4685),u=r(7138),h=r(7306),{ERR_INVALID_ARG_TYPE:l,ERR_INVALID_PROTOCOL:d,ERR_HTTP_HEADERS_SENT:p}=r(3190),f=r(7460),m=r(9154),y=r(7709),{HTTP2_HEADER_STATUS:g,HTTP2_HEADER_METHOD:_,HTTP2_HEADER_PATH:b,HTTP2_HEADER_AUTHORITY:v,HTTP2_METHOD_CONNECT:w}=o.constants,E=Symbol("headers"),S=Symbol("origin"),R=Symbol("session"),O=Symbol("options"),A=Symbol("flushedHeaders"),C=Symbol("jobs"),x=Symbol("pendingAgentPromise");e.exports=class extends i{constructor(e,t,r){if(super({autoDestroy:!1,emitClose:!1}),e="string"==typeof e?n(new s(e)):e instanceof s?n(e):{...e},"function"==typeof t||void 0===t?(r=t,t=e):t=Object.assign(e,t),t.h2session){if(this[R]=t.h2session,this[R].destroyed)throw new Error("The session has been closed already");this.protocol=this[R].socket.encrypted?"https:":"http:"}else if(!1===t.agent)this.agent=new a({maxEmptySessions:0});else if(void 0===t.agent||null===t.agent)this.agent=c;else{if("function"!=typeof t.agent.request)throw new l("options.agent",["http2wrapper.Agent-like Object","undefined","false"],t.agent);this.agent=t.agent}if(this.agent&&(this.protocol=this.agent.protocol),t.protocol&&t.protocol!==this.protocol)throw new d(t.protocol,this.protocol);t.port||(t.port=t.defaultPort||this.agent&&this.agent.defaultPort||443),t.host=t.hostname||t.host||"localhost",delete t.hostname;const{timeout:o}=t;t.timeout=void 0,this[E]=Object.create(null),this[C]=[],this[x]=void 0,this.socket=null,this.connection=null,this.method=t.method||"GET",("CONNECT"!==this.method||"/"!==t.path&&void 0!==t.path)&&(this.path=t.path),this.res=null,this.aborted=!1,this.reusedSocket=!1;const{headers:i}=t;if(i)for(const e in i)this.setHeader(e,i[e]);t.auth&&!("authorization"in this[E])&&(this[E].authorization="Basic "+Buffer.from(t.auth).toString("base64")),t.session=t.tlsSession,t.path=t.socketPath,this[O]=t,this[S]=new s(`${this.protocol}//${t.servername||t.host}:${t.port}`);const u=t._reuseSocket;u&&(t.createConnection=(...e)=>u.destroyed?this.agent.createConnection(...e):u,this.agent.getSession(this[S],this[O]).catch((()=>{}))),o&&this.setTimeout(o),r&&this.once("response",r),this[A]=!1}get method(){return this[E][_]}set method(e){e&&(this[E][_]=e.toUpperCase())}get path(){const e="CONNECT"===this.method?v:b;return this[E][e]}set path(e){if(e){const t="CONNECT"===this.method?v:b;this[E][t]=e}}get host(){return this[S].hostname}set host(e){}get _mustNotHaveABody(){return"GET"===this.method||"HEAD"===this.method||"DELETE"===this.method}_write(e,t,r){if(this._mustNotHaveABody)return void r(new Error("The GET, HEAD and DELETE methods must NOT have a body"));this.flushHeaders();const s=()=>this._request.write(e,t,r);this._request?s():this[C].push(s)}_final(e){this.flushHeaders();const t=()=>{this._mustNotHaveABody||"CONNECT"===this.method?e():this._request.end(e)};this._request?t():this[C].push(t)}abort(){this.res&&this.res.complete||(this.aborted||process.nextTick((()=>this.emit("abort"))),this.aborted=!0,this.destroy())}async _destroy(e,t){this.res&&this.res._dump(),this._request?this._request.destroy():process.nextTick((()=>{this.emit("close")}));try{await this[x]}catch(t){this.aborted&&(e=t)}t(e)}async flushHeaders(){if(this[A]||this.destroyed)return;this[A]=!0;const e=this.method===w,t=t=>{if(this._request=t,this.destroyed)return void t.destroy();e||h(t,this,["timeout","continue"]),t.once("error",(e=>{this.destroy(e)})),t.once("aborted",(()=>{const{res:e}=this;e?(e.aborted=!0,e.emit("aborted"),e.destroy()):this.destroy(new Error("The server aborted the HTTP/2 stream"))}));const r=(r,s,n)=>{const o=new u(this.socket,t.readableHighWaterMark);this.res=o,o.url=`${this[S].origin}${this.path}`,o.req=this,o.statusCode=r[g],o.headers=r,o.rawHeaders=n,o.once("end",(()=>{o.complete=!0,o.socket=null,o.connection=null})),e?(o.upgrade=!0,this.emit("connect",o,t,Buffer.alloc(0))?this.emit("close"):t.destroy()):(t.on("data",(e=>{o._dumped||o.push(e)||t.pause()})),t.once("end",(()=>{this.aborted||o.push(null)})),this.emit("response",o)||o._dump())};t.once("response",r),t.once("headers",(e=>this.emit("information",{statusCode:e[g]}))),t.once("trailers",((e,t,s)=>{const{res:n}=this;null!==n?(n.trailers=e,n.rawTrailers=s):r(e,0,s)})),t.once("close",(()=>{const{aborted:e,res:t}=this;if(t){e&&(t.aborted=!0,t.emit("aborted"),t.destroy());const r=()=>{t.emit("close"),this.destroy(),this.emit("close")};t.readable?t.once("end",r):r()}else{if(!this.destroyed)return this.destroy(new Error("The HTTP/2 stream has been early terminated")),void this.emit("close");this.destroy(),this.emit("close")}})),this.socket=new Proxy(t,y);for(const e of this[C])e();this[C].length=0,this.emit("socket",this.socket)};if(v in this[E]||e||(this[E][v]=this[S].host),this[R])try{t(this[R].request(this[E]))}catch(e){this.destroy(e)}else{this.reusedSocket=!0;try{const e=this.agent.request(this[S],this[O],this[E]);this[x]=e,t(await e),this[x]=!1}catch(e){this[x]=!1,this.destroy(e)}}}get connection(){return this.socket}set connection(e){this.socket=e}getHeaderNames(){return Object.keys(this[E])}hasHeader(e){if("string"!=typeof e)throw new l("name","string",e);return Boolean(this[E][e.toLowerCase()])}getHeader(e){if("string"!=typeof e)throw new l("name","string",e);return this[E][e.toLowerCase()]}get headersSent(){return this[A]}removeHeader(e){if("string"!=typeof e)throw new l("name","string",e);if(this.headersSent)throw new p("remove");delete this[E][e.toLowerCase()]}setHeader(e,t){if(this.headersSent)throw new p("set");f(e),m(e,t);const r=e.toLowerCase();if("connection"===r){if("keep-alive"===t.toLowerCase())return;throw new Error(`Invalid 'connection' header: ${t}`)}"host"===r&&"CONNECT"===this.method?this[E][v]=t:this[E][r]=t}setNoDelay(){}setSocketKeepAlive(){}setTimeout(e,t){const r=()=>this._request.setTimeout(e,t);return this._request?r():this[C].push(r),this}get maxHeadersCount(){if(!this.destroyed&&this._request)return this._request.session.localSettings.maxHeaderListSize}set maxHeadersCount(e){}}},7138:(e,t,r)=>{"use strict";const{Readable:s}=r(2781);e.exports=class extends s{constructor(e,t){super({emitClose:!1,autoDestroy:!0,highWaterMark:t}),this.statusCode=null,this.statusMessage="",this.httpVersion="2.0",this.httpVersionMajor=2,this.httpVersionMinor=0,this.headers={},this.trailers={},this.req=null,this.aborted=!1,this.complete=!1,this.upgrade=null,this.rawHeaders=[],this.rawTrailers=[],this.socket=e,this._dumped=!1}get connection(){return this.socket}set connection(e){this.socket=e}_destroy(e,t){this.readableEnded||(this.aborted=!0),t(),this.req._request.destroy(e)}setTimeout(e,t){return this.req.setTimeout(e,t),this}_dump(){this._dumped||(this._dumped=!0,this.removeAllListeners("data"),this.resume())}_read(){this.req&&this.req._request.resume()}}},9758:(e,t,r)=>{"use strict";const s=r(5158),{Agent:n,globalAgent:o}=r(4685),i=r(2287),a=r(7138),c=r(6673),{HttpOverHttp2:u,HttpsOverHttp2:h}=r(7072),l=r(3672),{Http2OverHttp:d,Http2OverHttps:p}=r(148),f=r(7460),m=r(9154);e.exports={...s,ClientRequest:i,IncomingMessage:a,Agent:n,globalAgent:o,request:(e,t,r)=>new i(e,t,r),get:(e,t,r)=>{const s=new i(e,t,r);return s.end(),s},auto:c,proxies:{HttpOverHttp2:u,HttpsOverHttp2:h,Http2OverHttp2:l,Http2OverHttp:d,Http2OverHttps:p},validateHeaderName:f,validateHeaderValue:m}},6476:e=>{"use strict";e.exports=e=>{const{username:t,password:r}=e.proxyOptions.url;if(t||r){const e=`${t}:${r}`,s=`Basic ${Buffer.from(e).toString("base64")}`;return{"proxy-authorization":s,authorization:s}}return{}}},7072:(e,t,r)=>{"use strict";const s=r(4404),n=r(3685),o=r(5687),i=r(5583),{globalAgent:a}=r(4685),c=r(4906),u=r(9645),h=r(6476),l=(e,t,r)=>{(async()=>{try{const{proxyOptions:n}=e,{url:u,headers:l,raw:d}=n,p=await a.request(u,n,{...h(e),...l,":method":"CONNECT",":authority":`${t.host}:${t.port}`});p.once("error",r),p.once("response",(n=>{const a=n[":status"];if(200!==a)return void r(new c(a,""));const u=e instanceof o.Agent;if(d&&u){t.socket=p;const e=s.connect(t);return e.once("close",(()=>{p.destroy()})),void r(null,e)}const h=new i(p);h.encrypted=!1,h._handle.getpeername=e=>{e.family=void 0,e.address=void 0,e.port=void 0},r(null,h)}))}catch(e){r(e)}})()};class d extends n.Agent{constructor(e){super(e),u(this,e.proxyOptions)}createConnection(e,t){l(this,e,t)}}class p extends o.Agent{constructor(e){super(e),u(this,e.proxyOptions)}createConnection(e,t){l(this,e,t)}}e.exports={HttpOverHttp2:d,HttpsOverHttp2:p}},148:(e,t,r)=>{"use strict";const s=r(3685),n=r(5687),o=r(8193),i=r(6476);class a extends o{async _getProxyStream(e){const{proxyOptions:t}=this,{url:r,headers:o}=this.proxyOptions;return a=("https:"===r.protocol?n:s).request({...t,hostname:r.hostname,port:r.port,path:e,headers:{...i(this),...o,host:e},method:"CONNECT"}).end(),new Promise(((e,t)=>{a.once("error",t),a.once("connect",((r,s,n)=>{s.unshift(n),a.off("error",t),e([s,r.statusCode,r.statusMessage])}))}));var a}}e.exports={Http2OverHttp:a,Http2OverHttps:a}},3672:(e,t,r)=>{"use strict";const{globalAgent:s}=r(4685),n=r(8193),o=r(6476);e.exports=class extends n{async _getProxyStream(e){const{proxyOptions:t}=this,r={...o(this),...t.headers,":method":"CONNECT",":authority":e},n=await s.request(t.url,t,r),i=await(e=>new Promise(((t,r)=>{e.once("error",r),e.once("response",(s=>{e.off("error",r),t(s[":status"])}))})))(n);return[n,i,""]}}},8193:(e,t,r)=>{"use strict";const{Agent:s}=r(4685),n=r(5583),o=r(4906),i=r(9645);e.exports=class extends s{constructor(e){super(e),i(this,e.proxyOptions)}async createConnection(e,t){const r=`${e.hostname}:${e.port||443}`,[s,i,a]=await this._getProxyStream(r);if(200!==i)throw new o(i,a);if(!this.proxyOptions.raw){const e=new n(s);return e.encrypted=!1,e._handle.getpeername=e=>{e.family=void 0,e.address=void 0,e.port=void 0},e}return t.socket=s,super.createConnection(e,t)}}},9645:(e,t,r)=>{"use strict";const{URL:s}=r(7310),n=r(2058);e.exports=(e,t)=>{n("proxyOptions",t,["object"]),n("proxyOptions.headers",t.headers,["object","undefined"]),n("proxyOptions.raw",t.raw,["boolean","undefined"]),n("proxyOptions.url",t.url,[s,"string"]);const r=new s(t.url);e.proxyOptions={raw:!0,...t,headers:{...t.headers},url:r}}},4906:e=>{"use strict";class t extends Error{constructor(e,t=""){super(`The proxy server rejected the request with status code ${e} (${t||"empty status message"})`),this.statusCode=e,this.statusMessage=t}}e.exports=t},4017:(e,t,r)=>{"use strict";const{isIP:s}=r(1808),n=r(9491);e.exports=e=>{const t=(e=>{if("["===e[0]){const t=e.indexOf("]");return n(-1!==t),e.slice(1,t)}const t=e.indexOf(":");return-1===t?e:e.slice(0,t)})(e);return s(t)?"":t}},2058:e=>{"use strict";e.exports=(e,t,r)=>{if(!r.some((e=>"string"==typeof e?typeof t===e:t instanceof e))){const s=r.map((e=>"string"==typeof e?e:e.name));throw new TypeError(`Expected '${e}' to be a type of ${s.join(" or ")}, got ${typeof t}`)}}},8120:e=>{"use strict";e.exports=e=>{if(0!==e.listenerCount("error"))return e;e.__destroy=e._destroy,e._destroy=(...t)=>{const r=t.pop();e.__destroy(...t,(async e=>{await Promise.resolve(),r(e)}))};const t=t=>{Promise.resolve().then((()=>{e.emit("error",t)}))};return e.once("error",t),Promise.resolve().then((()=>{e.off("error",t)})),e}},3190:e=>{"use strict";const t=(t,r,s)=>{e.exports[r]=class extends t{constructor(...e){super("string"==typeof s?s:s(e)),this.name=`${super.name} [${r}]`,this.code=r}}};t(TypeError,"ERR_INVALID_ARG_TYPE",(e=>{const t=e[0].includes(".")?"property":"argument";let r=e[1];const s=Array.isArray(r);return s&&(r=`${r.slice(0,-1).join(", ")} or ${r.slice(-1)}`),`The "${e[0]}" ${t} must be ${s?"one of":"of"} type ${r}. Received ${typeof e[2]}`})),t(TypeError,"ERR_INVALID_PROTOCOL",(e=>`Protocol "${e[0]}" not supported. Expected "${e[1]}"`)),t(Error,"ERR_HTTP_HEADERS_SENT",(e=>`Cannot ${e[0]} headers after they are sent to the client`)),t(TypeError,"ERR_INVALID_HTTP_TOKEN",(e=>`${e[0]} must be a valid HTTP token [${e[1]}]`)),t(TypeError,"ERR_HTTP_INVALID_HEADER_VALUE",(e=>`Invalid value "${e[0]} for header "${e[1]}"`)),t(TypeError,"ERR_INVALID_CHAR",(e=>`Invalid character in ${e[0]} [${e[1]}]`)),t(Error,"ERR_HTTP2_NO_SOCKET_MANIPULATION","HTTP/2 sockets should not be directly manipulated (e.g. read and written)")},8202:e=>{"use strict";e.exports=e=>{switch(e){case":method":case":scheme":case":authority":case":path":return!0;default:return!1}}},5583:(e,t,r)=>{"use strict";const s=r(2781),n=new(r(4404).TLSSocket)(new s.PassThrough)._handle._parentWrap.constructor;e.exports=n},7306:e=>{"use strict";e.exports=(e,t,r)=>{for(const s of r)e.on(s,((...e)=>t.emit(s,...e)))}},7709:(e,t,r)=>{"use strict";const{ERR_HTTP2_NO_SOCKET_MANIPULATION:s}=r(3190),n={has(e,t){const r=void 0===e.session?e:e.session.socket;return t in e||t in r},get(e,t){switch(t){case"on":case"once":case"end":case"emit":case"destroy":return e[t].bind(e);case"writable":case"destroyed":return e[t];case"readable":return!e.destroyed&&e.readable;case"setTimeout":{const{session:t}=e;return void 0!==t?t.setTimeout.bind(t):e.setTimeout.bind(e)}case"write":case"read":case"pause":case"resume":throw new s;default:{const r=void 0===e.session?e:e.session.socket,s=r[t];return"function"==typeof s?s.bind(r):s}}},getPrototypeOf:e=>void 0!==e.session?Reflect.getPrototypeOf(e.session.socket):Reflect.getPrototypeOf(e),set(e,t,r){switch(t){case"writable":case"readable":case"destroyed":case"on":case"once":case"end":case"emit":case"destroy":return e[t]=r,!0;case"setTimeout":{const{session:t}=e;return void 0===t?e.setTimeout=r:t.setTimeout=r,!0}case"write":case"read":case"pause":case"resume":throw new s;default:return(void 0===e.session?e:e.session.socket)[t]=r,!0}}};e.exports=n},7460:(e,t,r)=>{"use strict";const{ERR_INVALID_HTTP_TOKEN:s}=r(3190),n=r(8202),o=/^[\^`\-\w!#$%&*+.|~]+$/;e.exports=e=>{if("string"!=typeof e||!o.test(e)&&!n(e))throw new s("Header name",e)}},9154:(e,t,r)=>{"use strict";const{ERR_HTTP_INVALID_HEADER_VALUE:s,ERR_INVALID_CHAR:n}=r(3190),o=/[^\t\u0020-\u007E\u0080-\u00FF]/;e.exports=(e,t)=>{if(void 0===t)throw new s(t,e);if(o.test(t))throw new n("header content",e)}},1085:(e,t)=>{t.stringify=function e(t){if(void 0===t)return t;if(t&&Buffer.isBuffer(t))return JSON.stringify(":base64:"+t.toString("base64"));if(t&&t.toJSON&&(t=t.toJSON()),t&&"object"==typeof t){var r="",s=Array.isArray(t);r=s?"[":"{";var n=!0;for(var o in t){var i="function"==typeof t[o]||!s&&void 0===t[o];Object.hasOwnProperty.call(t,o)&&!i&&(n||(r+=","),n=!1,s?null==t[o]?r+="null":r+=e(t[o]):void 0!==t[o]&&(r+=e(o)+":"+e(t[o])))}return r+(s?"]":"}")}return"string"==typeof t?JSON.stringify(/^:/.test(t)?":"+t:t):void 0===t?"null":JSON.stringify(t)},t.parse=function(e){return JSON.parse(e,(function(e,t){return"string"==typeof t?/^:base64:/.test(t)?Buffer.from(t.substring(8),"base64"):/^:/.test(t)?t.substring(1):t:t}))}},4958:(e,t,r)=>{"use strict";const s=r(2361),n=r(1085),o=["sqlite","postgres","mysql","mongo","redis","tiered"];e.exports=class extends s{constructor(e,{emitErrors:t=!0,...s}={}){if(super(),this.opts={namespace:"keyv",serialize:n.stringify,deserialize:n.parse,..."string"==typeof e?{uri:e}:e,...s},!this.opts.store){const e={...this.opts};this.opts.store=(e=>{const t={redis:"@keyv/redis",rediss:"@keyv/redis",mongodb:"@keyv/mongo",mongo:"@keyv/mongo",sqlite:"@keyv/sqlite",postgresql:"@keyv/postgres",postgres:"@keyv/postgres",mysql:"@keyv/mysql",etcd:"@keyv/etcd",offline:"@keyv/offline",tiered:"@keyv/tiered"};if(e.adapter||e.uri){const s=e.adapter||/^[^:+]*/.exec(e.uri)[0];return new(r(3196)(t[s]))(e)}return new Map})(e)}if(this.opts.compression){const e=this.opts.compression;this.opts.serialize=e.serialize.bind(e),this.opts.deserialize=e.deserialize.bind(e)}"function"==typeof this.opts.store.on&&t&&this.opts.store.on("error",(e=>this.emit("error",e))),this.opts.store.namespace=this.opts.namespace;const o=e=>async function*(){for await(const[t,r]of"function"==typeof e?e(this.opts.store.namespace):e){const e=await this.opts.deserialize(r);this.opts.store.namespace&&!t.includes(this.opts.store.namespace)||("number"==typeof e.expires&&Date.now()>e.expires?this.delete(t):yield[this._getKeyUnprefix(t),e.value])}};"function"==typeof this.opts.store[Symbol.iterator]&&this.opts.store instanceof Map?this.iterator=o(this.opts.store):"function"==typeof this.opts.store.iterator&&this.opts.store.opts&&this._checkIterableAdaptar()&&(this.iterator=o(this.opts.store.iterator.bind(this.opts.store)))}_checkIterableAdaptar(){return o.includes(this.opts.store.opts.dialect)||o.findIndex((e=>this.opts.store.opts.url.includes(e)))>=0}_getKeyPrefix(e){return`${this.opts.namespace}:${e}`}_getKeyPrefixArray(e){return e.map((e=>`${this.opts.namespace}:${e}`))}_getKeyUnprefix(e){return e.split(":").splice(1).join(":")}get(e,t){const{store:r}=this.opts,s=Array.isArray(e),n=s?this._getKeyPrefixArray(e):this._getKeyPrefix(e);if(s&&void 0===r.getMany){const e=[];for(const s of n)e.push(Promise.resolve().then((()=>r.get(s))).then((e=>"string"==typeof e||this.opts.compression?this.opts.deserialize(e):e)).then((e=>{if(null!=e)return"number"==typeof e.expires&&Date.now()>e.expires?this.delete(s).then((()=>{})):t&&t.raw?e:e.value})));return Promise.allSettled(e).then((e=>{const t=[];for(const r of e)t.push(r.value);return t}))}return Promise.resolve().then((()=>s?r.getMany(n):r.get(n))).then((e=>"string"==typeof e||this.opts.compression?this.opts.deserialize(e):e)).then((r=>{if(null!=r){if(s){const s=[];for(let n of r)"string"==typeof n&&(n=this.opts.deserialize(n)),null!=n?"number"==typeof n.expires&&Date.now()>n.expires?(this.delete(e).then((()=>{})),s.push(void 0)):s.push(t&&t.raw?n:n.value):s.push(void 0);return s}return"number"==typeof r.expires&&Date.now()>r.expires?this.delete(e).then((()=>{})):t&&t.raw?r:r.value}}))}set(e,t,r){const s=this._getKeyPrefix(e);void 0===r&&(r=this.opts.ttl),0===r&&(r=void 0);const{store:n}=this.opts;return Promise.resolve().then((()=>{const e="number"==typeof r?Date.now()+r:null;return"symbol"==typeof t&&this.emit("error","symbol cannot be serialized"),t={value:t,expires:e},this.opts.serialize(t)})).then((e=>n.set(s,e,r))).then((()=>!0))}delete(e){const{store:t}=this.opts;if(Array.isArray(e)){const r=this._getKeyPrefixArray(e);if(void 0===t.deleteMany){const e=[];for(const s of r)e.push(t.delete(s));return Promise.allSettled(e).then((e=>e.every((e=>!0===e.value))))}return Promise.resolve().then((()=>t.deleteMany(r)))}const r=this._getKeyPrefix(e);return Promise.resolve().then((()=>t.delete(r)))}clear(){const{store:e}=this.opts;return Promise.resolve().then((()=>e.clear()))}has(e){const t=this._getKeyPrefix(e),{store:r}=this.opts;return Promise.resolve().then((async()=>"function"==typeof r.has?r.has(t):void 0!==await r.get(t)))}disconnect(){const{store:e}=this.opts;if("function"==typeof e.disconnect)return e.disconnect()}}},3196:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=3196,e.exports=t},9444:(e,t,r)=>{"use strict";e.exports=r(6087)},1006:(e,t,r)=>{"use strict";const s=r(1017),n="\\.{1,2}(?:\\/|$)",o={DOT_LITERAL:"\\.",PLUS_LITERAL:"\\+",QMARK_LITERAL:"\\?",SLASH_LITERAL:"\\/",ONE_CHAR:"(?=.)",QMARK:"[^/]",END_ANCHOR:"(?:\\/|$)",DOTS_SLASH:n,NO_DOT:"(?!\\.)",NO_DOTS:`(?!(?:^|\\/)${n})`,NO_DOT_SLASH:"(?!\\.{0,1}(?:\\/|$))",NO_DOTS_SLASH:`(?!${n})`,QMARK_NO_DOT:"[^.\\/]",STAR:"[^/]*?",START_ANCHOR:"(?:^|\\/)"},i={...o,SLASH_LITERAL:"[\\\\/]",QMARK:"[^\\\\/]",STAR:"[^\\\\/]*?",DOTS_SLASH:"\\.{1,2}(?:[\\\\/]|$)",NO_DOT:"(?!\\.)",NO_DOTS:"(?!(?:^|[\\\\/])\\.{1,2}(?:[\\\\/]|$))",NO_DOT_SLASH:"(?!\\.{0,1}(?:[\\\\/]|$))",NO_DOTS_SLASH:"(?!\\.{1,2}(?:[\\\\/]|$))",QMARK_NO_DOT:"[^.\\\\/]",START_ANCHOR:"(?:^|[\\\\/])",END_ANCHOR:"(?:[\\\\/]|$)"};e.exports={MAX_LENGTH:65536,POSIX_REGEX_SOURCE:{alnum:"a-zA-Z0-9",alpha:"a-zA-Z",ascii:"\\x00-\\x7F",blank:" \\t",cntrl:"\\x00-\\x1F\\x7F",digit:"0-9",graph:"\\x21-\\x7E",lower:"a-z",print:"\\x20-\\x7E ",punct:"\\-!\"#$%&'()\\*+,./:;<=>?@[\\]^_`{|}~",space:" \\t\\r\\n\\v\\f",upper:"A-Z",word:"A-Za-z0-9_",xdigit:"A-Fa-f0-9"},REGEX_BACKSLASH:/\\(?![*+?^${}(|)[\]])/g,REGEX_NON_SPECIAL_CHARS:/^[^@![\].,$*+?^{}()|\\/]+/,REGEX_SPECIAL_CHARS:/[-*+?.^${}(|)[\]]/,REGEX_SPECIAL_CHARS_BACKREF:/(\\?)((\W)(\3*))/g,REGEX_SPECIAL_CHARS_GLOBAL:/([-*+?.^${}(|)[\]])/g,REGEX_REMOVE_BACKSLASH:/(?:\[.*?[^\\]\]|\\(?=.))/g,REPLACEMENTS:{"***":"*","**/**":"**","**/**/**":"**"},CHAR_0:48,CHAR_9:57,CHAR_UPPERCASE_A:65,CHAR_LOWERCASE_A:97,CHAR_UPPERCASE_Z:90,CHAR_LOWERCASE_Z:122,CHAR_LEFT_PARENTHESES:40,CHAR_RIGHT_PARENTHESES:41,CHAR_ASTERISK:42,CHAR_AMPERSAND:38,CHAR_AT:64,CHAR_BACKWARD_SLASH:92,CHAR_CARRIAGE_RETURN:13,CHAR_CIRCUMFLEX_ACCENT:94,CHAR_COLON:58,CHAR_COMMA:44,CHAR_DOT:46,CHAR_DOUBLE_QUOTE:34,CHAR_EQUAL:61,CHAR_EXCLAMATION_MARK:33,CHAR_FORM_FEED:12,CHAR_FORWARD_SLASH:47,CHAR_GRAVE_ACCENT:96,CHAR_HASH:35,CHAR_HYPHEN_MINUS:45,CHAR_LEFT_ANGLE_BRACKET:60,CHAR_LEFT_CURLY_BRACE:123,CHAR_LEFT_SQUARE_BRACKET:91,CHAR_LINE_FEED:10,CHAR_NO_BREAK_SPACE:160,CHAR_PERCENT:37,CHAR_PLUS:43,CHAR_QUESTION_MARK:63,CHAR_RIGHT_ANGLE_BRACKET:62,CHAR_RIGHT_CURLY_BRACE:125,CHAR_RIGHT_SQUARE_BRACKET:93,CHAR_SEMICOLON:59,CHAR_SINGLE_QUOTE:39,CHAR_SPACE:32,CHAR_TAB:9,CHAR_UNDERSCORE:95,CHAR_VERTICAL_LINE:124,CHAR_ZERO_WIDTH_NOBREAK_SPACE:65279,SEP:s.sep,extglobChars:e=>({"!":{type:"negate",open:"(?:(?!(?:",close:`))${e.STAR})`},"?":{type:"qmark",open:"(?:",close:")?"},"+":{type:"plus",open:"(?:",close:")+"},"*":{type:"star",open:"(?:",close:")*"},"@":{type:"at",open:"(?:",close:")"}}),globChars:e=>!0===e?i:o}},3376:(e,t,r)=>{"use strict";const s=r(1006),n=r(8702),{MAX_LENGTH:o,POSIX_REGEX_SOURCE:i,REGEX_NON_SPECIAL_CHARS:a,REGEX_SPECIAL_CHARS_BACKREF:c,REPLACEMENTS:u}=s,h=(e,t)=>{if("function"==typeof t.expandRange)return t.expandRange(...e,t);e.sort();const r=`[${e.join("-")}]`;try{new RegExp(r)}catch(t){return e.map((e=>n.escapeRegex(e))).join("..")}return r},l=(e,t)=>`Missing ${e}: "${t}" - use "\\\\${t}" to match literal characters`,d=(e,t)=>{if("string"!=typeof e)throw new TypeError("Expected a string");e=u[e]||e;const r={...t},p="number"==typeof r.maxLength?Math.min(o,r.maxLength):o;let f=e.length;if(f>p)throw new SyntaxError(`Input length: ${f}, exceeds maximum allowed length: ${p}`);const m={type:"bos",value:"",output:r.prepend||""},y=[m],g=r.capture?"":"?:",_=n.isWindows(t),b=s.globChars(_),v=s.extglobChars(b),{DOT_LITERAL:w,PLUS_LITERAL:E,SLASH_LITERAL:S,ONE_CHAR:R,DOTS_SLASH:O,NO_DOT:A,NO_DOT_SLASH:C,NO_DOTS_SLASH:x,QMARK:T,QMARK_NO_DOT:k,STAR:P,START_ANCHOR:H}=b,j=e=>`(${g}(?:(?!${H}${e.dot?O:w}).)*?)`,L=r.dot?"":A,$=r.dot?T:k;let I=!0===r.bash?j(r):P;r.capture&&(I=`(${I})`),"boolean"==typeof r.noext&&(r.noextglob=r.noext);const N={input:e,index:-1,start:0,dot:!0===r.dot,consumed:"",output:"",prefix:"",backtrack:!1,negated:!1,brackets:0,braces:0,parens:0,quotes:0,globstar:!1,tokens:y};e=n.removePrefix(e,N),f=e.length;const q=[],U=[],D=[];let M,B=m;const z=()=>N.index===f-1,F=N.peek=(t=1)=>e[N.index+t],G=N.advance=()=>e[++N.index]||"",W=()=>e.slice(N.index+1),V=(e="",t=0)=>{N.consumed+=e,N.index+=t},K=e=>{N.output+=null!=e.output?e.output:e.value,V(e.value)},J=()=>{let e=1;for(;"!"===F()&&("("!==F(2)||"?"===F(3));)G(),N.start++,e++;return e%2!=0&&(N.negated=!0,N.start++,!0)},Q=e=>{N[e]++,D.push(e)},Y=e=>{N[e]--,D.pop()},X=e=>{if("globstar"===B.type){const t=N.braces>0&&("comma"===e.type||"brace"===e.type),r=!0===e.extglob||q.length&&("pipe"===e.type||"paren"===e.type);"slash"===e.type||"paren"===e.type||t||r||(N.output=N.output.slice(0,-B.output.length),B.type="star",B.value="*",B.output=I,N.output+=B.output)}if(q.length&&"paren"!==e.type&&(q[q.length-1].inner+=e.value),(e.value||e.output)&&K(e),B&&"text"===B.type&&"text"===e.type)return B.value+=e.value,void(B.output=(B.output||"")+e.value);e.prev=B,y.push(e),B=e},Z=(e,t)=>{const s={...v[t],conditions:1,inner:""};s.prev=B,s.parens=N.parens,s.output=N.output;const n=(r.capture?"(":"")+s.open;Q("parens"),X({type:e,value:t,output:N.output?"":R}),X({type:"paren",extglob:!0,value:G(),output:n}),q.push(s)},ee=e=>{let s,n=e.close+(r.capture?")":"");if("negate"===e.type){let o=I;if(e.inner&&e.inner.length>1&&e.inner.includes("/")&&(o=j(r)),(o!==I||z()||/^\)+$/.test(W()))&&(n=e.close=`)$))${o}`),e.inner.includes("*")&&(s=W())&&/^\.[^\\/.]+$/.test(s)){const r=d(s,{...t,fastpaths:!1}).output;n=e.close=`)${r})${o})`}"bos"===e.prev.type&&(N.negatedExtglob=!0)}X({type:"paren",extglob:!0,value:M,output:n}),Y("parens")};if(!1!==r.fastpaths&&!/(^[*!]|[/()[\]{}"])/.test(e)){let s=!1,o=e.replace(c,((e,t,r,n,o,i)=>"\\"===n?(s=!0,e):"?"===n?t?t+n+(o?T.repeat(o.length):""):0===i?$+(o?T.repeat(o.length):""):T.repeat(r.length):"."===n?w.repeat(r.length):"*"===n?t?t+n+(o?I:""):I:t?e:`\\${e}`));return!0===s&&(o=!0===r.unescape?o.replace(/\\/g,""):o.replace(/\\+/g,(e=>e.length%2==0?"\\\\":e?"\\":""))),o===e&&!0===r.contains?(N.output=e,N):(N.output=n.wrapOutput(o,N,t),N)}for(;!z();){if(M=G(),"\0"===M)continue;if("\\"===M){const e=F();if("/"===e&&!0!==r.bash)continue;if("."===e||";"===e)continue;if(!e){M+="\\",X({type:"text",value:M});continue}const t=/^\\+/.exec(W());let s=0;if(t&&t[0].length>2&&(s=t[0].length,N.index+=s,s%2!=0&&(M+="\\")),!0===r.unescape?M=G():M+=G(),0===N.brackets){X({type:"text",value:M});continue}}if(N.brackets>0&&("]"!==M||"["===B.value||"[^"===B.value)){if(!1!==r.posix&&":"===M){const e=B.value.slice(1);if(e.includes("[")&&(B.posix=!0,e.includes(":"))){const e=B.value.lastIndexOf("["),t=B.value.slice(0,e),r=B.value.slice(e+2),s=i[r];if(s){B.value=t+s,N.backtrack=!0,G(),m.output||1!==y.indexOf(B)||(m.output=R);continue}}}("["===M&&":"!==F()||"-"===M&&"]"===F())&&(M=`\\${M}`),"]"!==M||"["!==B.value&&"[^"!==B.value||(M=`\\${M}`),!0===r.posix&&"!"===M&&"["===B.value&&(M="^"),B.value+=M,K({value:M});continue}if(1===N.quotes&&'"'!==M){M=n.escapeRegex(M),B.value+=M,K({value:M});continue}if('"'===M){N.quotes=1===N.quotes?0:1,!0===r.keepQuotes&&X({type:"text",value:M});continue}if("("===M){Q("parens"),X({type:"paren",value:M});continue}if(")"===M){if(0===N.parens&&!0===r.strictBrackets)throw new SyntaxError(l("opening","("));const e=q[q.length-1];if(e&&N.parens===e.parens+1){ee(q.pop());continue}X({type:"paren",value:M,output:N.parens?")":"\\)"}),Y("parens");continue}if("["===M){if(!0!==r.nobracket&&W().includes("]"))Q("brackets");else{if(!0!==r.nobracket&&!0===r.strictBrackets)throw new SyntaxError(l("closing","]"));M=`\\${M}`}X({type:"bracket",value:M});continue}if("]"===M){if(!0===r.nobracket||B&&"bracket"===B.type&&1===B.value.length){X({type:"text",value:M,output:`\\${M}`});continue}if(0===N.brackets){if(!0===r.strictBrackets)throw new SyntaxError(l("opening","["));X({type:"text",value:M,output:`\\${M}`});continue}Y("brackets");const e=B.value.slice(1);if(!0===B.posix||"^"!==e[0]||e.includes("/")||(M=`/${M}`),B.value+=M,K({value:M}),!1===r.literalBrackets||n.hasRegexChars(e))continue;const t=n.escapeRegex(B.value);if(N.output=N.output.slice(0,-B.value.length),!0===r.literalBrackets){N.output+=t,B.value=t;continue}B.value=`(${g}${t}|${B.value})`,N.output+=B.value;continue}if("{"===M&&!0!==r.nobrace){Q("braces");const e={type:"brace",value:M,output:"(",outputIndex:N.output.length,tokensIndex:N.tokens.length};U.push(e),X(e);continue}if("}"===M){const e=U[U.length-1];if(!0===r.nobrace||!e){X({type:"text",value:M,output:M});continue}let t=")";if(!0===e.dots){const e=y.slice(),s=[];for(let t=e.length-1;t>=0&&(y.pop(),"brace"!==e[t].type);t--)"dots"!==e[t].type&&s.unshift(e[t].value);t=h(s,r),N.backtrack=!0}if(!0!==e.comma&&!0!==e.dots){const r=N.output.slice(0,e.outputIndex),s=N.tokens.slice(e.tokensIndex);e.value=e.output="\\{",M=t="\\}",N.output=r;for(const e of s)N.output+=e.output||e.value}X({type:"brace",value:M,output:t}),Y("braces"),U.pop();continue}if("|"===M){q.length>0&&q[q.length-1].conditions++,X({type:"text",value:M});continue}if(","===M){let e=M;const t=U[U.length-1];t&&"braces"===D[D.length-1]&&(t.comma=!0,e="|"),X({type:"comma",value:M,output:e});continue}if("/"===M){if("dot"===B.type&&N.index===N.start+1){N.start=N.index+1,N.consumed="",N.output="",y.pop(),B=m;continue}X({type:"slash",value:M,output:S});continue}if("."===M){if(N.braces>0&&"dot"===B.type){"."===B.value&&(B.output=w);const e=U[U.length-1];B.type="dots",B.output+=M,B.value+=M,e.dots=!0;continue}if(N.braces+N.parens===0&&"bos"!==B.type&&"slash"!==B.type){X({type:"text",value:M,output:w});continue}X({type:"dot",value:M,output:w});continue}if("?"===M){if((!B||"("!==B.value)&&!0!==r.noextglob&&"("===F()&&"?"!==F(2)){Z("qmark",M);continue}if(B&&"paren"===B.type){const e=F();let t=M;if("<"===e&&!n.supportsLookbehinds())throw new Error("Node.js v10 or higher is required for regex lookbehinds");("("===B.value&&!/[!=<:]/.test(e)||"<"===e&&!/<([!=]|\w+>)/.test(W()))&&(t=`\\${M}`),X({type:"text",value:M,output:t});continue}if(!0!==r.dot&&("slash"===B.type||"bos"===B.type)){X({type:"qmark",value:M,output:k});continue}X({type:"qmark",value:M,output:T});continue}if("!"===M){if(!0!==r.noextglob&&"("===F()&&("?"!==F(2)||!/[!=<:]/.test(F(3)))){Z("negate",M);continue}if(!0!==r.nonegate&&0===N.index){J();continue}}if("+"===M){if(!0!==r.noextglob&&"("===F()&&"?"!==F(2)){Z("plus",M);continue}if(B&&"("===B.value||!1===r.regex){X({type:"plus",value:M,output:E});continue}if(B&&("bracket"===B.type||"paren"===B.type||"brace"===B.type)||N.parens>0){X({type:"plus",value:M});continue}X({type:"plus",value:E});continue}if("@"===M){if(!0!==r.noextglob&&"("===F()&&"?"!==F(2)){X({type:"at",extglob:!0,value:M,output:""});continue}X({type:"text",value:M});continue}if("*"!==M){"$"!==M&&"^"!==M||(M=`\\${M}`);const e=a.exec(W());e&&(M+=e[0],N.index+=e[0].length),X({type:"text",value:M});continue}if(B&&("globstar"===B.type||!0===B.star)){B.type="star",B.star=!0,B.value+=M,B.output=I,N.backtrack=!0,N.globstar=!0,V(M);continue}let t=W();if(!0!==r.noextglob&&/^\([^?]/.test(t)){Z("star",M);continue}if("star"===B.type){if(!0===r.noglobstar){V(M);continue}const s=B.prev,n=s.prev,o="slash"===s.type||"bos"===s.type,i=n&&("star"===n.type||"globstar"===n.type);if(!0===r.bash&&(!o||t[0]&&"/"!==t[0])){X({type:"star",value:M,output:""});continue}const a=N.braces>0&&("comma"===s.type||"brace"===s.type),c=q.length&&("pipe"===s.type||"paren"===s.type);if(!o&&"paren"!==s.type&&!a&&!c){X({type:"star",value:M,output:""});continue}for(;"/**"===t.slice(0,3);){const r=e[N.index+4];if(r&&"/"!==r)break;t=t.slice(3),V("/**",3)}if("bos"===s.type&&z()){B.type="globstar",B.value+=M,B.output=j(r),N.output=B.output,N.globstar=!0,V(M);continue}if("slash"===s.type&&"bos"!==s.prev.type&&!i&&z()){N.output=N.output.slice(0,-(s.output+B.output).length),s.output=`(?:${s.output}`,B.type="globstar",B.output=j(r)+(r.strictSlashes?")":"|$)"),B.value+=M,N.globstar=!0,N.output+=s.output+B.output,V(M);continue}if("slash"===s.type&&"bos"!==s.prev.type&&"/"===t[0]){const e=void 0!==t[1]?"|$":"";N.output=N.output.slice(0,-(s.output+B.output).length),s.output=`(?:${s.output}`,B.type="globstar",B.output=`${j(r)}${S}|${S}${e})`,B.value+=M,N.output+=s.output+B.output,N.globstar=!0,V(M+G()),X({type:"slash",value:"/",output:""});continue}if("bos"===s.type&&"/"===t[0]){B.type="globstar",B.value+=M,B.output=`(?:^|${S}|${j(r)}${S})`,N.output=B.output,N.globstar=!0,V(M+G()),X({type:"slash",value:"/",output:""});continue}N.output=N.output.slice(0,-B.output.length),B.type="globstar",B.output=j(r),B.value+=M,N.output+=B.output,N.globstar=!0,V(M);continue}const s={type:"star",value:M,output:I};!0!==r.bash?!B||"bracket"!==B.type&&"paren"!==B.type||!0!==r.regex?(N.index!==N.start&&"slash"!==B.type&&"dot"!==B.type||("dot"===B.type?(N.output+=C,B.output+=C):!0===r.dot?(N.output+=x,B.output+=x):(N.output+=L,B.output+=L),"*"!==F()&&(N.output+=R,B.output+=R)),X(s)):(s.output=M,X(s)):(s.output=".*?","bos"!==B.type&&"slash"!==B.type||(s.output=L+s.output),X(s))}for(;N.brackets>0;){if(!0===r.strictBrackets)throw new SyntaxError(l("closing","]"));N.output=n.escapeLast(N.output,"["),Y("brackets")}for(;N.parens>0;){if(!0===r.strictBrackets)throw new SyntaxError(l("closing",")"));N.output=n.escapeLast(N.output,"("),Y("parens")}for(;N.braces>0;){if(!0===r.strictBrackets)throw new SyntaxError(l("closing","}"));N.output=n.escapeLast(N.output,"{"),Y("braces")}if(!0===r.strictSlashes||"star"!==B.type&&"bracket"!==B.type||X({type:"maybe_slash",value:"",output:`${S}?`}),!0===N.backtrack){N.output="";for(const e of N.tokens)N.output+=null!=e.output?e.output:e.value,e.suffix&&(N.output+=e.suffix)}return N};d.fastpaths=(e,t)=>{const r={...t},i="number"==typeof r.maxLength?Math.min(o,r.maxLength):o,a=e.length;if(a>i)throw new SyntaxError(`Input length: ${a}, exceeds maximum allowed length: ${i}`);e=u[e]||e;const c=n.isWindows(t),{DOT_LITERAL:h,SLASH_LITERAL:l,ONE_CHAR:d,DOTS_SLASH:p,NO_DOT:f,NO_DOTS:m,NO_DOTS_SLASH:y,STAR:g,START_ANCHOR:_}=s.globChars(c),b=r.dot?m:f,v=r.dot?y:f,w=r.capture?"":"?:";let E=!0===r.bash?".*?":g;r.capture&&(E=`(${E})`);const S=e=>!0===e.noglobstar?E:`(${w}(?:(?!${_}${e.dot?p:h}).)*?)`,R=e=>{switch(e){case"*":return`${b}${d}${E}`;case".*":return`${h}${d}${E}`;case"*.*":return`${b}${E}${h}${d}${E}`;case"*/*":return`${b}${E}${l}${d}${v}${E}`;case"**":return b+S(r);case"**/*":return`(?:${b}${S(r)}${l})?${v}${d}${E}`;case"**/*.*":return`(?:${b}${S(r)}${l})?${v}${E}${h}${d}${E}`;case"**/.*":return`(?:${b}${S(r)}${l})?${h}${d}${E}`;default:{const t=/^(.*?)\.(\w+)$/.exec(e);if(!t)return;const r=R(t[1]);if(!r)return;return r+h+t[2]}}},O=n.removePrefix(e,{negated:!1,prefix:""});let A=R(O);return A&&!0!==r.strictSlashes&&(A+=`${l}?`),A},e.exports=d},6087:(e,t,r)=>{"use strict";const s=r(1017),n=r(3921),o=r(3376),i=r(8702),a=r(1006),c=(e,t,r=!1)=>{if(Array.isArray(e)){const s=e.map((e=>c(e,t,r))),n=e=>{for(const t of s){const r=t(e);if(r)return r}return!1};return n}const s=(n=e)&&"object"==typeof n&&!Array.isArray(n)&&e.tokens&&e.input;var n;if(""===e||"string"!=typeof e&&!s)throw new TypeError("Expected pattern to be a non-empty string");const o=t||{},a=i.isWindows(t),u=s?c.compileRe(e,t):c.makeRe(e,t,!1,!0),h=u.state;delete u.state;let l=()=>!1;if(o.ignore){const e={...t,ignore:null,onMatch:null,onResult:null};l=c(o.ignore,e,r)}const d=(r,s=!1)=>{const{isMatch:n,match:i,output:d}=c.test(r,u,t,{glob:e,posix:a}),p={glob:e,state:h,regex:u,posix:a,input:r,output:d,match:i,isMatch:n};return"function"==typeof o.onResult&&o.onResult(p),!1===n?(p.isMatch=!1,!!s&&p):l(r)?("function"==typeof o.onIgnore&&o.onIgnore(p),p.isMatch=!1,!!s&&p):("function"==typeof o.onMatch&&o.onMatch(p),!s||p)};return r&&(d.state=h),d};c.test=(e,t,r,{glob:s,posix:n}={})=>{if("string"!=typeof e)throw new TypeError("Expected input to be a string");if(""===e)return{isMatch:!1,output:""};const o=r||{},a=o.format||(n?i.toPosixSlashes:null);let u=e===s,h=u&&a?a(e):e;return!1===u&&(h=a?a(e):e,u=h===s),!1!==u&&!0!==o.capture||(u=!0===o.matchBase||!0===o.basename?c.matchBase(e,t,r,n):t.exec(h)),{isMatch:Boolean(u),match:u,output:h}},c.matchBase=(e,t,r,n=i.isWindows(r))=>(t instanceof RegExp?t:c.makeRe(t,r)).test(s.basename(e)),c.isMatch=(e,t,r)=>c(t,r)(e),c.parse=(e,t)=>Array.isArray(e)?e.map((e=>c.parse(e,t))):o(e,{...t,fastpaths:!1}),c.scan=(e,t)=>n(e,t),c.compileRe=(e,t,r=!1,s=!1)=>{if(!0===r)return e.output;const n=t||{},o=n.contains?"":"^",i=n.contains?"":"$";let a=`${o}(?:${e.output})${i}`;e&&!0===e.negated&&(a=`^(?!${a}).*$`);const u=c.toRegex(a,t);return!0===s&&(u.state=e),u},c.makeRe=(e,t={},r=!1,s=!1)=>{if(!e||"string"!=typeof e)throw new TypeError("Expected a non-empty string");let n={negated:!1,fastpaths:!0};return!1===t.fastpaths||"."!==e[0]&&"*"!==e[0]||(n.output=o.fastpaths(e,t)),n.output||(n=o(e,t)),c.compileRe(n,t,r,s)},c.toRegex=(e,t)=>{try{const r=t||{};return new RegExp(e,r.flags||(r.nocase?"i":""))}catch(e){if(t&&!0===t.debug)throw e;return/$^/}},c.constants=a,e.exports=c},3921:(e,t,r)=>{"use strict";const s=r(8702),{CHAR_ASTERISK:n,CHAR_AT:o,CHAR_BACKWARD_SLASH:i,CHAR_COMMA:a,CHAR_DOT:c,CHAR_EXCLAMATION_MARK:u,CHAR_FORWARD_SLASH:h,CHAR_LEFT_CURLY_BRACE:l,CHAR_LEFT_PARENTHESES:d,CHAR_LEFT_SQUARE_BRACKET:p,CHAR_PLUS:f,CHAR_QUESTION_MARK:m,CHAR_RIGHT_CURLY_BRACE:y,CHAR_RIGHT_PARENTHESES:g,CHAR_RIGHT_SQUARE_BRACKET:_}=r(1006),b=e=>e===h||e===i,v=e=>{!0!==e.isPrefix&&(e.depth=e.isGlobstar?1/0:1)};e.exports=(e,t)=>{const r=t||{},w=e.length-1,E=!0===r.parts||!0===r.scanToEnd,S=[],R=[],O=[];let A,C,x=e,T=-1,k=0,P=0,H=!1,j=!1,L=!1,$=!1,I=!1,N=!1,q=!1,U=!1,D=!1,M=!1,B=0,z={value:"",depth:0,isGlob:!1};const F=()=>T>=w,G=()=>(A=C,x.charCodeAt(++T));for(;T<w;){let e;if(C=G(),C!==i){if(!0===N||C===l){for(B++;!0!==F()&&(C=G());)if(C!==i)if(C!==l){if(!0!==N&&C===c&&(C=G())===c){if(H=z.isBrace=!0,L=z.isGlob=!0,M=!0,!0===E)continue;break}if(!0!==N&&C===a){if(H=z.isBrace=!0,L=z.isGlob=!0,M=!0,!0===E)continue;break}if(C===y&&(B--,0===B)){N=!1,H=z.isBrace=!0,M=!0;break}}else B++;else q=z.backslashes=!0,G();if(!0===E)continue;break}if(C!==h){if(!0!==r.noext&&!0==(C===f||C===o||C===n||C===m||C===u)&&x.charCodeAt(T+1)===d){if(L=z.isGlob=!0,$=z.isExtglob=!0,M=!0,C===u&&T===k&&(D=!0),!0===E){for(;!0!==F()&&(C=G());)if(C!==i){if(C===g){L=z.isGlob=!0,M=!0;break}}else q=z.backslashes=!0,C=G();continue}break}if(C===n){if(A===n&&(I=z.isGlobstar=!0),L=z.isGlob=!0,M=!0,!0===E)continue;break}if(C===m){if(L=z.isGlob=!0,M=!0,!0===E)continue;break}if(C===p){for(;!0!==F()&&(e=G());)if(e!==i){if(e===_){j=z.isBracket=!0,L=z.isGlob=!0,M=!0;break}}else q=z.backslashes=!0,G();if(!0===E)continue;break}if(!0===r.nonegate||C!==u||T!==k){if(!0!==r.noparen&&C===d){if(L=z.isGlob=!0,!0===E){for(;!0!==F()&&(C=G());)if(C!==d){if(C===g){M=!0;break}}else q=z.backslashes=!0,C=G();continue}break}if(!0===L){if(M=!0,!0===E)continue;break}}else U=z.negated=!0,k++}else{if(S.push(T),R.push(z),z={value:"",depth:0,isGlob:!1},!0===M)continue;if(A===c&&T===k+1){k+=2;continue}P=T+1}}else q=z.backslashes=!0,C=G(),C===l&&(N=!0)}!0===r.noext&&($=!1,L=!1);let W=x,V="",K="";k>0&&(V=x.slice(0,k),x=x.slice(k),P-=k),W&&!0===L&&P>0?(W=x.slice(0,P),K=x.slice(P)):!0===L?(W="",K=x):W=x,W&&""!==W&&"/"!==W&&W!==x&&b(W.charCodeAt(W.length-1))&&(W=W.slice(0,-1)),!0===r.unescape&&(K&&(K=s.removeBackslashes(K)),W&&!0===q&&(W=s.removeBackslashes(W)));const J={prefix:V,input:e,start:k,base:W,glob:K,isBrace:H,isBracket:j,isGlob:L,isExtglob:$,isGlobstar:I,negated:U,negatedExtglob:D};if(!0===r.tokens&&(J.maxDepth=0,b(C)||R.push(z),J.tokens=R),!0===r.parts||!0===r.tokens){let t;for(let s=0;s<S.length;s++){const n=t?t+1:k,o=S[s],i=e.slice(n,o);r.tokens&&(0===s&&0!==k?(R[s].isPrefix=!0,R[s].value=V):R[s].value=i,v(R[s]),J.maxDepth+=R[s].depth),0===s&&""===i||O.push(i),t=o}if(t&&t+1<e.length){const s=e.slice(t+1);O.push(s),r.tokens&&(R[R.length-1].value=s,v(R[R.length-1]),J.maxDepth+=R[R.length-1].depth)}J.slashes=S,J.parts=O}return J}},8702:(e,t,r)=>{"use strict";const s=r(1017),n="win32"===process.platform,{REGEX_BACKSLASH:o,REGEX_REMOVE_BACKSLASH:i,REGEX_SPECIAL_CHARS:a,REGEX_SPECIAL_CHARS_GLOBAL:c}=r(1006);t.isObject=e=>null!==e&&"object"==typeof e&&!Array.isArray(e),t.hasRegexChars=e=>a.test(e),t.isRegexChar=e=>1===e.length&&t.hasRegexChars(e),t.escapeRegex=e=>e.replace(c,"\\$1"),t.toPosixSlashes=e=>e.replace(o,"/"),t.removeBackslashes=e=>e.replace(i,(e=>"\\"===e?"":e)),t.supportsLookbehinds=()=>{const e=process.version.slice(1).split(".").map(Number);return 3===e.length&&e[0]>=9||8===e[0]&&e[1]>=10},t.isWindows=e=>e&&"boolean"==typeof e.windows?e.windows:!0===n||"\\"===s.sep,t.escapeLast=(e,r,s)=>{const n=e.lastIndexOf(r,s);return-1===n?e:"\\"===e[n-1]?t.escapeLast(e,r,n-1):`${e.slice(0,n)}\\${e.slice(n)}`},t.removePrefix=(e,t={})=>{let r=e;return r.startsWith("./")&&(r=r.slice(2),t.prefix="./"),r},t.wrapOutput=(e,t={},r={})=>{let s=`${r.contains?"":"^"}(?:${e})${r.contains?"":"$"}`;return!0===t.negated&&(s=`(?:^(?!${s}).*$)`),s}},1269:e=>{"use strict";class t{constructor(e={}){if(!(e.maxSize&&e.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");this.maxSize=e.maxSize,this.onEviction=e.onEviction,this.cache=new Map,this.oldCache=new Map,this._size=0}_set(e,t){if(this.cache.set(e,t),this._size++,this._size>=this.maxSize){if(this._size=0,"function"==typeof this.onEviction)for(const[e,t]of this.oldCache.entries())this.onEviction(e,t);this.oldCache=this.cache,this.cache=new Map}}get(e){if(this.cache.has(e))return this.cache.get(e);if(this.oldCache.has(e)){const t=this.oldCache.get(e);return this.oldCache.delete(e),this._set(e,t),t}}set(e,t){return this.cache.has(e)?this.cache.set(e,t):this._set(e,t),this}has(e){return this.cache.has(e)||this.oldCache.has(e)}peek(e){return this.cache.has(e)?this.cache.get(e):this.oldCache.has(e)?this.oldCache.get(e):void 0}delete(e){const t=this.cache.delete(e);return t&&this._size--,this.oldCache.delete(e)||t}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}*keys(){for(const[e]of this)yield e}*values(){for(const[,e]of this)yield e}*[Symbol.iterator](){for(const e of this.cache)yield e;for(const e of this.oldCache){const[t]=e;this.cache.has(t)||(yield e)}}get size(){let e=0;for(const t of this.oldCache.keys())this.cache.has(t)||e++;return Math.min(this._size+e,this.maxSize)}}e.exports=t},8356:(e,t,r)=>{"use strict";const s=r(7147),{Readable:n}=r(2781),o=r(1017),{promisify:i}=r(3837),a=r(9444),c=i(s.readdir),u=i(s.stat),h=i(s.lstat),l=i(s.realpath),d="READDIRP_RECURSIVE_ERROR",p=new Set(["ENOENT","EPERM","EACCES","ELOOP",d]),f="files",m="directories",y="files_directories",g="all",_=[f,m,y,g],[b,v]=process.versions.node.split(".").slice(0,2).map((e=>Number.parseInt(e,10))),w="win32"===process.platform&&(b>10||10===b&&v>=5),E=e=>{if(void 0!==e){if("function"==typeof e)return e;if("string"==typeof e){const t=a(e.trim());return e=>t(e.basename)}if(Array.isArray(e)){const t=[],r=[];for(const s of e){const e=s.trim();"!"===e.charAt(0)?r.push(a(e.slice(1))):t.push(a(e))}return r.length>0?t.length>0?e=>t.some((t=>t(e.basename)))&&!r.some((t=>t(e.basename))):e=>!r.some((t=>t(e.basename))):e=>t.some((t=>t(e.basename)))}}};class S extends n{static get defaultOptions(){return{root:".",fileFilter:e=>!0,directoryFilter:e=>!0,type:f,lstat:!1,depth:2147483648,alwaysStat:!1}}constructor(e={}){super({objectMode:!0,autoDestroy:!0,highWaterMark:e.highWaterMark||4096});const t={...S.defaultOptions,...e},{root:r,type:n}=t;this._fileFilter=E(t.fileFilter),this._directoryFilter=E(t.directoryFilter);const i=t.lstat?h:u;this._stat=w?e=>i(e,{bigint:!0}):i,this._maxDepth=t.depth,this._wantsDir=[m,y,g].includes(n),this._wantsFile=[f,y,g].includes(n),this._wantsEverything=n===g,this._root=o.resolve(r),this._isDirent="Dirent"in s&&!t.alwaysStat,this._statsProp=this._isDirent?"dirent":"stats",this._rdOptions={encoding:"utf8",withFileTypes:this._isDirent},this.parents=[this._exploreDir(r,1)],this.reading=!1,this.parent=void 0}async _read(e){if(!this.reading){this.reading=!0;try{for(;!this.destroyed&&e>0;){const{path:t,depth:r,files:s=[]}=this.parent||{};if(s.length>0){const n=s.splice(0,e).map((e=>this._formatEntry(e,t)));for(const t of await Promise.all(n)){if(this.destroyed)return;const s=await this._getEntryType(t);"directory"===s&&this._directoryFilter(t)?(r<=this._maxDepth&&this.parents.push(this._exploreDir(t.fullPath,r+1)),this._wantsDir&&(this.push(t),e--)):("file"===s||this._includeAsFile(t))&&this._fileFilter(t)&&this._wantsFile&&(this.push(t),e--)}}else{const e=this.parents.pop();if(!e){this.push(null);break}if(this.parent=await e,this.destroyed)return}}}catch(e){this.destroy(e)}finally{this.reading=!1}}}async _exploreDir(e,t){let r;try{r=await c(e,this._rdOptions)}catch(e){this._onError(e)}return{files:r,depth:t,path:e}}async _formatEntry(e,t){let r;try{const s=this._isDirent?e.name:e,n=o.resolve(o.join(t,s));r={path:o.relative(this._root,n),fullPath:n,basename:s},r[this._statsProp]=this._isDirent?e:await this._stat(n)}catch(e){this._onError(e)}return r}_onError(e){var t;t=e,p.has(t.code)&&!this.destroyed?this.emit("warn",e):this.destroy(e)}async _getEntryType(e){const t=e&&e[this._statsProp];if(t){if(t.isFile())return"file";if(t.isDirectory())return"directory";if(t&&t.isSymbolicLink()){const t=e.fullPath;try{const e=await l(t),r=await h(e);if(r.isFile())return"file";if(r.isDirectory()){const r=e.length;if(t.startsWith(e)&&t.substr(r,1)===o.sep){const r=new Error(`Circular symlink detected: "${t}" points to "${e}"`);return r.code=d,this._onError(r)}return"directory"}}catch(e){this._onError(e)}}}}_includeAsFile(e){const t=e&&e[this._statsProp];return t&&this._wantsEverything&&!t.isDirectory()}}const R=(e,t={})=>{let r=t.entryType||t.type;if("both"===r&&(r=y),r&&(t.type=r),!e)throw new Error("readdirp: root argument is required. Usage: readdirp(root, options)");if("string"!=typeof e)throw new TypeError("readdirp: root argument must be a string. Usage: readdirp(root, options)");if(r&&!_.includes(r))throw new Error(`readdirp: Invalid type passed. Use one of ${_.join(", ")}`);return t.root=e,new S(t)};R.promise=(e,t={})=>new Promise(((r,s)=>{const n=[];R(e,t).on("data",(e=>n.push(e))).on("end",(()=>r(n))).on("error",(e=>s(e)))})),R.ReaddirpStream=S,R.default=R,e.exports=R},5322:(e,t,r)=>{"use strict";const s=r(4404);e.exports=(e={},t=s.connect)=>new Promise(((r,s)=>{let n,o=!1;const i=async()=>{await c,n.off("timeout",a),n.off("error",s),e.resolveSocket?(r({alpnProtocol:n.alpnProtocol,socket:n,timeout:o}),o&&(await Promise.resolve(),n.emit("timeout"))):(n.destroy(),r({alpnProtocol:n.alpnProtocol,timeout:o}))},a=async()=>{o=!0,i()},c=(async()=>{try{n=await t(e,i),n.on("error",s),n.once("timeout",a)}catch(e){s(e)}})()}))},3607:function(e,t,r){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(2225),o=r(1017),i=s(r(7119)),a=s(r(6516)),c=s(r(2898));(new class{constructor(){this.params=this.getParams()}async run(){try{await this.remove(),await this.upload(),await this.purge()}catch(e){(0,n.setFailed)(e)}}getParams(){var e;const t={source:(0,n.getInput)("source"),storageZoneName:(0,n.getInput)("storageZoneName"),storageEndpoint:null!==(e=(0,n.getInput)("storageEndpoint"))&&void 0!==e?e:"storage.bunnycdn.com",storagePassword:(0,n.getInput)("storagePassword"),accessKey:(0,n.getInput)("accessKey"),pullZoneId:(0,n.getInput)("pullZoneId"),purgePullZoneFlag:(0,n.getInput)("purgePullZone"),removeFlag:(0,n.getInput)("remove"),uploadFlag:(0,n.getInput)("upload")};return t.source=(0,o.isAbsolute)(t.source)?this.params.source:(0,o.join)(process.env.GITHUB_WORKSPACE,this.params.source),t}async remove(){if("true"===this.params.removeFlag){if(!this.params.storageZoneName)throw new Error("Can't remove, storageZoneName was not set.");if(!this.params.storagePassword)throw new Error("Can't remove, storagePassword was not set.");(0,n.info)(`Deleting files from storage ${this.params.storageZoneName}`),await(0,c.default)(this.params.storageZoneName,this.params.storagePassword,this.params.storageEndpoint)}}async upload(){if("true"===this.params.uploadFlag){if(!this.params.source)throw new Error("Can't upload, source was not set.");if(!this.params.storageZoneName)throw new Error("Can't upload, storageZoneName was not set.");if(!this.params.storagePassword)throw new Error("Can't upload, storagePassword was not set.");this.params.storageZoneName&&this.params.storagePassword&&((0,n.info)(`Uploading ${this.params.source} folder/file to storage ${this.params.storageZoneName}`),await new i.default(this.params.source,this.params.storageZoneName,this.params.storagePassword,this.params.storageEndpoint).run())}}async purge(){if("true"==this.params.purgePullZoneFlag){if(!this.params.pullZoneId)throw new Error("Can't purge, pullZoneId was not set.");if(!this.params.accessKey)throw new Error("Can't upload, accessKey was not set.");this.params.pullZoneId&&this.params.accessKey&&((0,n.info)(`Purging pull zone with the id ${this.params.pullZoneId}`),await(0,a.default)(this.params.pullZoneId,this.params.accessKey))}}}).run()},6516:function(e,t,r){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=s(r(1916)),o=r(2225);t.default=async(e,t)=>{const r=await(0,n.default)(`https://api.bunny.net/pullzone/${e}/purgeCache`,{method:"POST",headers:{AccessKey:t}});if(204!==r.statusCode)throw new Error(`Purging failed with the status code ${r.statusCode}.`);return(0,o.info)("Cache successfully purged."),r}},2898:function(e,t,r){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(2225),o=s(r(1916));t.default=async(e,t,r)=>{const s=`https://${r}/${e}/`;(0,n.info)(`Removing storage data with ${s}`);const i=await(0,o.default)(s,{method:"DELETE",headers:{AccessKey:t}});if(200!==i.statusCode&&400!==i.statusCode)throw new Error(`Removing storage data failed with the status code ${i.statusCode}.`);return(0,n.info)("Storage data successfully removed."),i}},7119:function(e,t,r){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=s(r(7147)),o=s(r(8356)),i=r(2225),a=s(r(2291)),c=s(r(1916));t.default=class{constructor(e,t,r,s){this.path=e,this.storageName=t,this.storagePassword=r,this.storageEndpoint=s,this.queue=new a.default({concurrency:75})}async uploadFile(e){const t=n.default.createReadStream(e.fullPath);(0,i.info)(`Deploying ${e.path} by https://${this.storageEndpoint}/${this.storageName}/${e.path}`);const r=await(0,c.default)(`https://${this.storageEndpoint}/${this.storageName}/${e.path}`,{method:"PUT",headers:{AccessKey:this.storagePassword},body:t});if(201!==r.statusCode)throw new Error(`Uploading ${e.path} has failed width status code ${r.statusCode}.`);return(0,i.info)(`Successful deployment of ${e.path}.`),r}async run(){for await(const e of(0,o.default)(this.path))this.queue.add((()=>this.uploadFile(e)));await this.queue.onIdle()}}},6149:(e,t,r)=>{e.exports=r(5468)},5468:(e,t,r)=>{"use strict";r(1808);var s,n=r(4404),o=r(3685),i=r(5687),a=r(2361),c=(r(9491),r(3837));function u(e){var t=this;t.options=e||{},t.proxyOptions=t.options.proxy||{},t.maxSockets=t.options.maxSockets||o.Agent.defaultMaxSockets,t.requests=[],t.sockets=[],t.on("free",(function(e,r,s,n){for(var o=l(r,s,n),i=0,a=t.requests.length;i<a;++i){var c=t.requests[i];if(c.host===o.host&&c.port===o.port)return t.requests.splice(i,1),void c.request.onSocket(e)}e.destroy(),t.removeSocket(e)}))}function h(e,t){var r=this;u.prototype.createSocket.call(r,e,(function(s){var o=e.request.getHeader("host"),i=d({},r.options,{socket:s,servername:o?o.replace(/:.*$/,""):e.host}),a=n.connect(0,i);r.sockets[r.sockets.indexOf(s)]=a,t(a)}))}function l(e,t,r){return"string"==typeof e?{host:e,port:t,localAddress:r}:e}function d(e){for(var t=1,r=arguments.length;t<r;++t){var s=arguments[t];if("object"==typeof s)for(var n=Object.keys(s),o=0,i=n.length;o<i;++o){var a=n[o];void 0!==s[a]&&(e[a]=s[a])}}return e}t.httpOverHttp=function(e){var t=new u(e);return t.request=o.request,t},t.httpsOverHttp=function(e){var t=new u(e);return t.request=o.request,t.createSocket=h,t.defaultPort=443,t},t.httpOverHttps=function(e){var t=new u(e);return t.request=i.request,t},t.httpsOverHttps=function(e){var t=new u(e);return t.request=i.request,t.createSocket=h,t.defaultPort=443,t},c.inherits(u,a.EventEmitter),u.prototype.addRequest=function(e,t,r,s){var n=this,o=d({request:e},n.options,l(t,r,s));n.sockets.length>=this.maxSockets?n.requests.push(o):n.createSocket(o,(function(t){function r(){n.emit("free",t,o)}function s(e){n.removeSocket(t),t.removeListener("free",r),t.removeListener("close",s),t.removeListener("agentRemove",s)}t.on("free",r),t.on("close",s),t.on("agentRemove",s),e.onSocket(t)}))},u.prototype.createSocket=function(e,t){var r=this,n={};r.sockets.push(n);var o=d({},r.proxyOptions,{method:"CONNECT",path:e.host+":"+e.port,agent:!1,headers:{host:e.host+":"+e.port}});e.localAddress&&(o.localAddress=e.localAddress),o.proxyAuth&&(o.headers=o.headers||{},o.headers["Proxy-Authorization"]="Basic "+new Buffer(o.proxyAuth).toString("base64")),s("making CONNECT request");var i=r.request(o);function a(o,a,c){var u;return i.removeAllListeners(),a.removeAllListeners(),200!==o.statusCode?(s("tunneling socket could not be established, statusCode=%d",o.statusCode),a.destroy(),(u=new Error("tunneling socket could not be established, statusCode="+o.statusCode)).code="ECONNRESET",e.request.emit("error",u),void r.removeSocket(n)):c.length>0?(s("got illegal response body from proxy"),a.destroy(),(u=new Error("got illegal response body from proxy")).code="ECONNRESET",e.request.emit("error",u),void r.removeSocket(n)):(s("tunneling connection has established"),r.sockets[r.sockets.indexOf(n)]=a,t(a))}i.useChunkedEncodingByDefault=!1,i.once("response",(function(e){e.upgrade=!0})),i.once("upgrade",(function(e,t,r){process.nextTick((function(){a(e,t,r)}))})),i.once("connect",a),i.once("error",(function(t){i.removeAllListeners(),s("tunneling socket could not be established, cause=%s\n",t.message,t.stack);var o=new Error("tunneling socket could not be established, cause="+t.message);o.code="ECONNRESET",e.request.emit("error",o),r.removeSocket(n)})),i.end()},u.prototype.removeSocket=function(e){var t=this.sockets.indexOf(e);if(-1!==t){this.sockets.splice(t,1);var r=this.requests.shift();r&&this.createSocket(r,(function(e){r.request.onSocket(e)}))}},s=process.env.NODE_DEBUG&&/\btunnel\b/.test(process.env.NODE_DEBUG)?function(){var e=Array.prototype.slice.call(arguments);"string"==typeof e[0]?e[0]="TUNNEL: "+e[0]:e.unshift("TUNNEL:"),console.error.apply(console,e)}:function(){},t.debug=s},3021:(e,t,r)=>{"use strict";r.r(t),r.d(t,{NIL:()=>E,parse:()=>g,stringify:()=>l,v1:()=>y,v3:()=>b,v4:()=>v,v5:()=>w,validate:()=>u,version:()=>S});const s=require("crypto");var n=r.n(s);const o=new Uint8Array(256);let i=o.length;function a(){return i>o.length-16&&(n().randomFillSync(o),i=0),o.slice(i,i+=16)}const c=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,u=function(e){return"string"==typeof e&&c.test(e)},h=[];for(let e=0;e<256;++e)h.push((e+256).toString(16).substr(1));const l=function(e,t=0){const r=(h[e[t+0]]+h[e[t+1]]+h[e[t+2]]+h[e[t+3]]+"-"+h[e[t+4]]+h[e[t+5]]+"-"+h[e[t+6]]+h[e[t+7]]+"-"+h[e[t+8]]+h[e[t+9]]+"-"+h[e[t+10]]+h[e[t+11]]+h[e[t+12]]+h[e[t+13]]+h[e[t+14]]+h[e[t+15]]).toLowerCase();if(!u(r))throw TypeError("Stringified UUID is invalid");return r};let d,p,f=0,m=0;const y=function(e,t,r){let s=t&&r||0;const n=t||new Array(16);let o=(e=e||{}).node||d,i=void 0!==e.clockseq?e.clockseq:p;if(null==o||null==i){const t=e.random||(e.rng||a)();null==o&&(o=d=[1|t[0],t[1],t[2],t[3],t[4],t[5]]),null==i&&(i=p=16383&(t[6]<<8|t[7]))}let c=void 0!==e.msecs?e.msecs:Date.now(),u=void 0!==e.nsecs?e.nsecs:m+1;const h=c-f+(u-m)/1e4;if(h<0&&void 0===e.clockseq&&(i=i+1&16383),(h<0||c>f)&&void 0===e.nsecs&&(u=0),u>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");f=c,m=u,p=i,c+=122192928e5;const y=(1e4*(268435455&c)+u)%4294967296;n[s++]=y>>>24&255,n[s++]=y>>>16&255,n[s++]=y>>>8&255,n[s++]=255&y;const g=c/4294967296*1e4&268435455;n[s++]=g>>>8&255,n[s++]=255&g,n[s++]=g>>>24&15|16,n[s++]=g>>>16&255,n[s++]=i>>>8|128,n[s++]=255&i;for(let e=0;e<6;++e)n[s+e]=o[e];return t||l(n)},g=function(e){if(!u(e))throw TypeError("Invalid UUID");let t;const r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=255&t,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=255&t,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=255&t,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=255&t,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=255&t,r};function _(e,t,r){function s(e,s,n,o){if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));const t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}(e)),"string"==typeof s&&(s=g(s)),16!==s.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let i=new Uint8Array(16+e.length);if(i.set(s),i.set(e,s.length),i=r(i),i[6]=15&i[6]|t,i[8]=63&i[8]|128,n){o=o||0;for(let e=0;e<16;++e)n[o+e]=i[e];return n}return l(i)}try{s.name=e}catch(e){}return s.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",s.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",s}const b=_("v3",48,(function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),n().createHash("md5").update(e).digest()})),v=function(e,t,r){const s=(e=e||{}).random||(e.rng||a)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=s[e];return t}return l(s)},w=_("v5",80,(function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),n().createHash("sha1").update(e).digest()})),E="00000000-0000-0000-0000-000000000000",S=function(e){if(!u(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}},9491:e=>{"use strict";e.exports=require("assert")},4300:e=>{"use strict";e.exports=require("buffer")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5158:e=>{"use strict";e.exports=require("http2")},5687:e=>{"use strict";e.exports=require("https")},1808:e=>{"use strict";e.exports=require("net")},2037:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},4404:e=>{"use strict";e.exports=require("tls")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},1916:(e,t,r)=>{"use strict";r.r(t),r.d(t,{AbortError:()=>T,CacheError:()=>R,CancelError:()=>_t,HTTPError:()=>S,MaxRedirectsError:()=>E,Options:()=>ot,ParseError:()=>at,ReadError:()=>C,RequestError:()=>w,RetryError:()=>x,TimeoutError:()=>A,UploadError:()=>O,calculateRetryDelay:()=>He,create:()=>Ot,default:()=>xt,got:()=>Ct,isResponseOk:()=>it,parseBody:()=>ct,parseLinkHeader:()=>Ye});const s=["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"],n=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Blob","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","WeakRef","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","FormData","URLSearchParams","HTMLElement","NaN",...s],o=["null","undefined","string","number","bigint","boolean","symbol"];function i(e){return t=>typeof t===e}const{toString:a}=Object.prototype,c=e=>{const t=a.call(e).slice(8,-1);return/HTML\w+Element/.test(t)&&h.domElement(e)?"HTMLElement":(r=t,n.includes(r)?t:void 0);var r},u=e=>t=>c(t)===e;function h(e){if(null===e)return"null";switch(typeof e){case"undefined":return"undefined";case"string":return"string";case"number":return Number.isNaN(e)?"NaN":"number";case"boolean":return"boolean";case"function":return"Function";case"bigint":return"bigint";case"symbol":return"symbol"}if(h.observable(e))return"Observable";if(h.array(e))return"Array";if(h.buffer(e))return"Buffer";const t=c(e);if(t)return t;if(e instanceof String||e instanceof Boolean||e instanceof Number)throw new TypeError("Please don't use object wrappers for primitive types");return"Object"}h.undefined=i("undefined"),h.string=i("string");const l=i("number");h.number=e=>l(e)&&!h.nan(e),h.positiveNumber=e=>h.number(e)&&e>0,h.negativeNumber=e=>h.number(e)&&e<0,h.bigint=i("bigint"),h.function_=i("function"),h.null_=e=>null===e,h.class_=e=>h.function_(e)&&e.toString().startsWith("class "),h.boolean=e=>!0===e||!1===e,h.symbol=i("symbol"),h.numericString=e=>h.string(e)&&!h.emptyStringOrWhitespace(e)&&!Number.isNaN(Number(e)),h.array=(e,t)=>!!Array.isArray(e)&&(!h.function_(t)||e.every((e=>t(e)))),h.buffer=e=>e?.constructor?.isBuffer?.(e)??!1,h.blob=e=>u("Blob")(e),h.nullOrUndefined=e=>h.null_(e)||h.undefined(e),h.object=e=>!h.null_(e)&&("object"==typeof e||h.function_(e)),h.iterable=e=>h.function_(e?.[Symbol.iterator]),h.asyncIterable=e=>h.function_(e?.[Symbol.asyncIterator]),h.generator=e=>h.iterable(e)&&h.function_(e?.next)&&h.function_(e?.throw),h.asyncGenerator=e=>h.asyncIterable(e)&&h.function_(e.next)&&h.function_(e.throw),h.nativePromise=e=>u("Promise")(e),h.promise=e=>h.nativePromise(e)||(e=>h.function_(e?.then)&&h.function_(e?.catch))(e),h.generatorFunction=u("GeneratorFunction"),h.asyncGeneratorFunction=e=>"AsyncGeneratorFunction"===c(e),h.asyncFunction=e=>"AsyncFunction"===c(e),h.boundFunction=e=>h.function_(e)&&!e.hasOwnProperty("prototype"),h.regExp=u("RegExp"),h.date=u("Date"),h.error=u("Error"),h.map=e=>u("Map")(e),h.set=e=>u("Set")(e),h.weakMap=e=>u("WeakMap")(e),h.weakSet=e=>u("WeakSet")(e),h.weakRef=e=>u("WeakRef")(e),h.int8Array=u("Int8Array"),h.uint8Array=u("Uint8Array"),h.uint8ClampedArray=u("Uint8ClampedArray"),h.int16Array=u("Int16Array"),h.uint16Array=u("Uint16Array"),h.int32Array=u("Int32Array"),h.uint32Array=u("Uint32Array"),h.float32Array=u("Float32Array"),h.float64Array=u("Float64Array"),h.bigInt64Array=u("BigInt64Array"),h.bigUint64Array=u("BigUint64Array"),h.arrayBuffer=u("ArrayBuffer"),h.sharedArrayBuffer=u("SharedArrayBuffer"),h.dataView=u("DataView"),h.enumCase=(e,t)=>Object.values(t).includes(e),h.directInstanceOf=(e,t)=>Object.getPrototypeOf(e)===t.prototype,h.urlInstance=e=>u("URL")(e),h.urlString=e=>{if(!h.string(e))return!1;try{return new URL(e),!0}catch{return!1}},h.truthy=e=>Boolean(e),h.falsy=e=>!e,h.nan=e=>Number.isNaN(e),h.primitive=e=>{return h.null_(e)||(t=typeof e,o.includes(t));var t},h.integer=e=>Number.isInteger(e),h.safeInteger=e=>Number.isSafeInteger(e),h.plainObject=e=>{if("object"!=typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)},h.typedArray=e=>{return t=c(e),s.includes(t);var t},h.arrayLike=e=>!h.nullOrUndefined(e)&&!h.function_(e)&&(e=>h.safeInteger(e)&&e>=0)(e.length),h.tupleLike=(e,t)=>!(!h.array(t)||!h.array(e)||t.length!==e.length)&&t.every(((t,r)=>t(e[r]))),h.inRange=(e,t)=>{if(h.number(t))return e>=Math.min(0,t)&&e<=Math.max(t,0);if(h.array(t)&&2===t.length)return e>=Math.min(...t)&&e<=Math.max(...t);throw new TypeError(`Invalid range: ${JSON.stringify(t)}`)};const d=["innerHTML","ownerDocument","style","attributes","nodeValue"];h.domElement=e=>h.object(e)&&1===e.nodeType&&h.string(e.nodeName)&&!h.plainObject(e)&&d.every((t=>t in e)),h.observable=e=>!!e&&(e===e[Symbol.observable]?.()||e===e["@@observable"]?.()),h.nodeStream=e=>h.object(e)&&h.function_(e.pipe)&&!h.observable(e),h.infinite=e=>e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY;const p=e=>t=>h.integer(t)&&Math.abs(t%2)===e;h.evenInteger=p(0),h.oddInteger=p(1),h.emptyArray=e=>h.array(e)&&0===e.length,h.nonEmptyArray=e=>h.array(e)&&e.length>0,h.emptyString=e=>h.string(e)&&0===e.length,h.emptyStringOrWhitespace=e=>h.emptyString(e)||(e=>h.string(e)&&!/\S/.test(e))(e),h.nonEmptyString=e=>h.string(e)&&e.length>0,h.nonEmptyStringAndNotWhitespace=e=>h.string(e)&&!h.emptyStringOrWhitespace(e),h.emptyObject=e=>h.object(e)&&!h.map(e)&&!h.set(e)&&0===Object.keys(e).length,h.nonEmptyObject=e=>h.object(e)&&!h.map(e)&&!h.set(e)&&Object.keys(e).length>0,h.emptySet=e=>h.set(e)&&0===e.size,h.nonEmptySet=e=>h.set(e)&&e.size>0,h.emptyMap=e=>h.map(e)&&0===e.size,h.nonEmptyMap=e=>h.map(e)&&e.size>0,h.propertyKey=e=>h.any([h.string,h.number,h.symbol],e),h.formData=e=>u("FormData")(e),h.urlSearchParams=e=>u("URLSearchParams")(e);const f=(e,t,r)=>{if(!h.function_(t))throw new TypeError(`Invalid predicate: ${JSON.stringify(t)}`);if(0===r.length)throw new TypeError("Invalid number of values");return e.call(r,t)};h.any=(e,...t)=>(h.array(e)?e:[e]).some((e=>f(Array.prototype.some,e,t))),h.all=(e,...t)=>f(Array.prototype.every,e,t);const m=(e,t,r,s={})=>{if(!e){const{multipleValues:e}=s,n=e?`received values of types ${[...new Set(r.map((e=>`\`${h(e)}\``)))].join(", ")}`:`received value of type \`${h(r)}\``;throw new TypeError(`Expected value which is \`${t}\`, ${n}.`)}},y={undefined:e=>m(h.undefined(e),"undefined",e),string:e=>m(h.string(e),"string",e),number:e=>m(h.number(e),"number",e),positiveNumber:e=>m(h.positiveNumber(e),"positive number",e),negativeNumber:e=>m(h.negativeNumber(e),"negative number",e),bigint:e=>m(h.bigint(e),"bigint",e),function_:e=>m(h.function_(e),"Function",e),null_:e=>m(h.null_(e),"null",e),class_:e=>m(h.class_(e),"Class",e),boolean:e=>m(h.boolean(e),"boolean",e),symbol:e=>m(h.symbol(e),"symbol",e),numericString:e=>m(h.numericString(e),"string with a number",e),array:(e,t)=>{m(h.array(e),"Array",e),t&&e.forEach(t)},buffer:e=>m(h.buffer(e),"Buffer",e),blob:e=>m(h.blob(e),"Blob",e),nullOrUndefined:e=>m(h.nullOrUndefined(e),"null or undefined",e),object:e=>m(h.object(e),"Object",e),iterable:e=>m(h.iterable(e),"Iterable",e),asyncIterable:e=>m(h.asyncIterable(e),"AsyncIterable",e),generator:e=>m(h.generator(e),"Generator",e),asyncGenerator:e=>m(h.asyncGenerator(e),"AsyncGenerator",e),nativePromise:e=>m(h.nativePromise(e),"native Promise",e),promise:e=>m(h.promise(e),"Promise",e),generatorFunction:e=>m(h.generatorFunction(e),"GeneratorFunction",e),asyncGeneratorFunction:e=>m(h.asyncGeneratorFunction(e),"AsyncGeneratorFunction",e),asyncFunction:e=>m(h.asyncFunction(e),"AsyncFunction",e),boundFunction:e=>m(h.boundFunction(e),"Function",e),regExp:e=>m(h.regExp(e),"RegExp",e),date:e=>m(h.date(e),"Date",e),error:e=>m(h.error(e),"Error",e),map:e=>m(h.map(e),"Map",e),set:e=>m(h.set(e),"Set",e),weakMap:e=>m(h.weakMap(e),"WeakMap",e),weakSet:e=>m(h.weakSet(e),"WeakSet",e),weakRef:e=>m(h.weakRef(e),"WeakRef",e),int8Array:e=>m(h.int8Array(e),"Int8Array",e),uint8Array:e=>m(h.uint8Array(e),"Uint8Array",e),uint8ClampedArray:e=>m(h.uint8ClampedArray(e),"Uint8ClampedArray",e),int16Array:e=>m(h.int16Array(e),"Int16Array",e),uint16Array:e=>m(h.uint16Array(e),"Uint16Array",e),int32Array:e=>m(h.int32Array(e),"Int32Array",e),uint32Array:e=>m(h.uint32Array(e),"Uint32Array",e),float32Array:e=>m(h.float32Array(e),"Float32Array",e),float64Array:e=>m(h.float64Array(e),"Float64Array",e),bigInt64Array:e=>m(h.bigInt64Array(e),"BigInt64Array",e),bigUint64Array:e=>m(h.bigUint64Array(e),"BigUint64Array",e),arrayBuffer:e=>m(h.arrayBuffer(e),"ArrayBuffer",e),sharedArrayBuffer:e=>m(h.sharedArrayBuffer(e),"SharedArrayBuffer",e),dataView:e=>m(h.dataView(e),"DataView",e),enumCase:(e,t)=>m(h.enumCase(e,t),"EnumCase",e),urlInstance:e=>m(h.urlInstance(e),"URL",e),urlString:e=>m(h.urlString(e),"string with a URL",e),truthy:e=>m(h.truthy(e),"truthy",e),falsy:e=>m(h.falsy(e),"falsy",e),nan:e=>m(h.nan(e),"NaN",e),primitive:e=>m(h.primitive(e),"primitive",e),integer:e=>m(h.integer(e),"integer",e),safeInteger:e=>m(h.safeInteger(e),"integer",e),plainObject:e=>m(h.plainObject(e),"plain object",e),typedArray:e=>m(h.typedArray(e),"TypedArray",e),arrayLike:e=>m(h.arrayLike(e),"array-like",e),tupleLike:(e,t)=>m(h.tupleLike(e,t),"tuple-like",e),domElement:e=>m(h.domElement(e),"HTMLElement",e),observable:e=>m(h.observable(e),"Observable",e),nodeStream:e=>m(h.nodeStream(e),"Node.js Stream",e),infinite:e=>m(h.infinite(e),"infinite number",e),emptyArray:e=>m(h.emptyArray(e),"empty array",e),nonEmptyArray:e=>m(h.nonEmptyArray(e),"non-empty array",e),emptyString:e=>m(h.emptyString(e),"empty string",e),emptyStringOrWhitespace:e=>m(h.emptyStringOrWhitespace(e),"empty string or whitespace",e),nonEmptyString:e=>m(h.nonEmptyString(e),"non-empty string",e),nonEmptyStringAndNotWhitespace:e=>m(h.nonEmptyStringAndNotWhitespace(e),"non-empty string and not whitespace",e),emptyObject:e=>m(h.emptyObject(e),"empty object",e),nonEmptyObject:e=>m(h.nonEmptyObject(e),"non-empty object",e),emptySet:e=>m(h.emptySet(e),"empty set",e),nonEmptySet:e=>m(h.nonEmptySet(e),"non-empty set",e),emptyMap:e=>m(h.emptyMap(e),"empty map",e),nonEmptyMap:e=>m(h.nonEmptyMap(e),"non-empty map",e),propertyKey:e=>m(h.propertyKey(e),"PropertyKey",e),formData:e=>m(h.formData(e),"FormData",e),urlSearchParams:e=>m(h.urlSearchParams(e),"URLSearchParams",e),evenInteger:e=>m(h.evenInteger(e),"even integer",e),oddInteger:e=>m(h.oddInteger(e),"odd integer",e),directInstanceOf:(e,t)=>m(h.directInstanceOf(e,t),"T",e),inRange:(e,t)=>m(h.inRange(e,t),"in range",e),any:(e,...t)=>m(h.any(e,...t),"predicate returns truthy for any value",t,{multipleValues:!0}),all:(e,...t)=>m(h.all(e,...t),"predicate returns truthy for all values",t,{multipleValues:!0})};Object.defineProperties(h,{class:{value:h.class_},function:{value:h.function_},null:{value:h.null_}}),Object.defineProperties(y,{class:{value:y.class_},function:{value:y.function_},null:{value:y.null_}});const g=h,_=require("node:events");class b extends Error{constructor(e){super(e||"Promise was canceled"),this.name="CancelError"}get isCanceled(){return!0}}class v{static fn(e){return(...t)=>new v(((r,s,n)=>{t.push(n),e(...t).then(r,s)}))}constructor(e){this._cancelHandlers=[],this._isPending=!0,this._isCanceled=!1,this._rejectOnCancel=!0,this._promise=new Promise(((t,r)=>{this._reject=r;const s=e=>{if(!this._isPending)throw new Error("The `onCancel` handler was attached after the promise settled.");this._cancelHandlers.push(e)};Object.defineProperties(s,{shouldReject:{get:()=>this._rejectOnCancel,set:e=>{this._rejectOnCancel=e}}}),e((e=>{this._isCanceled&&s.shouldReject||(this._isPending=!1,t(e))}),(e=>{this._isPending=!1,r(e)}),s)}))}then(e,t){return this._promise.then(e,t)}catch(e){return this._promise.catch(e)}finally(e){return this._promise.finally(e)}cancel(e){if(this._isPending&&!this._isCanceled){if(this._isCanceled=!0,this._cancelHandlers.length>0)try{for(const e of this._cancelHandlers)e()}catch(e){return void this._reject(e)}this._rejectOnCancel&&this._reject(new b(e))}}get isCanceled(){return this._isCanceled}}Object.setPrototypeOf(v.prototype,Promise.prototype);class w extends Error{constructor(e,t,r){var s;if(super(e),Object.defineProperty(this,"input",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stack",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"response",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"request",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Error.captureStackTrace(this,this.constructor),this.name="RequestError",this.code=t.code??"ERR_GOT_REQUEST_ERROR",this.input=t.input,s=r,g.object(s)&&"_onResponse"in s?(Object.defineProperty(this,"request",{enumerable:!1,value:r}),Object.defineProperty(this,"response",{enumerable:!1,value:r.response}),this.options=r.options):this.options=r,this.timings=this.request?.timings,g.string(t.stack)&&g.string(this.stack)){const e=this.stack.indexOf(this.message)+this.message.length,r=this.stack.slice(e).split("\n").reverse(),s=t.stack.slice(t.stack.indexOf(t.message)+t.message.length).split("\n").reverse();for(;s.length>0&&s[0]===r[0];)r.shift();this.stack=`${this.stack.slice(0,e)}${r.reverse().join("\n")}${s.reverse().join("\n")}`}}}class E extends w{constructor(e){super(`Redirected ${e.options.maxRedirects} times. Aborting.`,{},e),this.name="MaxRedirectsError",this.code="ERR_TOO_MANY_REDIRECTS"}}class S extends w{constructor(e){super(`Response code ${e.statusCode} (${e.statusMessage})`,{},e.request),this.name="HTTPError",this.code="ERR_NON_2XX_3XX_RESPONSE"}}class R extends w{constructor(e,t){super(e.message,e,t),this.name="CacheError",this.code="ERR_GOT_REQUEST_ERROR"===this.code?"ERR_CACHE_ACCESS":this.code}}class O extends w{constructor(e,t){super(e.message,e,t),this.name="UploadError",this.code="ERR_GOT_REQUEST_ERROR"===this.code?"ERR_UPLOAD":this.code}}class A extends w{constructor(e,t,r){super(e.message,e,r),Object.defineProperty(this,"timings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"event",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="TimeoutError",this.event=e.event,this.timings=t}}class C extends w{constructor(e,t){super(e.message,e,t),this.name="ReadError",this.code="ERR_GOT_REQUEST_ERROR"===this.code?"ERR_READING_RESPONSE_STREAM":this.code}}class x extends w{constructor(e){super("Retrying",{},e),this.name="RetryError",this.code="ERR_RETRYING"}}class T extends w{constructor(e){super("This operation was aborted.",{},e),this.code="ERR_ABORTED",this.name="AbortError"}}const k=require("node:process"),P=require("node:buffer"),H=require("node:stream"),j=require("node:http");var L=r(2361),$=r(3837),I=r(1313);const N=require("node:url"),q=require("node:crypto"),U=(e,t)=>t.some((t=>t instanceof RegExp?t.test(e):t===e)),D=new Set(["https:","http:","file:"]);var M=r(31),B=r(6214);function z(e){return Object.fromEntries(Object.entries(e).map((([e,t])=>[e.toLowerCase(),t])))}class F extends H.Readable{statusCode;headers;body;url;constructor({statusCode:e,headers:t,body:r,url:s}){if("number"!=typeof e)throw new TypeError("Argument `statusCode` should be a number");if("object"!=typeof t)throw new TypeError("Argument `headers` should be an object");if(!(r instanceof Uint8Array))throw new TypeError("Argument `body` should be a buffer");if("string"!=typeof s)throw new TypeError("Argument `url` should be a string");super({read(){this.push(r),this.push(null)}}),this.statusCode=e,this.headers=z(t),this.body=r,this.url=s}}var G=r(4958);const W=["aborted","complete","headers","httpVersion","httpVersionMinor","httpVersionMajor","method","rawHeaders","rawTrailers","setTimeout","socket","statusCode","statusMessage","trailers","url"];class V extends Error{constructor(e){super(e.message),Object.assign(this,e)}}class K extends Error{constructor(e){super(e.message),Object.assign(this,e)}}const J=Object.entries,Q=e=>{const t={...e};return t.path=`${e.pathname||"/"}${e.search||""}`,delete t.pathname,delete t.search,t},Y=e=>({protocol:e.protocol,auth:e.auth,hostname:e.hostname||e.host||"localhost",port:e.port,pathname:e.pathname,search:e.search}),X=e=>{const t=[];for(const r of Object.keys(e))t[r.toLowerCase()]=e[r];return t};var Z=r(346);const ee=e=>"function"==typeof e,te=e=>Boolean(e&&ee(e.constructor)&&"FormData"===e[Symbol.toStringTag]&&ee(e.append)&&ee(e.getAll)&&ee(e.entries)&&ee(e[Symbol.iterator])),re=e=>{if(ee(e[Symbol.asyncIterator]))return e;if(ee(e.getReader))return async function*(e){const t=e.getReader();for(;;){const{done:e,value:r}=await t.read();if(e)break;yield r}}(e);throw new TypeError("Unsupported data source: Expected either ReadableStream or async iterable.")},se="abcdefghijklmnopqrstuvwxyz0123456789",ne=e=>String(e).replace(/\r|\n/g,((e,t,r)=>"\r"===e&&"\n"!==r[t+1]||"\n"===e&&"\r"!==r[t-1]?"\r\n":e));function oe(e){if("object"!==(e=>Object.prototype.toString.call(e).slice(8,-1).toLowerCase())(e))return!1;const t=Object.getPrototypeOf(e);return null==t||(t.constructor&&t.constructor.toString())===Object.toString()}function ie(e,t){if("string"==typeof t)for(const[r,s]of Object.entries(e))if(t.toLowerCase()===r.toLowerCase())return s}const ae=e=>String(e).replace(/\r/g,"%0D").replace(/\n/g,"%0A").replace(/"/g,"%22"),ce=e=>Boolean(e&&"object"==typeof e&&ee(e.constructor)&&"File"===e[Symbol.toStringTag]&&ee(e.stream)&&null!=e.name);var ue,he,le,de,pe,fe,me,ye,ge,_e,be,ve=function(e,t,r,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(e,r):n?n.value=r:t.set(e,r),r},we=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};const Ee={enableAdditionalHeaders:!1},Se={writable:!1,configurable:!1};class Re{constructor(e,t,r){if(ue.add(this),he.set(this,"\r\n"),le.set(this,void 0),de.set(this,void 0),pe.set(this,"-".repeat(2)),fe.set(this,new TextEncoder),me.set(this,void 0),ye.set(this,void 0),ge.set(this,void 0),!te(e))throw new TypeError("Expected first argument to be a FormData instance.");let s;if(oe(t)?r=t:s=t,s||(s=function(){let e=16,t="";for(;e--;)t+=se[Math.random()*se.length<<0];return t}()),"string"!=typeof s)throw new TypeError("Expected boundary argument to be a string.");if(r&&!oe(r))throw new TypeError("Expected options argument to be an object.");ve(this,ye,Array.from(e.entries()),"f"),ve(this,ge,{...Ee,...r},"f"),ve(this,le,we(this,fe,"f").encode(we(this,he,"f")),"f"),ve(this,de,we(this,le,"f").byteLength,"f"),this.boundary=`form-data-boundary-${s}`,this.contentType=`multipart/form-data; boundary=${this.boundary}`,ve(this,me,we(this,fe,"f").encode(`${we(this,pe,"f")}${this.boundary}${we(this,pe,"f")}${we(this,he,"f").repeat(2)}`),"f");const n={"Content-Type":this.contentType},o=we(this,ue,"m",be).call(this);var i;o&&(this.contentLength=o,n["Content-Length"]=o),this.headers=(i=Object.freeze(n),new Proxy(i,{get:(e,t)=>ie(e,t),has:(e,t)=>void 0!==ie(e,t)})),Object.defineProperties(this,{boundary:Se,contentType:Se,contentLength:Se,headers:Se})}getContentLength(){return null==this.contentLength?void 0:Number(this.contentLength)}*values(){for(const[e,t]of we(this,ye,"f")){const r=ce(t)?t:we(this,fe,"f").encode(ne(t));yield we(this,ue,"m",_e).call(this,e,r),yield r,yield we(this,le,"f")}yield we(this,me,"f")}async*encode(){for(const e of this.values())ce(e)?yield*re(e.stream()):yield e}[(he=new WeakMap,le=new WeakMap,de=new WeakMap,pe=new WeakMap,fe=new WeakMap,me=new WeakMap,ye=new WeakMap,ge=new WeakMap,ue=new WeakSet,_e=function(e,t){let r="";r+=`${we(this,pe,"f")}${this.boundary}${we(this,he,"f")}`,r+=`Content-Disposition: form-data; name="${ae(e)}"`,ce(t)&&(r+=`; filename="${ae(t.name)}"${we(this,he,"f")}`,r+=`Content-Type: ${t.type||"application/octet-stream"}`);const s=ce(t)?t.size:t.byteLength;return!0!==we(this,ge,"f").enableAdditionalHeaders||null==s||isNaN(s)||(r+=`${we(this,he,"f")}Content-Length: ${ce(t)?t.size:t.byteLength}`),we(this,fe,"f").encode(`${r}${we(this,he,"f").repeat(2)}`)},be=function(){let e=0;for(const[t,r]of we(this,ye,"f")){const s=ce(r)?r:we(this,fe,"f").encode(ne(r)),n=ce(s)?s.size:s.byteLength;if(null==n||isNaN(n))return;e+=we(this,ue,"m",_e).call(this,t,s).byteLength,e+=n,e+=we(this,de,"f")}return String(e+we(this,me,"f").byteLength)},Symbol.iterator)](){return this.values()}[Symbol.asyncIterator](){return this.encode()}}const Oe=require("node:util");function Ae(e){return g.nodeStream(e)&&g.function_(e.getBoundary)}function Ce(e,t,r){const s={};for(const n of r){const r=(...e)=>{t.emit(n,...e)};s[n]=r,e.on(n,r)}return()=>{for(const[t,r]of Object.entries(s))e.off(t,r)}}const xe=require("node:net"),Te=Symbol("reentry"),ke=()=>{};class Pe extends Error{constructor(e,t){super(`Timeout awaiting '${t}' for ${e}ms`),Object.defineProperty(this,"event",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="TimeoutError",this.code="ETIMEDOUT"}}const He=({attemptCount:e,retryOptions:t,error:r,retryAfter:s,computedValue:n})=>{if("RetryError"===r.name)return 1;if(e>t.limit)return 0;const o=t.methods.includes(r.options.method),i=t.errorCodes.includes(r.code),a=r.response&&t.statusCodes.includes(r.response.statusCode);if(!o||!i&&!a)return 0;if(r.response){if(s)return s>n?0:s;if(413===r.response.statusCode)return 0}const c=Math.random()*t.noise;return Math.min(2**(e-1)*1e3,t.backoffLimit)+c},je=require("node:tls"),Le=require("node:https"),$e=require("node:dns"),Ie=require("node:os"),{Resolver:Ne}=$e.promises,qe=Symbol("cacheableLookupCreateConnection"),Ue=Symbol("cacheableLookupInstance"),De=Symbol("expires"),Me="number"==typeof $e.ALL,Be=e=>{if(!e||"function"!=typeof e.createConnection)throw new Error("Expected an Agent instance as the first argument")},ze=()=>{let e=!1,t=!1;for(const r of Object.values(Ie.networkInterfaces()))for(const s of r)if(!s.internal&&("IPv6"===s.family?t=!0:e=!0,e&&t))return{has4:e,has6:t};return{has4:e,has6:t}},Fe=e=>e.catch((e=>{if("ENODATA"===e.code||"ENOTFOUND"===e.code||"ENOENT"===e.code)return[];throw e})),Ge={ttl:!0},We={all:!0},Ve={all:!0,family:4},Ke={all:!0,family:6};class Je{constructor({cache:e=new Map,maxTtl:t=1/0,fallbackDuration:r=3600,errorTtl:s=.15,resolver:n=new Ne,lookup:o=$e.lookup}={}){if(this.maxTtl=t,this.errorTtl=s,this._cache=e,this._resolver=n,this._dnsLookup=o&&(0,Oe.promisify)(o),this.stats={cache:0,query:0},this._resolver instanceof Ne?(this._resolve4=this._resolver.resolve4.bind(this._resolver),this._resolve6=this._resolver.resolve6.bind(this._resolver)):(this._resolve4=(0,Oe.promisify)(this._resolver.resolve4.bind(this._resolver)),this._resolve6=(0,Oe.promisify)(this._resolver.resolve6.bind(this._resolver))),this._iface=ze(),this._pending={},this._nextRemovalTime=!1,this._hostnamesToFallback=new Set,this.fallbackDuration=r,r>0){const e=setInterval((()=>{this._hostnamesToFallback.clear()}),1e3*r);e.unref&&e.unref(),this._fallbackInterval=e}this.lookup=this.lookup.bind(this),this.lookupAsync=this.lookupAsync.bind(this)}set servers(e){this.clear(),this._resolver.setServers(e)}get servers(){return this._resolver.getServers()}lookup(e,t,r){if("function"==typeof t?(r=t,t={}):"number"==typeof t&&(t={family:t}),!r)throw new Error("Callback must be a function.");this.lookupAsync(e,t).then((e=>{t.all?r(null,e):r(null,e.address,e.family,e.expires,e.ttl,e.source)}),r)}async lookupAsync(e,t={}){"number"==typeof t&&(t={family:t});let r=await this.query(e);if(6===t.family){const e=r.filter((e=>6===e.family));t.hints&$e.V4MAPPED&&(Me&&t.hints&$e.ALL||0===e.length)?(e=>{for(const t of e)6!==t.family&&(t.address=`::ffff:${t.address}`,t.family=6)})(r):r=e}else 4===t.family&&(r=r.filter((e=>4===e.family)));if(t.hints&$e.ADDRCONFIG){const{_iface:e}=this;r=r.filter((t=>6===t.family?e.has6:e.has4))}if(0===r.length){const t=new Error(`cacheableLookup ENOTFOUND ${e}`);throw t.code="ENOTFOUND",t.hostname=e,t}return t.all?r:r[0]}async query(e){let t="cache",r=await this._cache.get(e);if(r&&this.stats.cache++,!r){const s=this._pending[e];if(s)this.stats.cache++,r=await s;else{t="query";const s=this.queryAndCache(e);this._pending[e]=s,this.stats.query++;try{r=await s}finally{delete this._pending[e]}}}return r=r.map((e=>({...e,source:t}))),r}async _resolve(e){const[t,r]=await Promise.all([Fe(this._resolve4(e,Ge)),Fe(this._resolve6(e,Ge))]);let s=0,n=0,o=0;const i=Date.now();for(const e of t)e.family=4,e.expires=i+1e3*e.ttl,s=Math.max(s,e.ttl);for(const e of r)e.family=6,e.expires=i+1e3*e.ttl,n=Math.max(n,e.ttl);return o=t.length>0?r.length>0?Math.min(s,n):s:n,{entries:[...t,...r],cacheTtl:o}}async _lookup(e){try{const[t,r]=await Promise.all([Fe(this._dnsLookup(e,Ve)),Fe(this._dnsLookup(e,Ke))]);return{entries:[...t,...r],cacheTtl:0}}catch{return{entries:[],cacheTtl:0}}}async _set(e,t,r){if(this.maxTtl>0&&r>0){r=1e3*Math.min(r,this.maxTtl),t[De]=Date.now()+r;try{await this._cache.set(e,t,r)}catch(e){this.lookupAsync=async()=>{const t=new Error("Cache Error. Please recreate the CacheableLookup instance.");throw t.cause=e,t}}s=this._cache,Symbol.iterator in s&&this._tick(r)}var s}async queryAndCache(e){if(this._hostnamesToFallback.has(e))return this._dnsLookup(e,We);let t=await this._resolve(e);0===t.entries.length&&this._dnsLookup&&(t=await this._lookup(e),0!==t.entries.length&&this.fallbackDuration>0&&this._hostnamesToFallback.add(e));const r=0===t.entries.length?this.errorTtl:t.cacheTtl;return await this._set(e,t.entries,r),t.entries}_tick(e){const t=this._nextRemovalTime;(!t||e<t)&&(clearTimeout(this._removalTimeout),this._nextRemovalTime=e,this._removalTimeout=setTimeout((()=>{this._nextRemovalTime=!1;let e=1/0;const t=Date.now();for(const[r,s]of this._cache){const n=s[De];t>=n?this._cache.delete(r):n<e&&(e=n)}e!==1/0&&this._tick(e-t)}),e),this._removalTimeout.unref&&this._removalTimeout.unref())}install(e){if(Be(e),qe in e)throw new Error("CacheableLookup has been already installed");e[qe]=e.createConnection,e[Ue]=this,e.createConnection=(t,r)=>("lookup"in t||(t.lookup=this.lookup),e[qe](t,r))}uninstall(e){if(Be(e),e[qe]){if(e[Ue]!==this)throw new Error("The agent is not owned by this CacheableLookup instance");e.createConnection=e[qe],delete e[qe],delete e[Ue]}}updateInterfaceInfo(){const{_iface:e}=this;this._iface=ze(),(e.has4&&!this._iface.has4||e.has6&&!this._iface.has6)&&this._cache.clear()}clear(e){e?this._cache.delete(e):this._cache.clear()}}var Qe=r(9758);function Ye(e){const t=[],r=e.split(",");for(const s of r){const[r,...n]=s.split(";"),o=r.trim();if("<"!==o[0]||">"!==o[o.length-1])throw new Error(`Invalid format of the Link header reference: ${o}`);const i=o.slice(1,-1),a={};if(0===n.length)throw new Error(`Unexpected end of Link header parameters: ${n.join(";")}`);for(const t of n){const r=t.trim(),s=r.indexOf("=");if(-1===s)throw new Error(`Failed to parse Link header: ${e}`);const n=r.slice(0,s).trim(),o=r.slice(s+1).trim();a[n]=o}t.push({reference:i,parameters:a})}return t}const[Xe,Ze]=k.versions.node.split(".").map(Number),et=new Map;let tt;const rt={request:void 0,agent:{http:void 0,https:void 0,http2:void 0},h2session:void 0,decompress:!0,timeout:{connect:void 0,lookup:void 0,read:void 0,request:void 0,response:void 0,secureConnect:void 0,send:void 0,socket:void 0},prefixUrl:"",body:void 0,form:void 0,json:void 0,cookieJar:void 0,ignoreInvalidCookies:!1,searchParams:void 0,dnsLookup:void 0,dnsCache:void 0,context:{},hooks:{init:[],beforeRequest:[],beforeError:[],beforeRedirect:[],beforeRetry:[],afterResponse:[]},followRedirect:!0,maxRedirects:10,cache:void 0,throwHttpErrors:!0,username:"",password:"",http2:!1,allowGetBody:!1,headers:{"user-agent":"got (https://github.com/sindresorhus/got)"},methodRewriting:!1,dnsLookupIpVersion:void 0,parseJson:JSON.parse,stringifyJson:JSON.stringify,retry:{limit:2,methods:["GET","PUT","HEAD","DELETE","OPTIONS","TRACE"],statusCodes:[408,413,429,500,502,503,504,521,522,524],errorCodes:["ETIMEDOUT","ECONNRESET","EADDRINUSE","ECONNREFUSED","EPIPE","ENOTFOUND","ENETUNREACH","EAI_AGAIN"],maxRetryAfter:void 0,calculateDelay:({computedValue:e})=>e,backoffLimit:Number.POSITIVE_INFINITY,noise:100},localAddress:void 0,method:"GET",createConnection:void 0,cacheOptions:{shared:void 0,cacheHeuristic:void 0,immutableMinTimeToLive:void 0,ignoreCargoCult:void 0},https:{alpnProtocols:void 0,rejectUnauthorized:void 0,checkServerIdentity:void 0,certificateAuthority:void 0,key:void 0,certificate:void 0,passphrase:void 0,pfx:void 0,ciphers:void 0,honorCipherOrder:void 0,minVersion:void 0,maxVersion:void 0,signatureAlgorithms:void 0,tlsSessionLifetime:void 0,dhparam:void 0,ecdhCurve:void 0,certificateRevocationLists:void 0},encoding:void 0,resolveBodyOnly:!1,isStream:!1,responseType:"text",url:void 0,pagination:{transform:e=>"json"===e.request.options.responseType?e.body:JSON.parse(e.body),paginate({response:e}){const t=e.headers.link;if("string"!=typeof t||""===t.trim())return!1;const r=Ye(t).find((e=>"next"===e.parameters.rel||'"next"'===e.parameters.rel));return!!r&&{url:new URL(r.reference,e.url)}},filter:()=>!0,shouldContinue:()=>!0,countLimit:Number.POSITIVE_INFINITY,backoff:0,requestLimit:1e4,stackAllItems:!1},setHost:!0,maxHeaderSize:void 0,signal:void 0,enableUnixSockets:!1},st=e=>{const t=[e.timeout.socket,e.timeout.connect,e.timeout.lookup,e.timeout.request,e.timeout.secureConnect].filter((e=>"number"==typeof e));if(t.length>0)return Math.min(...t)},nt=(e,t,r)=>{const s=e.hooks?.init;if(s)for(const e of s)e(t,r)};class ot{constructor(e,t,r){if(Object.defineProperty(this,"_unixOptions",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_internals",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_merging",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_init",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),y.any([g.string,g.urlInstance,g.object,g.undefined],e),y.any([g.object,g.undefined],t),y.any([g.object,g.undefined],r),e instanceof ot||t instanceof ot)throw new TypeError("The defaults must be passed as the third argument");this._internals=(e=>{const{hooks:t,retry:r}=e,s={...e,context:{...e.context},cacheOptions:{...e.cacheOptions},https:{...e.https},agent:{...e.agent},headers:{...e.headers},retry:{...r,errorCodes:[...r.errorCodes],methods:[...r.methods],statusCodes:[...r.statusCodes]},timeout:{...e.timeout},hooks:{init:[...t.init],beforeRequest:[...t.beforeRequest],beforeError:[...t.beforeError],beforeRedirect:[...t.beforeRedirect],beforeRetry:[...t.beforeRetry],afterResponse:[...t.afterResponse]},searchParams:e.searchParams?new URLSearchParams(e.searchParams):void 0,pagination:{...e.pagination}};return void 0!==s.url&&(s.prefixUrl=""),s})(r?._internals??r??rt),this._init=[...r?._init??[]],this._merging=!1,this._unixOptions=void 0;try{if(g.plainObject(e))try{this.merge(e),this.merge(t)}finally{this.url=e.url}else try{this.merge(t)}finally{if(void 0!==t?.url){if(void 0!==e)throw new TypeError("The `url` option is mutually exclusive with the `input` argument");this.url=t.url}else void 0!==e&&(this.url=e)}}catch(e){throw e.options=this,e}}merge(e){if(e)if(e instanceof ot)for(const t of e._init)this.merge(t);else{e=(e=>{const{hooks:t,retry:r}=e,s={...e};return g.object(e.context)&&(s.context={...e.context}),g.object(e.cacheOptions)&&(s.cacheOptions={...e.cacheOptions}),g.object(e.https)&&(s.https={...e.https}),g.object(e.cacheOptions)&&(s.cacheOptions={...s.cacheOptions}),g.object(e.agent)&&(s.agent={...e.agent}),g.object(e.headers)&&(s.headers={...e.headers}),g.object(r)&&(s.retry={...r},g.array(r.errorCodes)&&(s.retry.errorCodes=[...r.errorCodes]),g.array(r.methods)&&(s.retry.methods=[...r.methods]),g.array(r.statusCodes)&&(s.retry.statusCodes=[...r.statusCodes])),g.object(e.timeout)&&(s.timeout={...e.timeout}),g.object(t)&&(s.hooks={...t},g.array(t.init)&&(s.hooks.init=[...t.init]),g.array(t.beforeRequest)&&(s.hooks.beforeRequest=[...t.beforeRequest]),g.array(t.beforeError)&&(s.hooks.beforeError=[...t.beforeError]),g.array(t.beforeRedirect)&&(s.hooks.beforeRedirect=[...t.beforeRedirect]),g.array(t.beforeRetry)&&(s.hooks.beforeRetry=[...t.beforeRetry]),g.array(t.afterResponse)&&(s.hooks.afterResponse=[...t.afterResponse])),g.object(e.pagination)&&(s.pagination={...e.pagination}),s})(e),nt(this,e,this),nt(e,e,this),this._merging=!0,"isStream"in e&&(this.isStream=e.isStream);try{let t=!1;for(const r in e){if("mutableDefaults"===r||"handlers"===r)continue;if("url"===r)continue;if(!(r in this))throw new Error(`Unexpected option: ${r}`);const s=e[r];void 0!==s&&(this[r]=s,t=!0)}t&&this._init.push(e)}finally{this._merging=!1}}}get request(){return this._internals.request}set request(e){y.any([g.function_,g.undefined],e),this._internals.request=e}get agent(){return this._internals.agent}set agent(e){y.plainObject(e);for(const t in e){if(!(t in this._internals.agent))throw new TypeError(`Unexpected agent option: ${t}`);y.any([g.object,g.undefined],e[t])}this._merging?Object.assign(this._internals.agent,e):this._internals.agent={...e}}get h2session(){return this._internals.h2session}set h2session(e){this._internals.h2session=e}get decompress(){return this._internals.decompress}set decompress(e){y.boolean(e),this._internals.decompress=e}get timeout(){return this._internals.timeout}set timeout(e){y.plainObject(e);for(const t in e){if(!(t in this._internals.timeout))throw new Error(`Unexpected timeout option: ${t}`);y.any([g.number,g.undefined],e[t])}this._merging?Object.assign(this._internals.timeout,e):this._internals.timeout={...e}}get prefixUrl(){return this._internals.prefixUrl}set prefixUrl(e){if(y.any([g.string,g.urlInstance],e),""!==e){if((e=e.toString()).endsWith("/")||(e+="/"),this._internals.prefixUrl&&this._internals.url){const{href:t}=this._internals.url;this._internals.url.href=e+t.slice(this._internals.prefixUrl.length)}this._internals.prefixUrl=e}else this._internals.prefixUrl=""}get body(){return this._internals.body}set body(e){y.any([g.string,g.buffer,g.nodeStream,g.generator,g.asyncGenerator,te,g.undefined],e),g.nodeStream(e)&&y.truthy(e.readable),void 0!==e&&(y.undefined(this._internals.form),y.undefined(this._internals.json)),this._internals.body=e}get form(){return this._internals.form}set form(e){y.any([g.plainObject,g.undefined],e),void 0!==e&&(y.undefined(this._internals.body),y.undefined(this._internals.json)),this._internals.form=e}get json(){return this._internals.json}set json(e){void 0!==e&&(y.undefined(this._internals.body),y.undefined(this._internals.form)),this._internals.json=e}get url(){return this._internals.url}set url(e){if(y.any([g.string,g.urlInstance,g.undefined],e),void 0===e)return void(this._internals.url=void 0);if(g.string(e)&&e.startsWith("/"))throw new Error("`url` must not start with a slash");const t=`${this.prefixUrl}${e.toString()}`,r=new URL(t);if(this._internals.url=r,"unix:"===r.protocol&&(r.href=`http://unix${r.pathname}${r.search}`),"http:"!==r.protocol&&"https:"!==r.protocol){const e=new Error(`Unsupported protocol: ${r.protocol}`);throw e.code="ERR_UNSUPPORTED_PROTOCOL",e}if(this._internals.username&&(r.username=this._internals.username,this._internals.username=""),this._internals.password&&(r.password=this._internals.password,this._internals.password=""),this._internals.searchParams&&(r.search=this._internals.searchParams.toString(),this._internals.searchParams=void 0),"unix"!==r.hostname)this._unixOptions=void 0;else{if(!this._internals.enableUnixSockets)throw new Error("Using UNIX domain sockets but option `enableUnixSockets` is not enabled");const e=/(?<socketPath>.+?):(?<path>.+)/.exec(`${r.pathname}${r.search}`);if(e?.groups){const{socketPath:t,path:r}=e.groups;this._unixOptions={socketPath:t,path:r,host:""}}else this._unixOptions=void 0}}get cookieJar(){return this._internals.cookieJar}set cookieJar(e){if(y.any([g.object,g.undefined],e),void 0===e)return void(this._internals.cookieJar=void 0);let{setCookie:t,getCookieString:r}=e;y.function_(t),y.function_(r),4===t.length&&0===r.length?(t=(0,Oe.promisify)(t.bind(e)),r=(0,Oe.promisify)(r.bind(e)),this._internals.cookieJar={setCookie:t,getCookieString:r}):this._internals.cookieJar=e}get signal(){return this._internals.signal}set signal(e){y.object(e),this._internals.signal=e}get ignoreInvalidCookies(){return this._internals.ignoreInvalidCookies}set ignoreInvalidCookies(e){y.boolean(e),this._internals.ignoreInvalidCookies=e}get searchParams(){return this._internals.url?this._internals.url.searchParams:(void 0===this._internals.searchParams&&(this._internals.searchParams=new URLSearchParams),this._internals.searchParams)}set searchParams(e){y.any([g.string,g.object,g.undefined],e);const t=this._internals.url;if(void 0===e)return this._internals.searchParams=void 0,void(t&&(t.search=""));const r=this.searchParams;let s;if(g.string(e))s=new URLSearchParams(e);else if(e instanceof URLSearchParams)s=e;else{!function(e){for(const t in e){const r=e[t];y.any([g.string,g.number,g.boolean,g.null_,g.undefined],r)}}(e),s=new URLSearchParams;for(const t in e){const n=e[t];null===n?s.append(t,""):void 0===n?r.delete(t):s.append(t,n)}}if(this._merging){for(const e of s.keys())r.delete(e);for(const[e,t]of s)r.append(e,t)}else t?t.search=r.toString():this._internals.searchParams=r}get searchParameters(){throw new Error("The `searchParameters` option does not exist. Use `searchParams` instead.")}set searchParameters(e){throw new Error("The `searchParameters` option does not exist. Use `searchParams` instead.")}get dnsLookup(){return this._internals.dnsLookup}set dnsLookup(e){y.any([g.function_,g.undefined],e),this._internals.dnsLookup=e}get dnsCache(){return this._internals.dnsCache}set dnsCache(e){y.any([g.object,g.boolean,g.undefined],e),this._internals.dnsCache=!0===e?tt||(tt=new Je,tt):!1===e?void 0:e}get context(){return this._internals.context}set context(e){y.object(e),this._merging?Object.assign(this._internals.context,e):this._internals.context={...e}}get hooks(){return this._internals.hooks}set hooks(e){y.object(e);for(const t in e){if(!(t in this._internals.hooks))throw new Error(`Unexpected hook event: ${t}`);const r=t,s=e[r];if(y.any([g.array,g.undefined],s),s)for(const e of s)y.function_(e);if(this._merging)s&&this._internals.hooks[r].push(...s);else{if(!s)throw new Error(`Missing hook event: ${t}`);this._internals.hooks[t]=[...s]}}}get followRedirect(){return this._internals.followRedirect}set followRedirect(e){y.boolean(e),this._internals.followRedirect=e}get followRedirects(){throw new TypeError("The `followRedirects` option does not exist. Use `followRedirect` instead.")}set followRedirects(e){throw new TypeError("The `followRedirects` option does not exist. Use `followRedirect` instead.")}get maxRedirects(){return this._internals.maxRedirects}set maxRedirects(e){y.number(e),this._internals.maxRedirects=e}get cache(){return this._internals.cache}set cache(e){y.any([g.object,g.string,g.boolean,g.undefined],e),this._internals.cache=!0===e?et:!1===e?void 0:e}get throwHttpErrors(){return this._internals.throwHttpErrors}set throwHttpErrors(e){y.boolean(e),this._internals.throwHttpErrors=e}get username(){const e=this._internals.url,t=e?e.username:this._internals.username;return decodeURIComponent(t)}set username(e){y.string(e);const t=this._internals.url,r=encodeURIComponent(e);t?t.username=r:this._internals.username=r}get password(){const e=this._internals.url,t=e?e.password:this._internals.password;return decodeURIComponent(t)}set password(e){y.string(e);const t=this._internals.url,r=encodeURIComponent(e);t?t.password=r:this._internals.password=r}get http2(){return this._internals.http2}set http2(e){y.boolean(e),this._internals.http2=e}get allowGetBody(){return this._internals.allowGetBody}set allowGetBody(e){y.boolean(e),this._internals.allowGetBody=e}get headers(){return this._internals.headers}set headers(e){y.plainObject(e),this._merging?Object.assign(this._internals.headers,z(e)):this._internals.headers=z(e)}get methodRewriting(){return this._internals.methodRewriting}set methodRewriting(e){y.boolean(e),this._internals.methodRewriting=e}get dnsLookupIpVersion(){return this._internals.dnsLookupIpVersion}set dnsLookupIpVersion(e){if(void 0!==e&&4!==e&&6!==e)throw new TypeError(`Invalid DNS lookup IP version: ${e}`);this._internals.dnsLookupIpVersion=e}get parseJson(){return this._internals.parseJson}set parseJson(e){y.function_(e),this._internals.parseJson=e}get stringifyJson(){return this._internals.stringifyJson}set stringifyJson(e){y.function_(e),this._internals.stringifyJson=e}get retry(){return this._internals.retry}set retry(e){if(y.plainObject(e),y.any([g.function_,g.undefined],e.calculateDelay),y.any([g.number,g.undefined],e.maxRetryAfter),y.any([g.number,g.undefined],e.limit),y.any([g.array,g.undefined],e.methods),y.any([g.array,g.undefined],e.statusCodes),y.any([g.array,g.undefined],e.errorCodes),y.any([g.number,g.undefined],e.noise),e.noise&&Math.abs(e.noise)>100)throw new Error(`The maximum acceptable retry noise is +/- 100ms, got ${e.noise}`);for(const t in e)if(!(t in this._internals.retry))throw new Error(`Unexpected retry option: ${t}`);this._merging?Object.assign(this._internals.retry,e):this._internals.retry={...e};const{retry:t}=this._internals;t.methods=[...new Set(t.methods.map((e=>e.toUpperCase())))],t.statusCodes=[...new Set(t.statusCodes)],t.errorCodes=[...new Set(t.errorCodes)]}get localAddress(){return this._internals.localAddress}set localAddress(e){y.any([g.string,g.undefined],e),this._internals.localAddress=e}get method(){return this._internals.method}set method(e){y.string(e),this._internals.method=e.toUpperCase()}get createConnection(){return this._internals.createConnection}set createConnection(e){y.any([g.function_,g.undefined],e),this._internals.createConnection=e}get cacheOptions(){return this._internals.cacheOptions}set cacheOptions(e){y.plainObject(e),y.any([g.boolean,g.undefined],e.shared),y.any([g.number,g.undefined],e.cacheHeuristic),y.any([g.number,g.undefined],e.immutableMinTimeToLive),y.any([g.boolean,g.undefined],e.ignoreCargoCult);for(const t in e)if(!(t in this._internals.cacheOptions))throw new Error(`Cache option \`${t}\` does not exist`);this._merging?Object.assign(this._internals.cacheOptions,e):this._internals.cacheOptions={...e}}get https(){return this._internals.https}set https(e){y.plainObject(e),y.any([g.boolean,g.undefined],e.rejectUnauthorized),y.any([g.function_,g.undefined],e.checkServerIdentity),y.any([g.string,g.object,g.array,g.undefined],e.certificateAuthority),y.any([g.string,g.object,g.array,g.undefined],e.key),y.any([g.string,g.object,g.array,g.undefined],e.certificate),y.any([g.string,g.undefined],e.passphrase),y.any([g.string,g.buffer,g.array,g.undefined],e.pfx),y.any([g.array,g.undefined],e.alpnProtocols),y.any([g.string,g.undefined],e.ciphers),y.any([g.string,g.buffer,g.undefined],e.dhparam),y.any([g.string,g.undefined],e.signatureAlgorithms),y.any([g.string,g.undefined],e.minVersion),y.any([g.string,g.undefined],e.maxVersion),y.any([g.boolean,g.undefined],e.honorCipherOrder),y.any([g.number,g.undefined],e.tlsSessionLifetime),y.any([g.string,g.undefined],e.ecdhCurve),y.any([g.string,g.buffer,g.array,g.undefined],e.certificateRevocationLists);for(const t in e)if(!(t in this._internals.https))throw new Error(`HTTPS option \`${t}\` does not exist`);this._merging?Object.assign(this._internals.https,e):this._internals.https={...e}}get encoding(){return this._internals.encoding}set encoding(e){if(null===e)throw new TypeError("To get a Buffer, set `options.responseType` to `buffer` instead");y.any([g.string,g.undefined],e),this._internals.encoding=e}get resolveBodyOnly(){return this._internals.resolveBodyOnly}set resolveBodyOnly(e){y.boolean(e),this._internals.resolveBodyOnly=e}get isStream(){return this._internals.isStream}set isStream(e){y.boolean(e),this._internals.isStream=e}get responseType(){return this._internals.responseType}set responseType(e){if(void 0!==e){if("text"!==e&&"buffer"!==e&&"json"!==e)throw new Error(`Invalid \`responseType\` option: ${e}`);this._internals.responseType=e}else this._internals.responseType="text"}get pagination(){return this._internals.pagination}set pagination(e){y.object(e),this._merging?Object.assign(this._internals.pagination,e):this._internals.pagination=e}get auth(){throw new Error("Parameter `auth` is deprecated. Use `username` / `password` instead.")}set auth(e){throw new Error("Parameter `auth` is deprecated. Use `username` / `password` instead.")}get setHost(){return this._internals.setHost}set setHost(e){y.boolean(e),this._internals.setHost=e}get maxHeaderSize(){return this._internals.maxHeaderSize}set maxHeaderSize(e){y.any([g.number,g.undefined],e),this._internals.maxHeaderSize=e}get enableUnixSockets(){return this._internals.enableUnixSockets}set enableUnixSockets(e){y.boolean(e),this._internals.enableUnixSockets=e}toJSON(){return{...this._internals}}[Symbol.for("nodejs.util.inspect.custom")](e,t){return(0,Oe.inspect)(this._internals,t)}createNativeRequestOptions(){const e=this._internals;let t;t="https:"===e.url.protocol?e.http2?e.agent:e.agent.https:e.agent.http;const{https:r}=e;let{pfx:s}=r;return g.array(s)&&g.plainObject(s[0])&&(s=s.map((e=>({buf:e.buffer,passphrase:e.passphrase})))),{...e.cacheOptions,...this._unixOptions,ALPNProtocols:r.alpnProtocols,ca:r.certificateAuthority,cert:r.certificate,key:r.key,passphrase:r.passphrase,pfx:r.pfx,rejectUnauthorized:r.rejectUnauthorized,checkServerIdentity:r.checkServerIdentity??je.checkServerIdentity,ciphers:r.ciphers,honorCipherOrder:r.honorCipherOrder,minVersion:r.minVersion,maxVersion:r.maxVersion,sigalgs:r.signatureAlgorithms,sessionTimeout:r.tlsSessionLifetime,dhparam:r.dhparam,ecdhCurve:r.ecdhCurve,crl:r.certificateRevocationLists,lookup:e.dnsLookup??e.dnsCache?.lookup,family:e.dnsLookupIpVersion,agent:t,setHost:e.setHost,method:e.method,maxHeaderSize:e.maxHeaderSize,localAddress:e.localAddress,headers:e.headers,createConnection:e.createConnection,timeout:e.http2?st(e):void 0,h2session:e.h2session}}getRequestFunction(){const e=this._internals.url,{request:t}=this._internals;return!t&&e?this.getFallbackRequestFunction():t}getFallbackRequestFunction(){const e=this._internals.url;if(e){if("https:"===e.protocol){if(this._internals.http2){if(Xe<15||15===Xe&&Ze<10){const e=new Error("To use the `http2` option, install Node.js 15.10.0 or above");throw e.code="EUNSUPPORTED",e}return Qe.auto}return Le.request}return j.request}}freeze(){const e=this._internals;Object.freeze(e),Object.freeze(e.hooks),Object.freeze(e.hooks.afterResponse),Object.freeze(e.hooks.beforeError),Object.freeze(e.hooks.beforeRedirect),Object.freeze(e.hooks.beforeRequest),Object.freeze(e.hooks.beforeRetry),Object.freeze(e.hooks.init),Object.freeze(e.https),Object.freeze(e.cacheOptions),Object.freeze(e.agent),Object.freeze(e.headers),Object.freeze(e.timeout),Object.freeze(e.retry),Object.freeze(e.retry.errorCodes),Object.freeze(e.retry.methods),Object.freeze(e.retry.statusCodes)}}const it=e=>{const{statusCode:t}=e,r=e.request.options.followRedirect?299:399;return t>=200&&t<=r||304===t};class at extends w{constructor(e,t){const{options:r}=t.request;super(`${e.message} in "${r.url.toString()}"`,e,t.request),this.name="ParseError",this.code="ERR_BODY_PARSE_FAILURE"}}const ct=(e,t,r,s)=>{const{rawBody:n}=e;try{if("text"===t)return n.toString(s);if("json"===t)return 0===n.length?"":r(n.toString(s));if("buffer"===t)return n}catch(t){throw new at(t,e)}throw new at({message:`Unknown body type '${t}'`,name:"Error"},e)};function ut(e){return"unix:"===e.protocol||"unix"===e.hostname}const{buffer:ht}=M,lt=g.string(k.versions.brotli),dt=new Set(["GET","HEAD"]),pt=new class{constructor(){Object.defineProperty(this,"weakMap",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"map",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.weakMap=new WeakMap,this.map=new Map}set(e,t){"object"==typeof e?this.weakMap.set(e,t):this.map.set(e,t)}get(e){return"object"==typeof e?this.weakMap.get(e):this.map.get(e)}has(e){return"object"==typeof e?this.weakMap.has(e):this.map.has(e)}},ft=new Set([300,301,302,303,304,307,308]),mt=["socket","connect","continue","information","upgrade"],yt=()=>{};class gt extends H.Duplex{constructor(e,t,r){super({autoDestroy:!1,highWaterMark:0}),Object.defineProperty(this,"constructor",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_noPipe",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"options",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"response",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"requestUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"redirectUrls",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"retryCount",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_stopRetry",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_downloadedSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_uploadedSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_stopReading",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_pipedServerResponses",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_request",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_responseSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_bodySize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_unproxyEvents",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_isFromCache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_cannotHaveBody",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_triggerRead",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_cancelTimeouts",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_removeListeners",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_nativeResponse",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_flushed",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_aborted",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_requestInitialized",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._downloadedSize=0,this._uploadedSize=0,this._stopReading=!1,this._pipedServerResponses=new Set,this._cannotHaveBody=!1,this._unproxyEvents=yt,this._triggerRead=!1,this._cancelTimeouts=yt,this._removeListeners=yt,this._jobs=[],this._flushed=!1,this._requestInitialized=!1,this._aborted=!1,this.redirectUrls=[],this.retryCount=0,this._stopRetry=yt,this.on("pipe",(e=>{e?.headers&&Object.assign(this.options.headers,e.headers)})),this.on("newListener",(e=>{if("retry"===e&&this.listenerCount("retry")>0)throw new Error("A retry listener has been attached already.")}));try{if(this.options=new ot(e,t,r),!this.options.url){if(""===this.options.prefixUrl)throw new TypeError("Missing `url` property");this.options.url=""}this.requestUrl=this.options.url}catch(e){const{options:t}=e;return t&&(this.options=t),void(this.flush=async()=>{this.flush=async()=>{},this.destroy(e)})}const{body:s}=this.options;if(g.nodeStream(s)&&s.once("error",(e=>{this._flushed?this._beforeError(new O(e,this)):this.flush=async()=>{this.flush=async()=>{},this._beforeError(new O(e,this))}})),this.options.signal){const e=()=>{this.destroy(new T(this))};this.options.signal.aborted?e():(this.options.signal.addEventListener("abort",e),this._removeListeners=()=>{this.options.signal?.removeEventListener("abort",e)})}}async flush(){if(!this._flushed){this._flushed=!0;try{if(await this._finalizeBody(),this.destroyed)return;if(await this._makeRequest(),this.destroyed)return void this._request?.destroy();for(const e of this._jobs)e();this._jobs.length=0,this._requestInitialized=!0}catch(e){this._beforeError(e)}}}_beforeError(e){if(this._stopReading)return;const{response:t,options:r}=this,s=this.retryCount+("RetryError"===e.name?0:1);this._stopReading=!0,e instanceof w||(e=new w(e.message,e,this));const n=e;(async()=>{if(!t?.readable||t.rawBody||this._request?.socket?.destroyed||(t.setEncoding(this.readableEncoding),await this._setRawBody(t)&&(t.body=t.rawBody.toString())),0!==this.listenerCount("retry")){let o;try{let e;t&&"retry-after"in t.headers&&(e=Number(t.headers["retry-after"]),Number.isNaN(e)?(e=Date.parse(t.headers["retry-after"])-Date.now(),e<=0&&(e=1)):e*=1e3);const i=r.retry;o=await i.calculateDelay({attemptCount:s,retryOptions:i,error:n,retryAfter:e,computedValue:He({attemptCount:s,retryOptions:i,error:n,retryAfter:e,computedValue:i.maxRetryAfter??r.timeout.request??Number.POSITIVE_INFINITY})})}catch(e){return void this._error(new w(e.message,e,this))}if(o){if(await new Promise((e=>{const t=setTimeout(e,o);this._stopRetry=()=>{clearTimeout(t),e()}})),this.destroyed)return;try{for(const e of this.options.hooks.beforeRetry)await e(n,this.retryCount+1)}catch(t){return void this._error(new w(t.message,e,this))}if(this.destroyed)return;return this.destroy(),void this.emit("retry",this.retryCount+1,e,(e=>{const t=new gt(r.url,e,r);return t.retryCount=this.retryCount+1,k.nextTick((()=>{t.flush()})),t}))}}this._error(n)})()}_read(){this._triggerRead=!0;const{response:e}=this;if(e&&!this._stopReading){let t;for(e.readableLength&&(this._triggerRead=!1);null!==(t=e.read());){this._downloadedSize+=t.length;const e=this.downloadProgress;e.percent<1&&this.emit("downloadProgress",e),this.push(t)}}}_write(e,t,r){const s=()=>{this._writeRequest(e,t,r)};this._requestInitialized?s():this._jobs.push(s)}_final(e){const t=()=>{this._request&&!this._request.destroyed?this._request.end((t=>{this._request._writableState?.errored||(t||(this._bodySize=this._uploadedSize,this.emit("uploadProgress",this.uploadProgress),this._request.emit("upload-complete")),e(t))})):e()};this._requestInitialized?t():this._jobs.push(t)}_destroy(e,t){if(this._stopReading=!0,this.flush=async()=>{},this._stopRetry(),this._cancelTimeouts(),this._removeListeners(),this.options){const{body:e}=this.options;g.nodeStream(e)&&e.destroy()}this._request&&this._request.destroy(),null===e||g.undefined(e)||e instanceof w||(e=new w(e.message,e,this)),t(e)}pipe(e,t){return e instanceof j.ServerResponse&&this._pipedServerResponses.add(e),super.pipe(e,t)}unpipe(e){return e instanceof j.ServerResponse&&this._pipedServerResponses.delete(e),super.unpipe(e),this}async _finalizeBody(){const{options:e}=this,{headers:t}=e,r=!g.undefined(e.form),s=!g.undefined(e.json),n=!g.undefined(e.body),o=dt.has(e.method)&&!("GET"===e.method&&e.allowGetBody);if(this._cannotHaveBody=o,r||s||n){if(o)throw new TypeError(`The \`${e.method}\` method cannot be used with a body`);const s=!g.string(t["content-type"]);if(n){if(te(e.body)){const r=new Re(e.body);s&&(t["content-type"]=r.headers["Content-Type"]),"Content-Length"in r.headers&&(t["content-length"]=r.headers["Content-Length"]),e.body=r.encode()}Ae(e.body)&&s&&(t["content-type"]=`multipart/form-data; boundary=${e.body.getBoundary()}`)}else if(r){s&&(t["content-type"]="application/x-www-form-urlencoded");const{form:r}=e;e.form=void 0,e.body=new URLSearchParams(r).toString()}else{s&&(t["content-type"]="application/json");const{json:r}=e;e.json=void 0,e.body=e.stringifyJson(r)}const i=await async function(e,t){return t&&"content-length"in t?Number(t["content-length"]):e?g.string(e)?P.Buffer.byteLength(e):g.buffer(e)?e.length:Ae(e)?(0,Oe.promisify)(e.getLength.bind(e))():void 0:0}(e.body,e.headers);g.undefined(t["content-length"])&&g.undefined(t["transfer-encoding"])&&!o&&!g.undefined(i)&&(t["content-length"]=String(i))}"json"!==e.responseType||"accept"in e.headers||(e.headers.accept="application/json"),this._bodySize=Number(t["content-length"])||void 0}async _onResponseBase(e){if(this.isAborted)return;const{options:t}=this,{url:r}=t;this._nativeResponse=e,t.decompress&&(e=Z(e));const s=e.statusCode,n=e;n.statusMessage=n.statusMessage??j.STATUS_CODES[s],n.url=t.url.toString(),n.requestUrl=this.requestUrl,n.redirectUrls=this.redirectUrls,n.request=this,n.isFromCache=this._nativeResponse.fromCache??!1,n.ip=this.ip,n.retryCount=this.retryCount,n.ok=it(n),this._isFromCache=n.isFromCache,this._responseSize=Number(e.headers["content-length"])||void 0,this.response=n,e.once("end",(()=>{this._responseSize=this._downloadedSize,this.emit("downloadProgress",this.downloadProgress)})),e.once("error",(t=>{this._aborted=!0,e.destroy(),this._beforeError(new C(t,this))})),e.once("aborted",(()=>{this._aborted=!0,this._beforeError(new C({name:"Error",message:"The server aborted pending request",code:"ECONNRESET"},this))})),this.emit("downloadProgress",this.downloadProgress);const o=e.headers["set-cookie"];if(g.object(t.cookieJar)&&o){let e=o.map((async e=>t.cookieJar.setCookie(e,r.toString())));t.ignoreInvalidCookies&&(e=e.map((async e=>{try{await e}catch{}})));try{await Promise.all(e)}catch(e){return void this._beforeError(e)}}if(!this.isAborted)if(t.followRedirect&&e.headers.location&&ft.has(s)){if(e.resume(),this._cancelTimeouts(),this._unproxyEvents(),this.redirectUrls.length>=t.maxRedirects)return void this._beforeError(new E(this));this._request=void 0;const o=new ot(void 0,void 0,this.options),i=303===s&&"GET"!==o.method&&"HEAD"!==o.method,a=307!==s&&308!==s,c=o.methodRewriting&&a;(i||c)&&(o.method="GET",o.body=void 0,o.json=void 0,o.form=void 0,delete o.headers["content-length"]);try{const t=P.Buffer.from(e.headers.location,"binary").toString(),s=new URL(t,r);if(!ut(r)&&ut(s))return void this._beforeError(new w("Cannot redirect to UNIX socket",{},this));s.hostname!==r.hostname||s.port!==r.port?("host"in o.headers&&delete o.headers.host,"cookie"in o.headers&&delete o.headers.cookie,"authorization"in o.headers&&delete o.headers.authorization,(o.username||o.password)&&(o.username="",o.password="")):(s.username=o.username,s.password=o.password),this.redirectUrls.push(s),o.prefixUrl="",o.url=s;for(const e of o.hooks.beforeRedirect)await e(o,n);this.emit("redirect",o,n),this.options=o,await this._makeRequest()}catch(e){return void this._beforeError(e)}}else if(t.isStream&&t.throwHttpErrors&&!it(n))this._beforeError(new S(n));else if(e.on("readable",(()=>{this._triggerRead&&this._read()})),this.on("resume",(()=>{e.resume()})),this.on("pause",(()=>{e.pause()})),e.once("end",(()=>{this.push(null)})),this._noPipe)await this._setRawBody()&&this.emit("response",e);else{this.emit("response",e);for(const r of this._pipedServerResponses)if(!r.headersSent){for(const s in e.headers){const n=!t.decompress||"content-encoding"!==s,o=e.headers[s];n&&r.setHeader(s,o)}r.statusCode=s}}}async _setRawBody(e=this){if(e.readableEnded)return!1;try{const t=await ht(e);if(!this.isAborted)return this.response.rawBody=t,!0}catch{}return!1}async _onResponse(e){try{await this._onResponseBase(e)}catch(e){this._beforeError(e)}}_onRequest(e){const{options:t}=this,{timeout:r,url:s}=t;(e=>{if(e.timings)return e.timings;const t={start:Date.now(),socket:void 0,lookup:void 0,connect:void 0,secureConnect:void 0,upload:void 0,response:void 0,end:void 0,error:void 0,abort:void 0,phases:{wait:void 0,dns:void 0,tcp:void 0,tls:void 0,request:void 0,firstByte:void 0,download:void 0,total:void 0}};e.timings=t;const r=e=>{e.once(L.errorMonitor,(()=>{t.error=Date.now(),t.phases.total=t.error-t.start}))};r(e);const s=()=>{t.abort=Date.now(),t.phases.total=t.abort-t.start};e.prependOnceListener("abort",s);const n=e=>{if(t.socket=Date.now(),t.phases.wait=t.socket-t.start,$.types.isProxy(e))return;const r=()=>{t.lookup=Date.now(),t.phases.dns=t.lookup-t.socket};e.prependOnceListener("lookup",r),I(e,{connect:()=>{t.connect=Date.now(),void 0===t.lookup&&(e.removeListener("lookup",r),t.lookup=t.connect,t.phases.dns=t.lookup-t.socket),t.phases.tcp=t.connect-t.lookup},secureConnect:()=>{t.secureConnect=Date.now(),t.phases.tls=t.secureConnect-t.connect}})};e.socket?n(e.socket):e.prependOnceListener("socket",n);const o=()=>{t.upload=Date.now(),t.phases.request=t.upload-(t.secureConnect??t.connect)};e.writableFinished?o():e.prependOnceListener("finish",o),e.prependOnceListener("response",(n=>{t.response=Date.now(),t.phases.firstByte=t.response-t.upload,n.timings=t,r(n),n.prependOnceListener("end",(()=>{e.off("abort",s),n.off("aborted",s),t.phases.total||(t.end=Date.now(),t.phases.download=t.end-t.response,t.phases.total=t.end-t.start)})),n.prependOnceListener("aborted",s)}))})(e),this.options.http2&&e.setTimeout(0),this._cancelTimeouts=function(e,t,r){if(Te in e)return ke;e[Te]=!0;const s=[],{once:n,unhandleAll:o}=function(){const e=[];return{once(t,r,s){t.once(r,s),e.push({origin:t,event:r,fn:s})},unhandleAll(){for(const t of e){const{origin:e,event:r,fn:s}=t;e.removeListener(r,s)}e.length=0}}}(),i=(e,t,r)=>{const n=setTimeout(t,e,e,r);n.unref?.();const o=()=>{clearTimeout(n)};return s.push(o),o},{host:a,hostname:c}=r,u=(t,r)=>{e.destroy(new Pe(t,r))},h=()=>{for(const e of s)e();o()};if(e.once("error",(t=>{if(h(),0===e.listenerCount("error"))throw t})),void 0!==t.request){const r=i(t.request,u,"request");n(e,"response",(e=>{n(e,"end",r)}))}if(void 0!==t.socket){const{socket:r}=t,n=()=>{u(r,"socket")};e.setTimeout(r,n),s.push((()=>{e.removeListener("timeout",n)}))}const l=void 0!==t.lookup,d=void 0!==t.connect,p=void 0!==t.secureConnect,f=void 0!==t.send;return(l||d||p||f)&&n(e,"socket",(s=>{const{socketPath:o}=e;if(s.connecting){const e=Boolean(o??0!==xe.isIP(c??a??""));if(l&&!e&&void 0===s.address().address){const e=i(t.lookup,u,"lookup");n(s,"lookup",e)}if(d){const r=()=>i(t.connect,u,"connect");e?n(s,"connect",r()):n(s,"lookup",(e=>{null===e&&n(s,"connect",r())}))}p&&"https:"===r.protocol&&n(s,"connect",(()=>{const e=i(t.secureConnect,u,"secureConnect");n(s,"secureConnect",e)}))}if(f){const r=()=>i(t.send,u,"send");s.connecting?n(s,"connect",(()=>{n(e,"upload-complete",r())})):n(e,"upload-complete",r())}})),void 0!==t.response&&n(e,"upload-complete",(()=>{const r=i(t.response,u,"response");n(e,"response",r)})),void 0!==t.read&&n(e,"response",(e=>{const r=i(t.read,u,"read");n(e,"end",r)})),h}(e,r,s);const n=t.cache?"cacheableResponse":"response";e.once(n,(e=>{this._onResponse(e)})),e.once("error",(t=>{this._aborted=!0,e.destroy(),t=t instanceof Pe?new A(t,this.timings,this):new w(t.message,t,this),this._beforeError(t)})),this._unproxyEvents=Ce(e,this,mt),this._request=e,this.emit("uploadProgress",this.uploadProgress),this._sendBody(),this.emit("request",e)}async _asyncWrite(e){return new Promise(((t,r)=>{super.write(e,(e=>{e?r(e):t()}))}))}_sendBody(){const{body:e}=this.options,t=0===this.redirectUrls.length?this:this._request??this;g.nodeStream(e)?e.pipe(t):g.generator(e)||g.asyncGenerator(e)?(async()=>{try{for await(const t of e)await this._asyncWrite(t);super.end()}catch(e){this._beforeError(e)}})():g.undefined(e)?(this._cannotHaveBody||this._noPipe)&&t.end():(this._writeRequest(e,void 0,(()=>{})),t.end())}_prepareCache(e){if(!pt.has(e)){const t=new class{constructor(e,t){this.hooks=new Map,this.request=()=>(e,t)=>{let r;if("string"==typeof e)r=Y(N.parse(e)),e={};else if(e instanceof N.URL)r=Y(N.parse(e.toString())),e={};else{const[t,...s]=(e.path??"").split("?"),n=s.length>0?`?${s.join("?")}`:"";r=Y({...e,pathname:t,search:n})}(e={headers:{},method:"GET",cache:!0,strictTtl:!1,automaticFailover:!1,...e,...Q(r)}).headers=Object.fromEntries(J(e.headers).map((([e,t])=>[e.toLowerCase(),t])));const s=new _,n=function(e,t){if("string"!=typeof(t={defaultProtocol:"http",normalizeProtocol:!0,forceHttp:!1,forceHttps:!1,stripAuthentication:!0,stripHash:!1,stripTextFragment:!0,stripWWW:!0,removeQueryParameters:[/^utm_\w+/i],removeTrailingSlash:!0,removeSingleSlash:!0,removeDirectoryIndex:!1,removeExplicitPort:!1,sortQueryParameters:!0,...t}).defaultProtocol||t.defaultProtocol.endsWith(":")||(t.defaultProtocol=`${t.defaultProtocol}:`),e=e.trim(),/^data:/i.test(e))return((e,{stripHash:t})=>{const r=/^data:(?<type>[^,]*?),(?<data>[^#]*?)(?:#(?<hash>.*))?$/.exec(e);if(!r)throw new Error(`Invalid URL: ${e}`);let{type:s,data:n,hash:o}=r.groups;const i=s.split(";");o=t?"":o;let a=!1;"base64"===i[i.length-1]&&(i.pop(),a=!0);const c=i.shift()?.toLowerCase()??"",u=[...i.map((e=>{let[t,r=""]=e.split("=").map((e=>e.trim()));return"charset"===t&&(r=r.toLowerCase(),"us-ascii"===r)?"":`${t}${r?`=${r}`:""}`})).filter(Boolean)];return a&&u.push("base64"),(u.length>0||c&&"text/plain"!==c)&&u.unshift(c),`data:${u.join(";")},${a?n.trim():n}${o?`#${o}`:""}`})(e,t);if((e=>{try{const{protocol:t}=new URL(e);return t.endsWith(":")&&!D.has(t)}catch{return!1}})(e))return e;const r=e.startsWith("//");!r&&/^\.*\//.test(e)||(e=e.replace(/^(?!(?:\w+:)?\/\/)|^\/\//,t.defaultProtocol));const s=new URL(e);if(t.forceHttp&&t.forceHttps)throw new Error("The `forceHttp` and `forceHttps` options cannot be used together");if(t.forceHttp&&"https:"===s.protocol&&(s.protocol="http:"),t.forceHttps&&"http:"===s.protocol&&(s.protocol="https:"),t.stripAuthentication&&(s.username="",s.password=""),t.stripHash?s.hash="":t.stripTextFragment&&(s.hash=s.hash.replace(/#?:~:text.*?$/i,"")),s.pathname){const e=/\b[a-z][a-z\d+\-.]{1,50}:\/\//g;let t=0,r="";for(;;){const n=e.exec(s.pathname);if(!n)break;const o=n[0],i=n.index;r+=s.pathname.slice(t,i).replace(/\/{2,}/g,"/"),r+=o,t=i+o.length}r+=s.pathname.slice(t,s.pathname.length).replace(/\/{2,}/g,"/"),s.pathname=r}if(s.pathname)try{s.pathname=decodeURI(s.pathname)}catch{}if(!0===t.removeDirectoryIndex&&(t.removeDirectoryIndex=[/^index\.[a-z]+$/]),Array.isArray(t.removeDirectoryIndex)&&t.removeDirectoryIndex.length>0){let e=s.pathname.split("/");const r=e[e.length-1];U(r,t.removeDirectoryIndex)&&(e=e.slice(0,-1),s.pathname=e.slice(1).join("/")+"/")}if(s.hostname&&(s.hostname=s.hostname.replace(/\.$/,""),t.stripWWW&&/^www\.(?!www\.)[a-z\-\d]{1,63}\.[a-z.\-\d]{2,63}$/.test(s.hostname)&&(s.hostname=s.hostname.replace(/^www\./,""))),Array.isArray(t.removeQueryParameters))for(const e of[...s.searchParams.keys()])U(e,t.removeQueryParameters)&&s.searchParams.delete(e);if(Array.isArray(t.keepQueryParameters)||!0!==t.removeQueryParameters||(s.search=""),Array.isArray(t.keepQueryParameters)&&t.keepQueryParameters.length>0)for(const e of[...s.searchParams.keys()])U(e,t.keepQueryParameters)||s.searchParams.delete(e);if(t.sortQueryParameters){s.searchParams.sort();try{s.search=decodeURIComponent(s.search)}catch{}}t.removeTrailingSlash&&(s.pathname=s.pathname.replace(/\/$/,"")),t.removeExplicitPort&&s.port&&(s.port="");const n=e;return e=s.toString(),t.removeSingleSlash||"/"!==s.pathname||n.endsWith("/")||""!==s.hash||(e=e.replace(/\/$/,"")),(t.removeTrailingSlash||"/"===s.pathname)&&""===s.hash&&t.removeSingleSlash&&(e=e.replace(/\/$/,"")),r&&!t.normalizeProtocol&&(e=e.replace(/^http:\/\//,"//")),t.stripProtocol&&(e=e.replace(/^(?:https?:)?\/\//,"")),e}(N.format(r),{stripWWW:!1,removeTrailingSlash:!1,stripAuthentication:!1});let o=`${e.method}:${n}`;e.body&&void 0!==e.method&&["POST","PATCH","PUT"].includes(e.method)&&(e.body instanceof H.Readable?e.cache=!1:o+=`:${q.createHash("md5").update(e.body).digest("hex")}`);let i=!1,a=!1;const c=e=>{a=!0;let r=!1,n=()=>{};const c=new Promise((e=>{n=()=>{r||(r=!0,e())}})),u=async r=>{if(i){r.status=r.statusCode;const t=B.fromObject(i.cachePolicy).revalidatedPolicy(e,r);if(!t.modified){r.resume(),await new Promise((e=>{r.once("end",e)}));const e=X(t.policy.responseHeaders());(r=new F({statusCode:i.statusCode,headers:e,body:i.body,url:i.url})).cachePolicy=t.policy,r.fromCache=!0}}let n;r.fromCache||(r.cachePolicy=new B(e,r,e),r.fromCache=!1),e.cache&&r.cachePolicy.storable()?(n=(e=>{const t=new H.PassThrough({autoDestroy:!1});return function(e,t){if(t._readableState.autoDestroy)throw new Error("The second stream must have the `autoDestroy` option set to `false`");const r=new Set([...Object.keys(e),...W]),s={};for(const n of r)n in t||(s[n]={get(){const t=e[n];return"function"==typeof t?t.bind(e):t},set(t){e[n]=t},enumerable:!0,configurable:!1});Object.defineProperties(t,s),e.once("aborted",(()=>{t.destroy(),t.emit("aborted")})),e.once("close",(()=>{e.complete&&t.readable?t.once("end",(()=>{t.emit("close")})):t.emit("close")}))}(e,t),e.pipe(t)})(r),(async()=>{try{const t=M.buffer(r);await Promise.race([c,new Promise((e=>r.once("end",e))),new Promise((e=>r.once("close",e)))]);const s=await t;let n={url:r.url,statusCode:r.fromCache?i.statusCode:r.statusCode,body:s,cachePolicy:r.cachePolicy.toObject()},a=e.strictTtl?r.cachePolicy.timeToLive():void 0;if(e.maxTtl&&(a=a?Math.min(a,e.maxTtl):e.maxTtl),this.hooks.size>0)for(const e of this.hooks.keys())n=await this.runHook(e,n,r);await this.cache.set(o,n,a)}catch(e){s.emit("error",new K(e))}})()):e.cache&&i&&(async()=>{try{await this.cache.delete(o)}catch(e){s.emit("error",new K(e))}})(),s.emit("response",n??r),"function"==typeof t&&t(n??r)};try{const t=this.cacheRequest(e,u);t.once("error",n),t.once("abort",n),t.once("destroy",n),s.emit("request",t)}catch(e){s.emit("error",new V(e))}};return(async()=>{const r=async e=>{await Promise.resolve();const r=e.cache?await this.cache.get(o):void 0;if(void 0===r&&!e.forceRefresh)return void c(e);const n=B.fromObject(r.cachePolicy);if(n.satisfiesWithoutRevalidation(e)&&!e.forceRefresh){const e=X(n.responseHeaders()),o=new F({statusCode:r.statusCode,headers:e,body:r.body,url:r.url});o.cachePolicy=n,o.fromCache=!0,s.emit("response",o),"function"==typeof t&&t(o)}else n.satisfiesWithoutRevalidation(e)&&Date.now()>=n.timeToLive()&&e.forceRefresh?(await this.cache.delete(o),e.headers=n.revalidationHeaders(e),c(e)):(i=r,e.headers=n.revalidationHeaders(e),c(e))},n=e=>s.emit("error",new K(e));if(this.cache instanceof G){const e=this.cache;e.once("error",n),s.on("error",(()=>e.removeListener("error",n))),s.on("response",(()=>e.removeListener("error",n)))}try{await r(e)}catch(t){e.automaticFailover&&!a&&c(e),s.emit("error",new K(t))}})(),s},this.addHook=(e,t)=>{this.hooks.has(e)||this.hooks.set(e,t)},this.removeHook=e=>this.hooks.delete(e),this.getHook=e=>this.hooks.get(e),this.runHook=async(e,...t)=>this.hooks.get(e)?.(...t),this.cache=t instanceof G?t:new G("string"==typeof t?{uri:t,namespace:"cacheable-request"}:{store:t,namespace:"cacheable-request"}),this.request=this.request.bind(this),this.cacheRequest=e}}(((e,t)=>{const r=e._request(e,t);return g.promise(r)&&(r.once=(e,t)=>{if("error"===e)(async()=>{try{await r}catch(e){t(e)}})();else{if("abort"!==e)throw new Error(`Unknown HTTP2 promise event: ${e}`);(async()=>{try{(await r).once("abort",t)}catch{}})()}return r}),r}),e);pt.set(e,t.request())}}async _createCacheableRequest(e,t){return new Promise(((r,s)=>{let n;Object.assign(t,function(e){const t={protocol:e.protocol,hostname:g.string(e.hostname)&&e.hostname.startsWith("[")?e.hostname.slice(1,-1):e.hostname,host:e.host,hash:e.hash,search:e.search,pathname:e.pathname,href:e.href,path:`${e.pathname||""}${e.search||""}`};return g.string(e.port)&&e.port.length>0&&(t.port=Number(e.port)),(e.username||e.password)&&(t.auth=`${e.username||""}:${e.password||""}`),t}(e));const o=pt.get(t.cache)(t,(async e=>{if(e._readableState.autoDestroy=!1,n){const t=()=>{e.req&&(e.complete=e.req.res.complete)};e.prependOnceListener("end",t),t(),(await n).emit("cacheableResponse",e)}r(e)}));o.once("error",s),o.once("request",(async e=>{n=e,r(n)}))}))}async _makeRequest(){const{options:e}=this,{headers:t,username:r,password:s}=e,n=e.cookieJar;for(const e in t)if(g.undefined(t[e]))delete t[e];else if(g.null_(t[e]))throw new TypeError(`Use \`undefined\` instead of \`null\` to delete the \`${e}\` header`);if(e.decompress&&g.undefined(t["accept-encoding"])&&(t["accept-encoding"]=lt?"gzip, deflate, br":"gzip, deflate"),r||s){const e=P.Buffer.from(`${r}:${s}`).toString("base64");t.authorization=`Basic ${e}`}if(n){const r=await n.getCookieString(e.url.toString());g.nonEmptyString(r)&&(t.cookie=r)}let o;e.prefixUrl="";for(const t of e.hooks.beforeRequest){const r=await t(e);if(!g.undefined(r)){o=()=>r;break}}o||(o=e.getRequestFunction());const i=e.url;this._requestOptions=e.createNativeRequestOptions(),e.cache&&(this._requestOptions._request=o,this._requestOptions.cache=e.cache,this._requestOptions.body=e.body,this._prepareCache(e.cache));const a=e.cache?this._createCacheableRequest:o;try{let t=a(i,this._requestOptions);g.promise(t)&&(t=await t),g.undefined(t)&&(t=e.getFallbackRequestFunction()(i,this._requestOptions),g.promise(t)&&(t=await t)),(c=t).writable&&!c.writableEnded?this._onRequest(t):this.writable?(this.once("finish",(()=>{this._onResponse(t)})),this._sendBody()):this._onResponse(t)}catch(e){if(e instanceof K)throw new R(e,this);throw e}var c}async _error(e){try{if(e instanceof S&&!this.options.throwHttpErrors);else for(const t of this.options.hooks.beforeError)e=await t(e)}catch(t){e=new w(t.message,t,this)}this.destroy(e)}_writeRequest(e,t,r){this._request&&!this._request.destroyed&&this._request.write(e,t,(s=>{if(!s&&!this._request.destroyed){this._uploadedSize+=P.Buffer.byteLength(e,t);const r=this.uploadProgress;r.percent<1&&this.emit("uploadProgress",r)}r(s)}))}get ip(){return this.socket?.remoteAddress}get isAborted(){return this._aborted}get socket(){return this._request?.socket??void 0}get downloadProgress(){let e;return e=this._responseSize?this._downloadedSize/this._responseSize:this._responseSize===this._downloadedSize?1:0,{percent:e,transferred:this._downloadedSize,total:this._responseSize}}get uploadProgress(){let e;return e=this._bodySize?this._uploadedSize/this._bodySize:this._bodySize===this._uploadedSize?1:0,{percent:e,transferred:this._uploadedSize,total:this._bodySize}}get timings(){return this._request?.timings}get isFromCache(){return this._isFromCache}get reusedSocket(){return this._request?.reusedSocket}}class _t extends w{constructor(e){super("Promise was canceled",{},e),this.name="CancelError",this.code="ERR_CANCELED"}get isCanceled(){return!0}}const bt=["request","response","redirect","uploadProgress","downloadProgress"];function vt(e){let t,r,s;const n=new _.EventEmitter,o=new v(((i,a,c)=>{c((()=>{t.destroy()})),c.shouldReject=!1,c((()=>{a(new _t(t))}));const u=h=>{c((()=>{}));const l=e??new gt(void 0,void 0,s);l.retryCount=h,l._noPipe=!0,t=l,l.once("response",(async e=>{const t=(e.headers["content-encoding"]??"").toLowerCase(),s="gzip"===t||"deflate"===t||"br"===t,{options:n}=l;if(s&&!n.decompress)e.body=e.rawBody;else try{e.body=ct(e,n.responseType,n.parseJson,n.encoding)}catch(t){if(e.body=e.rawBody.toString(),it(e))return void l._beforeError(t)}try{const t=n.hooks.afterResponse;for(const[r,s]of t.entries())if(e=await s(e,(async e=>{throw n.merge(e),n.prefixUrl="",e.url&&(n.url=e.url),n.hooks.afterResponse=n.hooks.afterResponse.slice(0,r),new x(l)})),!g.object(e)||!g.number(e.statusCode)||g.nullOrUndefined(e.body))throw new TypeError("The `afterResponse` hook returned an invalid value")}catch(e){return void l._beforeError(e)}r=e,it(e)?(l.destroy(),i(l.options.resolveBodyOnly?e.body:e)):l._beforeError(new S(e))}));const d=e=>{if(o.isCanceled)return;const{options:t}=l;if(e instanceof S&&!t.throwHttpErrors){const{response:t}=e;return l.destroy(),void i(l.options.resolveBodyOnly?t.body:t)}a(e)};l.once("error",d);const p=l.options?.body;l.once("retry",((t,r)=>{e=void 0;const n=l.options.body;if(p===n&&g.nodeStream(n))return r.message="Cannot retry with consumed body stream",void d(r);s=l.options,u(t)})),Ce(l,n,bt),g.undefined(e)&&l.flush()};u(0)}));o.on=(e,t)=>(n.on(e,t),o),o.off=(e,t)=>(n.off(e,t),o);const i=e=>{const t=(async()=>{await o;const{options:t}=r.request;return ct(r,e,t.parseJson,t.encoding)})();return Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)),t};return o.json=()=>{if(t.options){const{headers:e}=t.options;t.writableFinished||"accept"in e||(e.accept="application/json")}return i("json")},o.buffer=()=>i("buffer"),o.text=()=>i("text"),o}const wt=async e=>new Promise((t=>{setTimeout(t,e)})),Et=e=>g.function_(e),St=["get","post","put","patch","head","delete"],Rt=e=>{e={options:new ot(void 0,void 0,e.options),handlers:[...e.handlers],mutableDefaults:e.mutableDefaults},Object.defineProperty(e,"mutableDefaults",{enumerable:!0,configurable:!1,writable:!1});const t=(t,r,s=e.options)=>{const n=new gt(t,r,s);let o;const i=e=>(n.options=e,n._noPipe=!e.isStream,n.flush(),e.isStream?n:(o||(o=vt(n)),o));let a=0;const c=t=>{const r=(e.handlers[a++]??i)(t,c);if(g.promise(r)&&!n.options.isStream&&(o||(o=vt(n)),r!==o)){const e=Object.getOwnPropertyDescriptors(o);for(const t in e)t in r&&delete e[t];Object.defineProperties(r,e),r.cancel=o.cancel}return r};return c(n.options)};t.extend=(...t)=>{const r=new ot(void 0,void 0,e.options),s=[...e.handlers];let n;for(const e of t)Et(e)?(r.merge(e.defaults.options),s.push(...e.defaults.handlers),n=e.defaults.mutableDefaults):(r.merge(e),e.handlers&&s.push(...e.handlers),n=e.mutableDefaults);return Rt({options:r,handlers:s,mutableDefaults:Boolean(n)})};const r=async function*(r,s){let n=new ot(r,s,e.options);n.resolveBodyOnly=!1;const{pagination:o}=n;y.function_(o.transform),y.function_(o.shouldContinue),y.function_(o.filter),y.function_(o.paginate),y.number(o.countLimit),y.number(o.requestLimit),y.number(o.backoff);const i=[];let{countLimit:a}=o,c=0;for(;c<o.requestLimit;){0!==c&&await wt(o.backoff);const e=await t(void 0,void 0,n),r=await o.transform(e),s=[];y.array(r);for(const e of r)if(o.filter({item:e,currentItems:s,allItems:i})){if(!o.shouldContinue({item:e,currentItems:s,allItems:i}))return;if(yield e,o.stackAllItems&&i.push(e),s.push(e),--a<=0)return}const u=o.paginate({response:e,currentItems:s,allItems:i});if(!1===u)return;u===e.request.options?n=e.request.options:(n.merge(u),y.any([g.urlInstance,g.undefined],u.url),void 0!==u.url&&(n.prefixUrl="",n.url=u.url)),c++}};(t.paginate=r).all=async(e,t)=>{const s=[];for await(const n of r(e,t))s.push(n);return s},t.paginate.each=r,t.stream=(e,r)=>t(e,{...r,isStream:!0});for(const e of St)t[e]=(r,s)=>t(r,{...s,method:e}),t.stream[e]=(r,s)=>t(r,{...s,method:e,isStream:!0});return e.mutableDefaults||(Object.freeze(e.handlers),e.options.freeze()),Object.defineProperty(t,"defaults",{value:e,writable:!1,configurable:!1,enumerable:!0}),t},Ot=Rt,At={options:new ot,handlers:[],mutableDefaults:!1},Ct=Ot(At),xt=Ct},2291:(e,t,r)=>{"use strict";r.r(t),r.d(t,{AbortError:()=>U,default:()=>D});var s=r(6729);class n extends Error{constructor(e){super(e),this.name="TimeoutError"}}class o extends Error{constructor(e){super(),this.name="AbortError",this.message=e}}const i=e=>void 0===globalThis.DOMException?new o(e):new DOMException(e),a=e=>{const t=void 0===e.reason?i("This operation was aborted."):e.reason;return t instanceof Error?t:i(t)};var c,u=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};c=new WeakMap;const h=class{constructor(){c.set(this,[])}enqueue(e,t){const r={priority:(t={priority:0,...t}).priority,run:e};if(this.size&&u(this,c,"f")[this.size-1].priority>=t.priority)return void u(this,c,"f").push(r);const s=function(e,t,r){let s=0,n=e.length;for(;n>0;){const r=Math.trunc(n/2);let i=s+r;o=e[i],t.priority-o.priority<=0?(s=++i,n-=r+1):n=r}var o;return s}(u(this,c,"f"),r);u(this,c,"f").splice(s,0,r)}dequeue(){const e=u(this,c,"f").shift();return null==e?void 0:e.run}filter(e){return u(this,c,"f").filter((t=>t.priority===e.priority)).map((e=>e.run))}get size(){return u(this,c,"f").length}};var l,d,p,f,m,y,g,_,b,v,w,E,S,R,O,A,C,x,T,k,P,H,j,L,$,I,N=function(e,t,r,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(e,r):n?n.value=r:t.set(e,r),r},q=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};class U extends Error{}d=new WeakMap,p=new WeakMap,f=new WeakMap,m=new WeakMap,y=new WeakMap,g=new WeakMap,_=new WeakMap,b=new WeakMap,v=new WeakMap,w=new WeakMap,E=new WeakMap,S=new WeakMap,R=new WeakMap,O=new WeakMap,l=new WeakSet,A=function(){return q(this,p,"f")||q(this,f,"f")<q(this,m,"f")},C=function(){return q(this,E,"f")<q(this,S,"f")},x=function(){var e;N(this,E,(e=q(this,E,"f"),--e),"f"),q(this,l,"m",P).call(this),this.emit("next")},T=function(){q(this,l,"m",j).call(this),q(this,l,"m",H).call(this),N(this,b,void 0,"f")},k=function(){const e=Date.now();if(void 0===q(this,_,"f")){const t=q(this,g,"f")-e;if(!(t<0))return void 0===q(this,b,"f")&&N(this,b,setTimeout((()=>{q(this,l,"m",T).call(this)}),t),"f"),!0;N(this,f,q(this,d,"f")?q(this,E,"f"):0,"f")}return!1},P=function(){if(0===q(this,v,"f").size)return q(this,_,"f")&&clearInterval(q(this,_,"f")),N(this,_,void 0,"f"),this.emit("empty"),0===q(this,E,"f")&&this.emit("idle"),!1;if(!q(this,R,"f")){const e=!q(this,l,"a",k);if(q(this,l,"a",A)&&q(this,l,"a",C)){const t=q(this,v,"f").dequeue();return!!t&&(this.emit("active"),t(),e&&q(this,l,"m",H).call(this),!0)}}return!1},H=function(){q(this,p,"f")||void 0!==q(this,_,"f")||(N(this,_,setInterval((()=>{q(this,l,"m",j).call(this)}),q(this,y,"f")),"f"),N(this,g,Date.now()+q(this,y,"f"),"f"))},j=function(){0===q(this,f,"f")&&0===q(this,E,"f")&&q(this,_,"f")&&(clearInterval(q(this,_,"f")),N(this,_,void 0,"f")),N(this,f,q(this,d,"f")?q(this,E,"f"):0,"f"),q(this,l,"m",L).call(this)},L=function(){for(;q(this,l,"m",P).call(this););},$=async function(e){return new Promise(((t,r)=>{e.addEventListener("abort",(()=>{r(new U("The task was aborted."))}),{once:!0})}))},I=async function(e,t){return new Promise((r=>{const s=()=>{t&&!t()||(this.off(e,s),r())};this.on(e,s)}))};const D=class extends s{constructor(e){var t,r,s,n;if(super(),l.add(this),d.set(this,void 0),p.set(this,void 0),f.set(this,0),m.set(this,void 0),y.set(this,void 0),g.set(this,0),_.set(this,void 0),b.set(this,void 0),v.set(this,void 0),w.set(this,void 0),E.set(this,0),S.set(this,void 0),R.set(this,void 0),O.set(this,void 0),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),!("number"==typeof(e={carryoverConcurrencyCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:h,...e}).intervalCap&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${null!==(r=null===(t=e.intervalCap)||void 0===t?void 0:t.toString())&&void 0!==r?r:""}\` (${typeof e.intervalCap})`);if(void 0===e.interval||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${null!==(n=null===(s=e.interval)||void 0===s?void 0:s.toString())&&void 0!==n?n:""}\` (${typeof e.interval})`);N(this,d,e.carryoverConcurrencyCount,"f"),N(this,p,e.intervalCap===Number.POSITIVE_INFINITY||0===e.interval,"f"),N(this,m,e.intervalCap,"f"),N(this,y,e.interval,"f"),N(this,v,new e.queueClass,"f"),N(this,w,e.queueClass,"f"),this.concurrency=e.concurrency,this.timeout=e.timeout,N(this,O,!0===e.throwOnTimeout,"f"),N(this,R,!1===e.autoStart,"f")}get concurrency(){return q(this,S,"f")}set concurrency(e){if(!("number"==typeof e&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);N(this,S,e,"f"),q(this,l,"m",L).call(this)}async add(e,t={}){return t={timeout:this.timeout,throwOnTimeout:q(this,O,"f"),...t},new Promise(((r,s)=>{q(this,v,"f").enqueue((async()=>{var o,i,c;N(this,E,(i=q(this,E,"f"),++i),"f"),N(this,f,(c=q(this,f,"f"),++c),"f");try{if(null===(o=t.signal)||void 0===o?void 0:o.aborted)throw new U("The task was aborted.");let s=e({signal:t.signal});t.timeout&&(s=function(e,t,r,s){let o;const i=new Promise(((i,c)=>{if("number"!=typeof t||1!==Math.sign(t))throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${t}\``);if(t!==Number.POSITIVE_INFINITY){if((s={customTimers:{setTimeout,clearTimeout},...s}).signal){const{signal:e}=s;e.aborted&&c(a(e)),e.addEventListener("abort",(()=>{c(a(e))}))}o=s.customTimers.setTimeout.call(void 0,(()=>{const s=r instanceof Error?r:new n(`Promise timed out after ${t} milliseconds`);"function"==typeof e.cancel&&e.cancel(),c(s)}),t),(async()=>{try{i(await e)}catch(e){c(e)}finally{s.customTimers.clearTimeout.call(void 0,o)}})()}else i(e)}));return i.clear=()=>{clearTimeout(o),o=void 0},i}(Promise.resolve(s),t.timeout)),t.signal&&(s=Promise.race([s,q(this,l,"m",$).call(this,t.signal)]));const i=await s;r(i),this.emit("completed",i)}catch(e){if(e instanceof n&&!t.throwOnTimeout)return void r();s(e),this.emit("error",e)}finally{q(this,l,"m",x).call(this)}}),t),this.emit("add"),q(this,l,"m",P).call(this)}))}async addAll(e,t){return Promise.all(e.map((async e=>this.add(e,t))))}start(){return q(this,R,"f")?(N(this,R,!1,"f"),q(this,l,"m",L).call(this),this):this}pause(){N(this,R,!0,"f")}clear(){N(this,v,new(q(this,w,"f")),"f")}async onEmpty(){0!==q(this,v,"f").size&&await q(this,l,"m",I).call(this,"empty")}async onSizeLessThan(e){q(this,v,"f").size<e||await q(this,l,"m",I).call(this,"next",(()=>q(this,v,"f").size<e))}async onIdle(){0===q(this,E,"f")&&0===q(this,v,"f").size||await q(this,l,"m",I).call(this,"idle")}get size(){return q(this,v,"f").size}sizeBy(e){return q(this,v,"f").filter(e).length}get pending(){return q(this,E,"f")}get isPaused(){return q(this,R,"f")}}}},t={};function r(s){var n=t[s];if(void 0!==n)return n.exports;var o=t[s]={exports:{}};return e[s].call(o.exports,o,o.exports,r),o.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var s in t)r.o(t,s)&&!r.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r(3607)})();
//# sourceMappingURL=index.js.map